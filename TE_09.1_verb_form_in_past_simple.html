<!DOCTYPE html>
<html><head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<title>verbs</title>

    <!-- MATERIAL SYMBOLS (Google Icons) -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0,0" />
    <style>
/* ====================================================================== */
/* GENERAL PAGE STYLES */
/* ====================================================================== */


/* ====================================================================== */
/* GLOBAL CSS-parameters and COLORS */
/* ====================================================================== */
    :root {
    
/* === üé® COLOR PALLETTE ===*/
/* ====================================================================== */
    --color-white:          #ffffff;            /* –±–µ–ª—ã–π */
    --color-background:     #e0e0e0;            /* RGB=224 –æ–±—â–∏–π —Ñ–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∫—Ä—É–ø–Ω—ã—Ö –±–ª–æ–∫–æ–≤ */
    --color-grey-200:       #C8C8C8;            /* RGB=200 –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü / –ª–∏–Ω–∏–π */
    --color-grey-175:       #AFAFAF;            /* RGB=175 –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü / –ª–∏–Ω–∏–π */
    --color-grey-150:       #969696;            /* RGB=150 –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç –≥—Ä–∞–Ω–∏—Ü / –ª–∏–Ω–∏–π */
    --color-neutral:        #111827;            /* NEUTRAL: –ª—é–±–æ–π —Ç–µ–∫—Å—Ç, –Ω–µ —É—á–∞—Å—Ç–≤—É—é—â–∏–π –≤ –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö */
    --color_ultra_violet:   #7e0fff;
    --color_tropical_mint:  #0fffc1;
    --color_dark_emerald:   #226C53;
    --color_vibrant_coral:  #FF6F59;

    --color_crayola_blue:   #4E76E4;
    --color_lime_moss:      #A0AB17;
    --color_stormy_teal:    #156064;
    --color_fire_brick:     #C1121F;   

/* === –ü–†–û–í–ï–†–ö–ê –û–¢–í–ï–¢–û–í === */
/* ====================================================================== */
    --color-attempt: var(--color_ultra_violet);        /* ATTEMPT: –æ—Ç–≤–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É—á–µ–Ω–∏–∫ –≤–≤—ë–ª/–≤—ã–±—Ä–∞–ª, –Ω–æ –µ—â—ë –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã */
    --color-correct: var(--color_dark_emerald);        /* CORRECT: –∑–µ–ª—ë–Ω—ã–π –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤, –≥–∞–ª–æ—á–µ–∫ –∏ —Ç.–ø. */
    --color-wrong: var(--color_vibrant_coral);         /* WRONG: –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤, –∫—Ä–µ—Å—Ç–∏–∫–æ–≤ –∏ –±–æ—Ä–¥–µ—Ä–æ–≤ –æ—à–∏–±–æ–∫ */

/* === –ì–†–ê–î–ò–ï–ù–¢–´ –ò –¢–ï–ù–ò –ò–ó –¢–ï–• –ñ–ï –¶–í–ï–¢–û–í === */
/* ====================================================================== */
    --color-gradient-1: var(--color_ultra_violet);       /* –ø–µ—Ä–≤—ã–π —Ü–≤–µ—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è glow) */
    --color-gradient-2: var(--color_tropical_mint);      /* –≤—Ç–æ—Ä–æ–π —Ü–≤–µ—Ç –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
    --color-shadow-1: var(--color-grey-175);        /* —Ç–µ–Ω—å ‚Ññ1 (—Ç—ë–º–Ω–∞—è —á–∞—Å—Ç—å) */
    --color-shadow-2: var(--color-white);           /* —Ç–µ–Ω—å ‚Ññ2 (—Å–≤–µ—Ç–ª–∞—è —á–∞—Å—Ç—å) */

/* === –ü–†–û–ò–ó–í–û–î–ù–´–ï –¶–í–ï–¢–ê –î–õ–Ø –¢–ï–ö–°–¢–ê –û–¢–í–ï–¢–û–í === */
/* ====================================================================== */
    --neutral-text-color: var(--color-neutral);     /* NEUTRAL —Ç–µ–∫—Å—Ç: –∑–∞–≥–æ–ª–æ–≤–∫–∏, –æ–±—ã—á–Ω—ã–µ –∞–±–∑–∞—Ü—ã */
    --answer-text-color: var(--color-attempt);      /* –±–∞–∑–æ–≤—ã–π —Ü–≤–µ—Ç –¥–ª—è –í–í–ï–î–Å–ù–ù–´–• / –í–´–ë–†–ê–ù–ù–´–• –æ—Ç–≤–µ—Ç–æ–≤ (–¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏) */
    --answer-attempt-color: var(--color-attempt);   /* —Å–∏–Ω–æ–Ω–∏–º, —á—Ç–æ–±—ã –±—ã–ª–æ –ø—Ä–æ—â–µ —á–∏—Ç–∞—Ç—å –∫–æ–¥ */
    --answer-correct-color: var(--color-correct);   /* —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ */
    --answer-wrong-color: var(--color-grey-150);    /* —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–æ–∫ (–º–æ–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ–∑–∂–µ) */

/* === –ì–†–ê–ù–ò–¶–´ –î–õ–Ø GAP / plug-gap / MCQ –∏ —Ç.–ø. === */
/* ====================================================================== */
    --gap-border-bottom: 1px solid var(--color-grey-200);  /* –Ω–∏–∂–Ω—è—è –ª–∏–Ω–∏—è ¬´–ø—É—Å—Ç–æ–≥–æ¬ª –ø–æ–ª—è / –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ */

/* === –§–û–ù–´ –î–õ–Ø –ú–ù–û–ì–û–°–¢–†–û–ß–ù–´–• GAP (textarea) === */
/* ====================================================================== */
    --gap-textarea-bg: var(--surface-bg);                   /* –±–∞–∑–æ–≤—ã–π —Ñ–æ–Ω textarea.gap */
    }
/* ===== MATERIAL SYMBOLS ===== */
/* ====================================================================== */
    .material-symbols-outlined {
        font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24;
        font-size: 1.4rem;       /* —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        line-height: 1;          /* —á—Ç–æ–±—ã –Ω–µ ¬´–ø—Ä—ã–≥–∞–ª–∞¬ª –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        vertical-align: middle;  /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ä—è–¥–æ–º —Å —Ç–µ–∫—Å—Ç–æ–º */
    }
/* ===== GLOBAL PAGE STYLES ===== */
/* ====================================================================== */
    html { 
        font-size: 16px; 
    }
    body { 
        font-family: Georgia, Arial, sans-serif; 
        font-size: 1rem; 
        line-height: 2.2; 
        color: var(--neutral-text-color); 
        max-width: 1500px; 
        margin: auto; 
        padding: 1rem 1rem 10rem; 
        background-color:  var(--color-background);
    }
    * { 
        font-size: inherit; 
    }
    /* –ù—É–º–µ—Ä–∞—Ü–∏—è –°–¢–†–û–ö –≤ GAP (1), (2), ... –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π */
/* ====================================================================== */
    .gap-qnum {
        display: inline-block;
        min-width: 1.7em;              /* ¬´–∫–æ–ª–æ–Ω–∫–∞¬ª –ø–æ–¥ –Ω–æ–º–µ—Ä */
        margin-right: 0.5em;           /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–æ–º–µ—Ä–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º */
        color: var(--color-grey-150);   /* —Ç–æ—Ç –∂–µ —Ü–≤–µ—Ç, —á—Ç–æ –∏ –¥–ª—è MCQ (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å) */
        text-align: right;             /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é */
    }
    /* Gap numbering style */
    .gap-label {
        color: var(--color-grey-150);
        font-size: 0.7em;          /* –ø–æ–º–µ–Ω—å—à–µ, —á–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç */
        vertical-align: super;     /* –∫–∞–∫ –≤–µ—Ä—Ö–Ω–∏–π –∏–Ω–¥–µ–∫—Å */
        line-height: 1;
        margin-left: 0.05em;       /* –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –æ—Ç —Å–ª–æ–≤–∞/—Å–∫–æ–±–∫–∏ */
        margin-right: 0.15em;      /* –∏ –ø–µ—Ä–µ–¥ —Å–∞–º–∏–º –ø—Ä–æ–ø—É—Å–∫–æ–º */
        font-weight: 500;          /* –º–æ–∂–Ω–æ —á—É—Ç—å –≤—ã–¥–µ–ª–∏—Ç—å, —á—Ç–æ–±—ã —á–∏—Ç–∞–ª–æ—Å—å */
        position: relative;
        top: -0.5em;  /* –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ ‚Äî –≤—ã—à–µ, –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ ‚Äî –Ω–∏–∂–µ */
    }
/* ===== GLOBAL NEUMORPHIC SURFACES ===== */
/* ====================================================================== */
    :root {
        /* –ë–∞–∑–æ–≤—ã–π —Ñ–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        --surface-bg: var(--color-background);

        /* –†–∞–¥–∏—É—Å—ã ‚Äî –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞–¥–∞–ª–∏, –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ –≤—Å–µ–º—É —Ñ–∞–π–ª—É */
        --radius-lg: 12px;   /* –∫—Ä—É–ø–Ω—ã–µ –±–ª–æ–∫–∏: –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, callout, toggle */
        --radius-md: 8px;    /* —Å—Ä–µ–¥–Ω–∏–µ: –ø—É–ª-—ç–ª–µ–º–µ–Ω—Ç—ã, –º–∞–ª–µ–Ω—å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        --radius-sm: 4px;    /* –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Å–æ–≤—Å–µ–º –º–µ–ª–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã */

        /* –ù–µ–æ–º–æ—Ä—Ñ–Ω—ã–π ¬´–º—è–≥–∫–∏–π¬ª –æ–±—ä—ë–º –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        --shadow-soft-lg:
            20px 20px 45px var(--color-grey-150),
            -1px -2px 5px var(--color-white);

        /* –ë–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è ‚Äî –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —à—Ç—É–∫ (–ø—É–ª–∞–π, –Ω–æ–º–µ—Ä, –∏–∫–æ–Ω–∫–∏) */
        --shadow-soft-md:
            10px 10px 24px var(--color-grey-175),
            -1px -2px 5px var(--color-white);
    }
/* ===== GLOBAL GLOW SETTINGS ===== */
/* ====================================================================== */
    :root {
        --glow-gradient: linear-gradient(270deg, var(--color-gradient-1), var(--color-gradient-2));  /* –æ–±—â–∞—è —Ä–∞–¥—É–≥–∞ */
        --glow-bg-size: 200% 200%;                                   /* —Ä–∞–∑–º–µ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
        --glow-duration: 8s;                                         /* –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ */
        --glow-opacity-min: 0.55;
        --glow-opacity-max: 0.9;
    }
    @keyframes glow {
        0%   { background-position: 100% 50%;   opacity: var(--glow-opacity-min); }
        50%  { background-position: 0% 50%; opacity: var(--glow-opacity-max); }
        100% { background-position: 100% 50%;   opacity: var(--glow-opacity-min); }
    }   
    /* –ù–∞–±–æ—Ä —Ü–≤–µ—Ç–æ–≤—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç–∞/–∏–∫–æ–Ω–æ–∫/–Ω–æ–º–µ—Ä–æ–≤ –∏ —Ç.–ø. */
    @keyframes color-1 {
        0%   { color: var(--color-gradient-1); }   /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
        50%  { color: var(--color-gradient-2); }   /* –º—è—Ç–Ω—ã–π */
        100% { color: var(--color-gradient-1); }   /* –æ–±—Ä–∞—Ç–Ω–æ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
    }
/* ===== GLOBAL UNDER-GLOW PRESET (—à–∏—Ä–æ–∫–æ–µ, –º—è–≥–∫–æ–µ –ø—è—Ç–Ω–æ —á—É—Ç—å –Ω–∏–∂–µ –∫–∞—Ä—Ç–æ—á–∫–∏) ===== */
/* ====================================================================== */
    aside::before {
        content: "";
        position: absolute;

        left: 5%;                /* glow —É–∂–µ, —á–µ–º —Å–∞–º –±–ª–æ–∫ */
        right: 5%;
        height: 42%;             /* —Ç–æ–ª—å–∫–æ –Ω–∏–∂–Ω—è—è —á–∞—Å—Ç—å –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π */
        border-radius: 999px;    /* –≤—ã—Ç—è–Ω—É—Ç—ã–π –æ–≤–∞–ª */
        z-index: -1;             /* –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–¥ —ç–ª–µ–º–µ–Ω—Ç–æ–º */
        pointer-events: none;

        /* –æ–±—â–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –∏ –∞–Ω–∏–º–∞—Ü–∏—è glow */
        background: var(--glow-gradient);
        background-size: var(--glow-bg-size);
        animation: glow var(--glow-duration) ease-in-out infinite;
    }
/* ===== GLOBAL GLOW SHADOW PRESET (–º—è–≥–∫–∞—è –Ω–∏–∂–Ω—è—è —Ç–µ–Ω—å) ===== */
/* ====================================================================== */
    :root {
        /* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º—è–≥–∫–æ–π —Ç–µ–Ω–∏-–≥–ª–æ—É –ø–æ–¥ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ (input.gap –∏ –¥—Ä.) */
        --glow-shadow-soft-y-1: 9px;
        --glow-shadow-soft-blur-1: 10px;
        --glow-shadow-soft-spread-1: -6px;
        --glow-shadow-soft-color-1: rgba(126, 15, 255, 0.45);

        --glow-shadow-soft-y-2: 12px;
        --glow-shadow-soft-blur-2: 18px;
        --glow-shadow-soft-spread-2: -8px;
        --glow-shadow-soft-color-2: rgba(15, 255, 193, 0.60);
    }

    @keyframes glow-shadow-soft {
        0% {
            box-shadow: 0 var(--glow-shadow-soft-y-1)
                           var(--glow-shadow-soft-blur-1)
                           var(--glow-shadow-soft-spread-1)
                           var(--glow-shadow-soft-color-1);
        }
        50% {
            box-shadow: 0 var(--glow-shadow-soft-y-2)
                           var(--glow-shadow-soft-blur-2)
                           var(--glow-shadow-soft-spread-2)
                           var(--glow-shadow-soft-color-2);
        }
        100% {
            box-shadow: 0 var(--glow-shadow-soft-y-1)
                           var(--glow-shadow-soft-blur-1)
                           var(--glow-shadow-soft-spread-1)
                           var(--glow-shadow-soft-color-1);
        }
    }
/* ===== GLOBAL GLOW BORDERS PRESET ===== */
/* ====================================================================== */
    /* –û–±—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö ¬´–Ω–µ–æ–Ω–æ–≤—ã—Ö¬ª —Ä–∞–º–æ–∫ + –±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–∫—Å—Ç–∞. */
    @keyframes border-glow-1 {
        0%   { border-color: var(--color-gradient-1); }   /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
        50%  { border-color: var(--color-gradient-2); }   /* –º—è—Ç–Ω—ã–π */
        100% { border-color: var(--color-gradient-1); }   /* –æ–±—Ä–∞—Ç–Ω–æ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
    }

    /* –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å–≤–µ—Ç—è—â—É—é—Å—è —Ä–∞–º–∫—É,
       –ø–æ–¥–∫–ª—é—á–∞–µ–º —Å—é–¥–∞ –æ–¥–Ω–∏–º —Å–ø–∏—Å–∫–æ–º —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤. —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é */
    aside {
        /* —Ä–∞–º–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ –ø–µ—Ä–∏–º–µ—Ç—Ä—É ‚Äî 1px —Å–ø–ª–æ—à–Ω–∞—è */
        border-style: solid;
        border-width: 1px;
        border-color: var(--color-gradient-1);      /* —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ü–≤–µ—Ç, —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å keyframes */

        /* –∞–Ω–∏–º–∞—Ü–∏—è —Ü–≤–µ—Ç–∞ —Ä–∞–º–∫–∏ (border-color) */
        animation: border-glow-1 var(--glow-duration) ease-in-out infinite;

        /* —Ç–µ–∫—Å—Ç —É —Ç–∞–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Äî –≤—Å–µ–≥–¥–∞ —Ç—ë–º–Ω—ã–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π */
        color: var(--neutral-text-color);
    }
/* ===== QUICK TEXT FORMATTING ===== */
/* ====================================================================== */
    .red-text {
        color: red;
        font-weight: bold;
    }
    .blue-underline {
        text-decoration: underline;
        text-decoration-color: var(--color-attempt);
        text-decoration-thickness: 2px;
    }
    .blue-strike {
        text-decoration: line-through;
        text-decoration-color: var(--color-attempt);
        text-decoration-thickness: 2px;
    }
/* ===== ICONS ===== */
/* ====================================================================== */
    .alt-icon {
        margin-right: 4px;          /* –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–æ–π –∏ –ø–æ–ª–µ–º */
        font-size: 0.9em;
        vertical-align: middle;
        cursor: pointer;            /* –≤–∏–¥–Ω–æ, —á—Ç–æ –ø–æ –∏–∫–æ–Ω–∫–µ –º–æ–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å */
    }
    .gap-correct-icon {
        margin-right: 0px;        /* –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –≥–∞–ª–æ—á–∫–æ–π –∏ –ø–æ–ª–µ–º */
        font-size: 1em;
        vertical-align: text-top; /* –º–æ–∂–Ω–æ –ø–æ—Ç–æ–º –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å —Ä–æ–≤–Ω–µ–µ */
        color: var(--color-correct);
    }
    .gap-wrong-icon {
        margin-right: 4px;                   /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫—Ä–µ—Å—Ç–∏–∫–æ–º –∏ –ø–æ–ª–µ–º */
        font-size: 0.9em;                    /* —á—É—Ç—å –º–µ–Ω—å—à–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
        vertical-align: text-top;            /* –ø–æ–¥–Ω–∏–º–∞–µ–º –∏–∫–æ–Ω–∫—É –±–ª–∏–∂–µ –∫ –≤–µ—Ä—Ö–Ω–µ–º—É –∫—Ä–∞—é —Ç–µ–∫—Å—Ç–∞ */
        color: var(--color-wrong);                      /* —Ç–æ—Ç –∂–µ –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç, —á—Ç–æ –∏ —É –ª–∏–Ω–∏–∏ –ø–æ–¥ –ø–æ–ª–µ–º */
    }
    .gap-alt-popup {
        position: fixed;
        background: var(--color-grey-200);
        border: 1px solid var(--color-blackground);
        box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        border-radius: 0.5rem;
        padding: 4px 8px;
        font-size: 0.85rem;
        z-index: 2000;
        max-width: 260px;
        word-wrap: break-word;
        white-space: normal;
    }
    .aud-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: none;
        background: transparent;
        color: var(--color-grey-150);
        cursor: pointer;
        font-size: 1.05em;
        line-height: 1;
        padding: 0 .25em;
    }
    .aud-icon.playing { transform: scale(1.05); 
        color: var(--color-gradient-1);     /* —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ü–≤–µ—Ç */
        animation: color-1 var(--glow-duration) ease-in-out infinite;
    }
    
/* ====================================================== */
/* TEXT LAYOUTS */
/* ====================================================== */

/* ===== BLOCK: TEXT ===== */
/* ====================================================================== */
    .text-block { margin: 1.2em 0; }

/* ===== BLOCK: CHAPTER HEADER ===== */
.chapter-row{
    display: flex;
    align-items: center;      /* –ª–∏–Ω–∏—è –±—É–¥–µ—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É —Å—Ç—Ä–æ–∫–∏ */
    text-align: left;
    margin: 1.3em 0 1.0em 0;  /* –ø–æ–¥—Å—Ç—Ä–æ–π –ø–æ–¥ —Å–≤–æ–π —Ä–∏—Ç–º */
}

/* –æ–±—â–∏–π ‚Äú–ø–µ—Ä–µ–ª–∏–≤/—Å–≤–µ—á–µ–Ω–∏–µ‚Äù –∫–∞–∫ —É –Ω–æ–º–µ—Ä–∞/Count */
.chapter-glow{
    color: var(--color-gradient-1);
    animation: color-1 var(--glow-duration) ease-in-out infinite;
}

/* –∏–∫–æ–Ω–∫–∞ */
.chapter-icon-wrap{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;       /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ç–µ–∫—Å—Ç–∞ */
}
.chapter-icon{
    color: inherit;           /* –±–µ—Ä—ë–º —Ü–≤–µ—Ç –∏–∑ .chapter-glow */
    line-height: 1;
}

/* —Ç–µ–∫—Å—Ç –≥–ª–∞–≤—ã (–Ω–∞ —Ñ–æ–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –±–µ–∑ –∫–∞—Ä—Ç–æ—á–∫–∏) */
.chapter-text{
    font-size: 1.35rem;       /* –∏–ª–∏ —Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ */
    font-weight: 700;
    line-height: 1.2;
    word-break: break-word;
}

/* –ª–∏–Ω–∏—è —Å–ø—Ä–∞–≤–∞ –¥–æ –∫—Ä–∞—è */
.chapter-line{
    content: "";
    flex-grow: 1;
    height: 1px;
    min-width: 20px;
    margin-left: 16px;
    background: currentColor; /* —Å–≤–µ—Ç–∏—Ç—Å—è —Ç–µ–º –∂–µ —Ü–≤–µ—Ç–æ–º, —á—Ç–æ –∏ –∏–∫–æ–Ω–∫–∞ */
    border-radius: 999px;     /* —á—Ç–æ–±—ã –ª–∏–Ω–∏—è –±—ã–ª–∞ ‚Äú–º—è–≥—á–µ‚Äù –Ω–∞ –∫–æ–Ω—Ü–∞—Ö */
}

/* ===== BLOCK: DIALOGUE ===== */
/* ====================================================================== */
    .dialogue {
    margin: 1.2em 0;
    }
    .dialogue-line {
    display: grid;
    grid-template-columns: var(--speaker-col-w, 140px) 1fr;
    align-items: start;
    margin: 1.2em 0;
    }

    /* ‚úÖ –ü–æ–ª–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (–Ω–µ —Ä–µ–ø–ª–∏–∫–∏): –±–æ–ª–µ–µ ‚Äú–æ–±—ã—á–Ω—ã–π‚Äù –∏–Ω—Ç–µ—Ä–≤–∞–ª */
    .dialogue-line.full {
    margin: 0.35em 0;
    }

    /* ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–π ‚Äú–ø—É—Å—Ç–æ–π –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏‚Äù –≤–Ω—É—Ç—Ä–∏ DIALOGUE */
    .dialogue-spacer {
    height: 0.9em;   /* –º–æ–∂–Ω–æ 0.7em‚Äì1.0em –ø–æ –≤–∫—É—Å—É */
    }

    .dialogue-line.avatar-only {
    grid-template-columns: auto 1fr;
    }
    
    .dialogue-line.full .speech-col { grid-column: 1 / -1; } /* –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */

    .speaker-col {
    text-align: right;
    padding-right: 1em;
    }
    .speech-col { padding-left: 0; }

    .speaker-tag {
        display: inline-block;
        border-radius: var(--radius-md);           /* –æ–±—â–∏–π –ö–†–£–ü–ù–´–ô —Ä–∞–¥–∏—É—Å –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–µ–º—ã */
        background: var(--surface-bg);             /* –æ–±—â–∏–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ */
        box-shadow: var(--shadow-soft-md);         /* –º—è–≥–∫–∞—è –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        padding: 0px 10px;                          /* –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        font-size: 1rem;
    }

    /* –ï—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ –¥–∏–∞–ª–æ–≥–∞ —Ç–æ–ª—å–∫–æ –∞–≤–∞—Ç–∞—Ä –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ (center) ‚Äî
       —É–±–∏—Ä–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —É –ø–ª–∞—à–∫–∏ –∏ –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã –∫—Ä–∞—è —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å –∫—Ä–∞—è–º–∏ –∞–≤–∞—Ç–∞—Ä–∞ */
    .dialogue-line.avatar-only .speaker-tag {
        padding: 0;
        line-height: 0;
    }

    /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∞–≤–∞—Ç–∞—Ä –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—à–∫–∏ */
    .speaker-media.center {
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .speaker-tag-row { display: inline-flex; align-items: center; gap: .08em; }
    .speaker-tag.stack { flex-direction: column; gap: .08em; }   /* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å—Ç–µ–∫ –ø—Ä–∏ top/bottom */

    .speaker-media.left  { margin-right: .3em; display: inline-flex; align-items: center; }
    .speaker-media.right { margin-left:  .3em; display: inline-flex; align-items: center; }
    /* top/bottom –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—à–∫–∏ ‚Äî –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –æ—Ç—Å—Ç—É–ø–æ–≤, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å –≤—ã—Å–æ—Ç—É */
    .speaker-media.top.in-tag,
    .speaker-media.bottom.in-tag { display: block; margin: 0; }

/* ===== BLOCK: COLUMNS ===== */
/* ====================================================================== */
    .columns-block {
        --columns-block-my: 1.2em; /* —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å–µ—Ä–∏–∏ */
        display: grid;
        width: 100%;
        gap: var(--columns-gap, 2em);
        margin: var(--columns-block-my) 0;
        grid-template-columns: var(--cols-template, repeat(2, 1fr));
    }
    .column {
        box-sizing: border-box;
        padding: 0.5em;
        border: none;                 /* –±—ã–ª–æ border-left: 1px solid var(--color-grey-200); */ 
    }

    /* 2) –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É —Å–µ—Ä–∏—è–º–∏ ||  */
    .columns-block + .columns-block {
        position: relative;
    }
    .columns-block + .columns-block::before {
        content: "";
        position: absolute;
        left: 0;
        right: 0;

    /* –ª–∏–Ω–∏—è —Ä–æ–≤–Ω–æ –≤ ‚Äú—Å–µ—Ä–µ–¥–∏–Ω–µ‚Äù —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–∑–æ—Ä–∞,
       —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è */
    top: -0.6em; /* –ø–æ–ª–æ–≤–∏–Ω–∞ –æ—Ç margin: 1.2em —É .columns-block */

    border-top: var(--gap-border-bottom); /* ‚Üê —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π —Å—Ç–∏–ª—å, —á—Ç–æ —É GAP */
    height: 0;
    pointer-events: none;
    }

    @media (max-width: 768px) {
    .columns-block {
        grid-template-columns: 1fr;
        gap: 0.2em; /* –∫–∞–∫ —Ç—ã —É–∂–µ —Å—Ç–∞–≤–∏–ª–∞ */
    }

    /* 1) —É–±–∏—Ä–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ margin —É —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∫–æ–ª–æ–Ω–æ–∫ */
    .columns-block .column > :first-child { margin-top: 0 !important; }
    .columns-block .column > :last-child  { margin-bottom: 0 !important; }

    /* 2) –∫–ª—é—á–µ–≤–æ–µ: —É–±–∏—Ä–∞–µ–º ‚Äú–¥—ã—Ä–∫—É‚Äù –æ—Ç –ø–µ—Ä–≤–æ–≥–æ/–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ dialogue-line –≤–Ω—É—Ç—Ä–∏ –¥–∏–∞–ª–æ–≥–∞ */
    .columns-block .dialogue { margin: 0 !important; }
    .columns-block .dialogue-line:first-child { margin-top: 0 !important; }
    .columns-block .dialogue-line:last-child  { margin-bottom: 0 !important; }

    /* –æ–¥–Ω–∞ —Ä—É—á–∫–∞ */
    .columns-block {
        --series-gap-mobile: 2.8em;
    }

    /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Ä–∏—è–º–∏ (||) */
    .columns-block + .columns-block {
        margin-top: var(--series-gap-mobile);
    }

    /* —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Ä–æ–≤–Ω–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É —ç—Ç–æ–≥–æ –∑–∞–∑–æ—Ä–∞ */
    .columns-block + .columns-block::before {
        top: calc(-1 * var(--series-gap-mobile) / 2);
        border-top: var(--gap-border-bottom);
    }

    }
    
/* ===== BLOCK: TABLE ===== */
/* ====================================================================== */
    /* –°—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –≤ –¥—É—Ö–µ exercise-instruction */
        table.styled-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;  /* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∑–∞–∑–æ—Ä –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
            margin: 1em 0;
            font-family: Arial;
            font-size: 1rem;
            line-height: 1.2; 
            color: var(--neutral-text-color);
        }

        /* –û–±—â–∏–π –≤–∏–¥ —Å—Ç—Ä–æ–∫ (–∏ —à–∞–ø–∫–∏, –∏ —Ç–µ–ª–∞) –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        table.styled-table thead tr,
        table.styled-table tbody tr {
            background: var(--color-background);
            box-shadow: 0 22px 48px rgba(0,0,0,.24);
            border-radius: 12px;
        }

        table.styled-table th,
        table.styled-table td {
            border: none;
            padding: 10px 10px;
            font-size: 1rem;
            vertical-align: top;
            text-align: left;   /* ‚Üê –î–û–ë–ê–í–¨ –≠–¢–û */
        }

        /* header_row: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞-–∫–∞—Ä—Ç–æ—á–∫–∞ —á—É—Ç—å –±–æ–ª–µ–µ ¬´–∑–∞–≥–æ–ª–æ–≤–æ—á–Ω–∞—è¬ª */
        table.styled-table thead th {
            font-weight: 600;
            color: var(--neutral-text-color);
        }

        /* header_col: –ø–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü –≤ —Å—Ç—Ä–æ–∫–∞—Ö */
        table.styled-table tbody td.table-col-header {
            font-weight: 600;
            color: var(--neutral-text-color);
            white-space: nowrap;
        }

        /* –°–∫—Ä—É–≥–ª—è–µ–º —É–≥–ª—ã –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ —è—á–µ–π–∫–∞–º, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ */
        table.styled-table thead tr th:first-child,
        table.styled-table tbody tr td:first-child {
            border-top-left-radius: 12px;
            border-bottom-left-radius: 12px;
        }
        table.styled-table thead tr th:last-child,
        table.styled-table tbody tr td:last-child {
            border-top-right-radius: 12px;
            border-bottom-right-radius: 12px;
        }
        
        /* Table cell media */
        .tc-media { margin:.25em 0; }
        .tc-align-left   { text-align:left; }
        .tc-align-center { text-align:center; }
        .tc-align-right  { text-align:right; }

/* ===== INLINE ELEMENT: HEADING ===== */
/* ====================================================================== */
    .inline-heading {
        display: block;
        margin: 1.2em 0 0.6em 0;
        font-weight: 600;

        background: var(--surface-bg);       /* –∫–∞–∫ —É .exercise-instruction */
        border-radius: var(--radius-lg);     /* —Ç–æ—Ç –∂–µ –∫—Ä—É–ø–Ω—ã–π —Ä–∞–¥–∏—É—Å */
        box-shadow: var(--shadow-soft-lg);   /* –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å */
        padding: 10px 14px;                  /* –ø–æ—Ö–æ–∂–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
        word-break: break-word;
    }
    .inline-heading-lg {
        font-size: 1.5rem;
    }
    .inline-heading-md {
        font-size: 1.25rem;
    }

/* ===== INLINE ELEMENT: TOGGLE ===== */
/* ====================================================================== */
    /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä inline-toggle: –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏—á–∫–æ–º */
    details.toggle-block.inline-toggle {
        margin: 0.75rem 0;                       /* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –∑–∞–∑–æ—Ä –¥–æ/–ø–æ—Å–ª–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        padding: 0.5rem 0.8rem;                  /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã: —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –∏ –ø–æ –±–æ–∫–∞–º */
        border-radius: var(--radius-md);         /* –æ–±—â–∏–π —Å–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–π —É–≥–æ–ª —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ */
        background: var(--surface-bg);           /* –æ–±—â–∏–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ */
        box-shadow: var(--shadow-soft-md);       /* –º—è–≥–∫–∞—è –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å —Å—Ä–µ–¥–Ω–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∞ */
        max-width: 520px;                        /* –∫–∞—Ä—Ç–æ—á–∫–∞ —á—É—Ç—å —É–∂–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ */
        color: var(--color-grey-150);            /* –≤–µ—Å—å —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ ‚Äî –º—è–≥–∫–∏–π —Å–µ—Ä—ã–π */
        --toggle-icon-size: 1.25rem;
        --toggle-gap: 0.5rem;
    }

    /* –ó–∞–≥–æ–ª–æ–≤–æ–∫-—Ç—Ä–∏–≥–≥–µ—Ä: —Å—Ç—Ä–æ–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º */
    details.toggle-block.inline-toggle summary {
        cursor: pointer;                         /* –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–æ —Å—Ç—Ä–æ–∫–µ –º–æ–∂–Ω–æ –∫–ª–∏–∫–∞—Ç—å */
        list-style: none;                        /* —É–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Å–ø–∏—Å–∫–∞/summary */
        display: flex;                           /* –≤—ã—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –∏ —Ç–µ–∫—Å—Ç –≤ –æ–¥–Ω—É –ª–∏–Ω–∏—é */
        align-items: center;                     /* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ */
        gap: 0.5rem;                             /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º */
        font-weight: 400;                        /* –æ–±—ã—á–Ω—ã–π (–Ω–µ –∂–∏—Ä–Ω—ã–π) —Ç–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        color: inherit;                          /* –±–µ—Ä—ë–º —Ç–æ—Ç –∂–µ —Å–µ—Ä—ã–π, —á—Ç–æ –∏ —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        margin: 0;                               /* —É–±–∏—Ä–∞–µ–º –ª—é–±—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
        padding: 0.25rem 0;        /* –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –≤–æ–∫—Ä—É–≥ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ */
    }

    /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–∞—Ä–∫–µ—Ä <summary> –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö */
    details.toggle-block.inline-toggle summary::marker,
    details.toggle-block.inline-toggle summary::-webkit-details-marker {
        display: none;                           /* –ø—Ä—è—á–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–∞—Ä–∫–µ—Ä */
        content: "";                             /* –∏ –Ω–µ –≤—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ */
    }

    /* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ toggle */
    details.toggle-block.inline-toggle .toggle-content {
        margin-top: 0.5rem;                      /* –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –æ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        margin-left: 1.7rem;                      /* –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –æ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        font-size: 0.95rem;                      /* —á—É—Ç—å –º–µ–Ω—å—à–µ –±–∞–∑–æ–≤–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞ */
        color: inherit;                          /* —Ç–æ—Ç –∂–µ –º—è–≥–∫–∏–π —Å–µ—Ä—ã–π, —á—Ç–æ –∏ —É –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
    }

    /* UI-—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å–ª–µ–≤–∞: –∞–Ω–∏–º–∏—Ä—É–µ—Ç—Å—è —Ç–µ–º–∏ –∂–µ —Ü–≤–µ—Ç–∞–º–∏, —á—Ç–æ –Ω–æ–º–µ—Ä —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è */
    details.toggle-block.inline-toggle summary::before {
        content: "‚ñ∏";                            /* —Å–∞–º —Å–∏–º–≤–æ–ª —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ */
        font-size: var(--toggle-icon-size);      /* –∫—Ä—É–ø–Ω—ã–π, —á—Ç–æ–±—ã —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–ª—Å—è */
        line-height: 1;            /* –∫–ª—é—á–µ–≤–æ–µ: —É–±–∏—Ä–∞–µ—Ç –ª–∏—à–Ω—é—é ‚Äú–≤—ã—Å–æ—Ç—É‚Äù —Å—Ç—Ä–æ–∫–∏ –∏–∑-–∑–∞ –∑–Ω–∞—á–∫–∞ */
        display: inline-block;
        width: var(--toggle-icon-size);  /* –¥–µ–ª–∞–µ—Ç —à–∏—Ä–∏–Ω—É –º–∞—Ä–∫–µ—Ä–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π */
        text-align: center;
        color: var(--color-gradient-1);          /* —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ü–≤–µ—Ç ‚Äî —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
        animation: color-1 var(--glow-duration) ease-in-out infinite;
                                                  /* —Ç–∞ –∂–µ —Ü–≤–µ—Ç–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è, —á—Ç–æ —É –Ω–æ–º–µ—Ä–∞ */
        transition: transform 0.15s ease;        /* –ø–ª–∞–≤–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏ */
    }

    /* –ü–æ–≤–µ—Ä–Ω—É—Ç—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –≤–ø—Ä–∞–≤–æ, –∫–æ–≥–¥–∞ toggle —Ä–∞—Å–∫—Ä—ã—Ç */
    details.toggle-block.inline-toggle[open] summary::before {
        transform: rotate(90deg);                /* ¬´—Å—Ç—Ä–µ–ª–∫–∞¬ª —Å–º–æ—Ç—Ä–∏—Ç –≤–ø—Ä–∞–≤–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ */
    }

/* ===== INLINE ELEMENT: CALLOUT ===== */
/* ====================================================================== */
    /* CALLOUT: <aside>‚Ä¶</aside> ‚Äî –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ —Å–≤–µ—Ç—è—â–∏–º–∏—Å—è –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ glow —Å–Ω–∏–∑—É */
    aside {
        position: relative;                         /* –Ω—É–∂–µ–Ω –∏ –¥–ª—è –≥—Ä–∞–Ω–∏—Ü—ã, –∏ –¥–ª—è glow (::before) */
        width: 85%;                                 /* —à–∏—Ä–∏–Ω–∞ callout ‚Äî 85% –æ—Ç —à–∏—Ä–∏–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        margin: 0.75rem auto;                       /* —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É ‚Äî –æ—Ç—Å—Ç—É–ø, –ø–æ –±–æ–∫–∞–º auto = —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º */
        padding: 0.75rem 1rem;                       /* –≤–µ—Ä—Ö/–Ω–∏–∑ –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –ª–µ–≤—ã–π/–ø—Ä–∞–≤—ã–π –æ–¥–∏–Ω–∞–∫–æ–≤–æ */

        border-radius: var(--radius-md);            /* –æ–±—â–∏–π —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–¥–∏—É—Å —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è */
        background: var(--surface-bg);              /* –æ–±—â–∏–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ */

        /* color –∏ border + –∞–Ω–∏–º–∞—Ü–∏—è - –≤ GLOBAL GLOW BORDERS PRESET */
        box-shadow: var(--shadow-soft-md);          /* –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å */
    }

    /* –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ glow –¥–ª—è CALLOUT */
    /* –û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ::before - –≤ GLOBAL UNDER-GLOW PRESET */
    aside::before {
        bottom: -4px;        /* glow —Å–∏–¥–∏—Ç –ø–æ—á—Ç–∏ –≤–ø–ª–æ—Ç–Ω—É—é –ø–æ–¥ –Ω–∏–∂–Ω–∏–º –∫—Ä–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ */
        filter: blur(22px);  /* —Å–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ ‚Äî –æ—á–µ–Ω—å –º—è–≥–∫–∏–π, —Ä–∞—Å—Å–µ—è–Ω–Ω—ã–π —Å–≤–µ—Ç */
    }
    
/* ====================================================== */
/* MULTIMEDIA */
/* ====================================================== */

/* ===== BLOCK: QUIZLET EMBED ===== */
/* ====================================================================== */
    .quizlet-embed {
        position: relative;
        margin: 1.5rem auto;
        max-width: 960px;
        width: 100%;
    }
    .quizlet-embed-inner {
        position: relative;
        width: 100%;
        padding-top: 70%; /* 16:9 */
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-soft-md);
        overflow: hidden;
        background: var(--surface-bg);
    }
    .quizlet-embed-inner iframe {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        border: 0;
        border-radius: inherit;
    }

/* ===== UNIVERSAL MEDIA (u-*) ===== */
/* ====================================================================== */
    .u-media {
        display: inline-block;
        vertical-align: middle;
        margin: 0.1rem 0.6rem 0.2rem 0;
    }
    .u-align-left   { text-align: left; }
    .u-align-center { text-align: center; }
    .u-align-right  { text-align: right; }
    .u-float { margin: .25rem 1rem .75rem 0; }
    .u-float.u-float-right { float: right; margin: .25rem 0 .75rem 1rem; }
    .u-float.u-float-left  { float: left; }

    /* clearfix –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ */
    .text-block::after,
    .highlight-text::after,
    .box-text::after,
    details.toggle-block::after { content: ""; display: block; clear: both; }

/* Auto-clear for non-floated media so align works after floats */
    .u-media,
    .gap-media,
    .mcq-media,
    .dlg-media { clear: both; }

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ–¥–∏–∞ –≤ —Ä–µ–ø–ª–∏–∫–µ (context=dialogue-speech) */
    .dlg-media { margin: .5em 0; }
    .dlg-align-left   { text-align: left; }
    .dlg-align-center { text-align: center; }
    .dlg-align-right  { text-align: right; }

    /* Floats */
    .dlg-float { margin: .25rem 1rem .75rem 0; }      /* –±–∞–∑–æ–≤—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è float-left */
    .dlg-float.dlg-float-left  { float: left; }
    .dlg-float.dlg-float-right { float: right; margin: .25rem 0 .75rem 1rem; }

    /* Clearfix, —á—Ç–æ–±—ã float –Ω–µ –Ω–∞–µ–∑–∂–∞–ª–∏ –Ω–∞ –Ω–∏–∂–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ */
    .dialogue-line::after,
    .speech-col::after { content: ""; display: block; clear: both; }

/* ====================================================== */
/* COMMON INDEPENDENT ELEMENTS */
/* ====================================================== */

/* ===== EXERCISE BLOCK SPACING (only for exercises) ===== */
:root{
    --exercise-space-before: 60px;   /* –±—ã–ª–æ ~125px -> –¥–µ–ª–∞–µ–º –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –ø–æ–ª–æ–≤–∏–Ω—É */
    --exercise-space-after: 110px;   /* –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–º–µ—Ç–Ω—ã–π "–ø–æ—Å–ª–µ" */
}

/* –í–ê–ñ–ù–û: —Ç–æ–ª—å–∫–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –ù–ï —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ */
.gap-block,
.mcq-block,
.mcqgap-block,
.mcqgaps-block,
.matchimg-block,
.click-block,
.qtext-block,
.free-block{
    margin: 0; /* —á—Ç–æ–±—ã –Ω–µ —Å—É–º–º–∏—Ä–æ–≤–∞–ª–æ—Å—å —Å–æ —Å—Ç–∞—Ä—ã–º margin —É .mcq-block */
    padding-top: var(--exercise-space-before);
    padding-bottom: var(--exercise-space-after);
}


/* ===== EXERCISE ELEMENT: HEADER ===== */
/* ====================================================================== */
    .exercise-header {
        display: flex;
        align-items: flex-start;   /* –í—ã—Ä–æ–≤–Ω—è—Ç—å –ø–æ –≤–µ—Ä—Ö—É */
        gap: 14px;             /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏ */
        margin: 0 0 1em 0;
    }

/* ===== EXERCISE ELEMENT: NUMBER ===== */
/* ====================================================================== */
    .exercise-number {
        position: relative;                        /* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ü–∏—Ñ—Ä—ã –∏ glow-–ø–æ–¥—Å–≤–µ—Ç–∫–∏ (::before –ø–æ–¥ –Ω–∏–º) */
        height: 56px;                              /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–∞ */
        min-width: 25px;                           /* –Ω–µ –¥–∞—ë–º –±–ª–æ–∫—É —Å—Ö–ª–æ–ø–Ω—É—Ç—å—Å—è –ø–æ —à–∏—Ä–∏–Ω–µ –ø—Ä–∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã—Ö —á–∏—Å–ª–∞—Ö */
        display: flex;                             /* –≤–∫–ª—é—á–∞–µ–º —Ñ–ª–µ–∫—Å-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        align-items: center;                       /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ü–∏—Ñ—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
        justify-content: center;                   /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ü–∏—Ñ—Ä—É –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
        padding: 0 18px;                           /* –Ω–µ–º–Ω–æ–≥–æ –≤–æ–∑–¥—É—Ö–∞ –ø–æ –±–æ–∫–∞–º –≤–æ–∫—Ä—É–≥ —Ü–∏—Ñ—Ä—ã */

        border-radius: var(--radius-lg);           /* –æ–±—â–∏–π –ö–†–£–ü–ù–´–ô —Ä–∞–¥–∏—É—Å –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ç–µ–º—ã */
        background: var(--surface-bg);             /* –æ–±—â–∏–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ */
        box-shadow: var(--shadow-soft-md);         /* –º—è–≥–∫–∞—è –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */

        font-size: 1.8rem;                         /* –∫—Ä—É–ø–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ü–∏—Ñ—Ä—ã */
        font-weight: 600;                          /* –ø–æ–ª—É–∂–∏—Ä–Ω–æ–µ –Ω–∞—á–µ—Ä—Ç–∞–Ω–∏–µ –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–∞ */
        color: var(--color-gradient-1);            /* –±–∞–∑–æ–≤—ã–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ü–≤–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ */

        
        /* —Ü–≤–µ—Ç —Ü–∏—Ñ—Ä—ã ¬´–¥—ã—à–∏—Ç¬ª –ø–æ —Å—Ö–µ–º–µ color-1 (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π ‚Üí –º—è—Ç–Ω—ã–π ‚Üí —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π) */
        animation: color-1 var(--glow-duration) ease-in-out infinite;
    }

    /* –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–¥ –Ω–æ–º–µ—Ä–æ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (—Ü–≤–µ—Ç–Ω–æ–π glow) */
    .exercise-number::before {
        content: "";
        position: absolute;
        inset: 0;                                  /* –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç —Ä–∞—Å—Ç—è–Ω—É—Ç –ø–æ –≤—Å–µ–º—É –±–ª–æ–∫—É */
        margin: auto;
        border-radius: inherit;                    /* —Ç–æ –∂–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ, —á—Ç–æ –∏ —É —Å–∞–º–æ–≥–æ –±–ª–æ–∫–∞ */
        pointer-events: none;                      /* –Ω–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫–∏ */
        z-index: -1;                               /* —É—Ö–æ–¥–∏—Ç –ø–æ–¥ –±–µ–ª—ã–π/—Å–µ—Ä—ã–π –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ —Å —Ü–∏—Ñ—Ä–æ–π */

        transform: translateY(10px) scale(1.7);    /* —Å–º–µ—â–∞–µ–º glow –≤–Ω–∏–∑ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º –≤–æ–∫—Ä—É–≥ –±–ª–æ–∫–∞ */
        filter: blur(22px);                        /* —Å–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º—ã—Ç–∏–µ ‚Äî –º—è–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –±–µ–∑ —Ä–µ–∑–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü */

        background: var(--glow-gradient);          /* –æ–±—â–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π‚Üî–º—è—Ç–Ω—ã–π) */
        background-size: var(--glow-bg-size);      /* —Ä–∞–∑–º–µ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è */
        animation: glow var(--glow-duration) ease-in-out infinite;  /* –∞–Ω–∏–º–∞—Ü–∏—è ¬´—Ç–µ–∫—É—â–µ–π¬ª –ø–æ–¥—Å–≤–µ—Ç–∫–∏ */
    }

/* ===== EXERCISE ELEMENT: INSTRUCTION ===== */
/* ====================================================================== */
    .exercise-instruction {
        flex: 1;                                /* —Ç—è–Ω–µ—Ç—Å—è –Ω–∞ –æ—Å—Ç–∞—Ç–æ–∫ —à–∏—Ä–∏–Ω—ã */
        background: var(--surface-bg);          /* –æ–±—â–∏–π —Ñ–æ–Ω */
        border-radius: var(--radius-lg);        /* –∫—Ä—É–ø–Ω—ã–π —Ä–∞–¥–∏—É—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö –±–ª–æ–∫–æ–≤ */
        box-shadow: var(--shadow-soft-lg);      /* –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å */
        padding: 12px 16px;                     /* –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        font-size: 1rem;
        line-height: 1.35;                      /* –Ω–∏–∂–µ = –ø–ª–æ—Ç–Ω–µ–µ —Ç–µ–∫—Å—Ç */
        word-break: break-word;
    }

/* ===== EXERCISE ELEMENT: ANSWER ===== */
/* ====================================================================== */
    .example-answer {
        color: var(--answer-attempt-color);
        font-style: italic;
        padding: 0.2ch 0.5ch;
        border-radius: var(--radius-sm);    /* –æ–±—â–∏–π –º–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–¥–∏—É—Å */
        box-shadow: var(--shadow-soft-md);
    }

/* ====================================================== */
/* ANSWER TYPES COMMON PARAMETERS */
/* ====================================================== */

/* ===== UNIFIED ANSWER STATES ===== */
/* ====================================================================== */
    /* –ë–ê–ó–û–í–´–ô –í–ò–î */
    .answer {                              /* –±–∞–∑–æ–≤—ã–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –≤–∏–¥ */
        color: var(--color-grey-150);   /* —Ü–≤–µ—Ç –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ (–µ—â—ë –Ω–µ –∑–Ω–∞–µ–º, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ –Ω–µ—Ç) */
        background: transparent;            /* —Ñ–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π */
        border-radius: 0;                   /* –±–µ–∑ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è, –∫–∞–∫ —É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ GAP */
        transition:
            border-color 0.25s ease,        /* –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ª–∏–Ω–∏–∏ (–¥–ª—è wrong/correct) */
            color 0.25s ease;               /* –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ */
    }

    /* –°–æ—Å—Ç–æ—è–Ω–∏–µ ATTEMPT ‚Äî –∫–æ–≥–¥–∞ —É—á–µ–Ω–∏–∫ —Å–¥–µ–ª–∞–ª –ø–æ–ø—ã—Ç–∫—É (–Ω–∞–ø–∏—Å–∞–ª/–≤—ã–±—Ä–∞–ª –æ—Ç–≤–µ—Ç), –Ω–æ –µ—â—ë –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª */
    .answer.answer-attempt {               /* –¥–æ–±–∞–≤–ª—è–µ–º —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ JS */
        font-style: italic;                 /* –∫—É—Ä—Å–∏–≤–æ–º */
        color: var(--answer-attempt-color); /* —Ü–≤–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ */
    }

    /* –°–æ—Å—Ç–æ—è–Ω–∏–µ CORRECT ‚Äî –ü–†–ò –ü–†–û–í–ï–†–ö–ï: –í–ï–†–ù–û */
    .ans[data-state="correct"] .answer {
        font-style: italic;                 /* –∫—É—Ä—Å–∏–≤–æ–º */
        color: var(--answer-correct-color); /* –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π */
        text-decoration: none;              /* –±–µ–∑ –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è */
    }

    /* –°–æ—Å—Ç–æ—è–Ω–∏–µ WRONG ‚Äî –ü–†–ò –ü–†–û–í–ï–†–ö–ï: –û–®–ò–ë–û–ß–ù–û */
    .ans[data-state="wrong"] .answer:not(.answer-revealed) {
        font-style: italic;                 /* –∫—É—Ä—Å–∏–≤–æ–º */
        color: var(--answer-wrong-color);   /* —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏ (–ø–æ–∫–∞ = attempt) */
        text-decoration: line-through;      /* –∑–∞—á—ë—Ä–∫–∏–≤–∞–µ–º –Ω–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç */
        text-decoration-color: var(--color-wrong);
        text-decoration-thickness: 1px;

    }

    /* –°–æ—Å—Ç–æ—è–Ω–∏–µ REVEALED  */
    .answer-revealed {
        font-style: italic;                 /* –∫—É—Ä—Å–∏–≤–æ–º */
        margin-left: 4px;                   /* –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞ */
        color: var(--answer-correct-color); /* –¶–≤–µ—Ç –∫–∞–∫ —É CORRECT */
        font-style: italic;                 /* –ö—É—Ä—Å–∏–≤ ‚Äî —ç—Ç–æ –≤—Å—ë-—Ç–∞–∫–∏ ¬´–æ—Ç–≤–µ—Ç¬ª */
        text-decoration: none;              /* –ë–µ–∑ –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è ‚Äî —ç—Ç–æ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç */
        white-space: normal;                /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –¥–ª–∏–Ω–Ω—ã–π */
    }
/* ====================================================== */
/* ANSWER TYPE: INPUT specific parameters */
/* ====================================================== */

/* ===== ANSWER TYPE: INPUT specific parameters ===== */
/* ====================================================================== */
    /* INPUT –ë–ê–ó–û–í–´–ô –í–ò–î: –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—â–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º .answer*/
    input.gap.answer {
        font-family: inherit;                   /* –±–µ—Ä—ë–º —Ç–æ—Ç –∂–µ —à—Ä–∏—Ñ—Ç, —á—Ç–æ –∏ —É body */
        font-style: italic;                     /* –∫—É—Ä—Å–∏–≤–æ–º */
        display: inline-block;                  /* –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ ¬´–ø–ª–∞—à–∫–∞¬ª –≤ —Å—Ç—Ä–æ–∫–µ */
        min-width: 0ch;                         /* –Ω–µ –¥–∞—ë–º –ø–æ–ª—é –≤–µ—Å—Ç–∏ —Å–µ–±—è —Å—Ç—Ä–∞–Ω–Ω–æ –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–º */
        padding: 0 0.5ch;                       /* –Ω–µ–±–æ–ª—å—à–æ–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –æ—Ç –ª–∏–Ω–∏–∏ */
        border: none;                           /* —É–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ä–∞–º–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ */
        border-bottom: var(--gap-border-bottom);/* –Ω–∞—à–∞ –ª–∏–Ω–∏—è GAP ‚Äî —É–∂–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞ */
        box-shadow: none;                       /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ —Ç–µ–Ω–µ–π */
        outline: none;                          /* —É–±–∏—Ä–∞–µ–º —Å–∏–Ω—é—é –æ–±–≤–æ–¥–∫—É, –ø–æ–ª–∞–≥–∞–µ–º—Å—è –Ω–∞ glow */
    }
    
    /* INPUT GLOW: –ú—è–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ, –ø–æ–∫–∞ –æ—Ç–≤–µ—Ç –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π/–ø–æ–∫–∞–∑–∞–Ω–Ω—ã–π */
    .ans:not([data-state="correct"]):not([data-state="corrected"]):not([data-state="revealed"]) input.gap.answer:focus {
        outline: none;
        animation: glow-shadow-soft var(--glow-duration) ease-in-out infinite;
    }

    /* INPUT GLOW: –î–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö / –ø–æ–∫–∞–∑–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ glow –æ—Ç–∫–ª—é—á–∞–µ–º (–Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∏—Ö —Å—Ç–∏–ª—å –ø–æ data-state) */
    .ans[data-state="correct"] input.gap.answer:focus,
    .ans[data-state="corrected"] input.gap.answer:focus,
    .ans[data-state="revealed"] input.gap.answer:focus {
        outline: none;
        animation: none;
    }

/* ===== ANSWER TYPE: SPEECH INPUT (GAP + mic) ===== */
/* ====================================================================== */
    .speech-input-wrapper {
        display: inline-flex;
        align-items: center;
        gap: 0.1rem; /* –º–∞–ª–µ–Ω—å–∫–∏–π –∑–∞–∑–æ—Ä –º–µ–∂–¥—É –∫—Ä—É–∂–∫–æ–º –∏ –ø–æ–ª–µ–º */
    }

    .speech-mic-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: none;
        background: transparent;
        color: var(--color-grey-150);
        cursor: pointer;
        font-size: 1.05em;      /* –∫–∞–∫ .aud-icon */
        line-height: 1;
        padding: 0 .25em;       /* –∫–∞–∫ .aud-icon */
        margin-right: 0;        /* –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å ‚Äî –º–æ–∂–Ω–æ —á—É—Ç—å –ø–æ–¥–≤–∏–Ω—É—Ç—å –æ—Ç –ø–æ–¥–ø–∏—Å–∏/–Ω–æ–º–µ—Ä–∞ */
    }

    .speech-mic-btn .material-symbols-outlined {
        /* –º–æ–∂–µ–º –æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–Ω –±–µ—Ä—ë—Ç—Å—è –∏–∑ .material-symbols-outlined */
        font-size: 1em;         /* –∏–∫–æ–Ω–∫–∞ –Ω–µ –±–æ–ª—å—à–µ, —á–µ–º —Ç–µ–∫—Å—Ç */
    }

    .speech-mic-btn.speech-recording {
        transform: scale(1.05);
        color: var(--color-gradient-1);
        animation: color-1 var(--glow-duration) ease-in-out infinite;
    }

    input.gap.speech-waiting {
        border-bottom-style: dotted;
    }

/* ===== ANSWER TYPE: PLUG-GAP specific parameters ===== */
/* ====================================================================== */
/* ===== MCQGAP & MCQGAPS: –ø—Å–µ–≤–¥–æ–ø–æ–ª—è ===== */
/* ====================================================================== */
    .plug-gap {                                      /* –ø–æ–ª–µ, –≤ –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è */
        display: inline-block;                        /* –∫–∞–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±–ª–æ–∫ –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ —Ç–µ–∫—Å—Ç–∞ */
        min-width: 3ch;                               /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –ø–æ–ª—è (–ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–¥ 4 —Å–∏–º–≤–æ–ª–∞) */
        padding: 0 0.5ch 0 0.5ch;                     /* –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞, –±–µ–∑ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ */
        background: transparent;                      /* —Ñ–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π, –∫–∞–∫ —É –æ–±—ã—á–Ω–æ–≥–æ GAP */
        border-radius: 0px;                           /* –±–µ–∑ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è, ¬´–ø–ª–æ—Å–∫–æ–µ¬ª –ø–æ–ª–µ –∫–∞–∫ —É GAP */
        border-bottom: var(--gap-border-bottom);      /* –ª–∏–Ω–∏—è —Å–Ω–∏–∑—É —Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ —É –æ–±—ã—á–Ω—ã—Ö GAP-–ø–æ–ª–µ–π */
        line-height: 1;                               /* –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –∑–∞–∑–æ—Ä–∞ —Å–Ω–∏–∑—É */
        font-style: italic;                           /* –∫—É—Ä—Å–∏–≤ ‚Äî —á—Ç–æ–±—ã –ø–æ–ª–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–ª–æ—Å—å –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
        color: var(--answer-text-color);              /* —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∫–∞–∫ —É –æ—Ç–≤–µ—Ç–æ–≤ –≤ GAP (–µ–¥–∏–Ω—ã–π –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤) */
        vertical-align: baseline;                     /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ */
        white-space: nowrap;                          /* –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ø–æ–ª–µ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–æ–∫—É */
        transition:                                   
            border-color 0.25s ease,                  /* –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ª–∏–Ω–∏–∏ —Å–Ω–∏–∑—É (–Ω–∞ –±—É–¥—É—â–µ–µ) */
            color 0.25s ease;                         /* –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ */
    }

/* ===== ANSWER TYPE: INPUT-PLUG-GAP specific parameters (from pool ‚Üí into input) ===== */
/* ====================================================================== */
    input.gap.input-plug-gap {
        display: inline-block;                /* –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –º–∞–ª–µ–Ω—å–∫–∏–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –≤ —Å—Ç—Ä–æ–∫–µ */
        min-width: 0ch;                       /* –Ω–µ —Å–∂–∏–º–∞–µ—Ç—Å—è –º–µ–Ω—å—à–µ 6 —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ —à–∏—Ä–∏–Ω–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—É—Å—Ç–æ–π */
        padding: 0 0.5ch 0 0.5ch;                       /* –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ —Ç–µ–∫—Å—Ç–∞; –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ ‚Äî –≤–ø–ª–æ—Ç–Ω—É—é –∫ –ª–∏–Ω–∏–∏ -- –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏–ª–∞ –Ω–∞ padding: 0 –¥–ª—è input.gap.input-plug-gap. –ü–æ—Ç–æ–º, –∫–æ–≥–¥–∞ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –∏ –ø–æ—á–∏–Ω–∏–º, —è —Å–º–æ–≥—É –≤–µ—Ä—É–Ω—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç padding: 0 0.5ch*/
        background: transparent;              /* —Ñ–æ–Ω —Å–∞–º–æ–≥–æ –ø–æ–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π (–≤–∏–¥–Ω–æ —Ñ–æ–Ω —Å—Ç—Ä–æ–∫–∏/–∫–∞—Ä—Ç–æ—á–∫–∏) */
        border-bottom: var(--gap-border-bottom);
        line-height: 1;                       /* –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ = –≤—ã—Å–æ—Ç–∞ —Ç–µ–∫—Å—Ç–∞, –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ –≤–æ–∑–¥—É—Ö–∞ —Å–Ω–∏–∑—É */
        font-style: italic;                   /* –∫—É—Ä—Å–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª—è */
        font-family: inherit;
        color: var(--answer-text-color);
        vertical-align: baseline;             /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –≤ —Å—Ç—Ä–æ–∫–µ */
        white-space: nowrap;                  /* –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –ø–æ–ª—è */
    }
    input.gap.input-plug-gap:focus {
        outline: none !important;             /* —É–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å–∏–Ω—é—é –æ–±–≤–æ–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ */
        box-shadow: none !important;          /* –∏ –ª—é–±—ã–µ —Ç–µ–Ω–∏/–ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—à—É –ª–∏–Ω–∏—é */
    }
    
/* ===== ANSWER TYPE: CLICK specific parameters ===== */
/* ====================================================================== */
    .click-option {
        cursor: pointer;
        padding: 2px 1ch;
        border-radius: 4px;
        background-color: transparent;                 /* –¥–æ –∫–ª–∏–∫–∞ —Ñ–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π */
        transition:
            background-color 0.2s ease,
            box-shadow 0.2s ease;
    }
    .click-option:hover {
        background-color: var(--color-background);      /* –ª—ë–≥–∫–∏–π hover; –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å, –µ—Å–ª–∏ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è */
        box-shadow: var(--shadow-soft-md);
    }
    .click-option.selected,
    .click-option.opt-revealed {
        background-color: var(--color-background);     /* –∫–ª–∏–∫–Ω—É—Ç–∞—è –∏–ª–∏ —Ä–∞—Å–∫—Ä—ã—Ç–∞—è –æ–ø—Ü–∏—è */
        box-shadow: var(--shadow-soft-md);
    }

    /* ‚úÖ multi-click: –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –Ω–∞ CHECK */
    .click-option.click-correct .click-content {
        font-style: italic;
        color: var(--answer-correct-color);
        text-decoration: none;
    }
    .click-option.click-wrong .click-content {
        font-style: italic;
        color: var(--answer-wrong-color);
        /* –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ –¥–µ–ª–∞–µ—Ç—Å—è –æ–±—â–∏–º –ø—Ä–∞–≤–∏–ª–æ–º:
           .ans[data-state="wrong"] .answer:not(.answer-revealed) */
    }

/* ====================================================== */
/* EXERCISE BLOCKS */
/* ====================================================== */

/* ===== BLOCK: GAP ===== */
/* ====================================================================== */
    /* –û—Å–Ω–æ–≤–Ω–∞—è –∑–æ–Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è: —Ç–µ–∫—Å—Ç + –ø—É–ª —Å–ø—Ä–∞–≤–∞ –∏–ª–∏ —Å–≤–µ—Ä—Ö—É */
    .gap-block .exercise-main {
        margin-top: 0.25em;
    }

    .gap-block .exercise-main.pool-pos-top {
        display: block;
    }

    .gap-block .exercise-main.pool-pos-right {
        display: flex;
        align-items: flex-start;    /* –∫–æ–ª–æ–Ω–∫–∏ –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã –ø–æ –≤–µ—Ä—Ö–Ω–µ–º—É –∫—Ä–∞—é */
        gap: 1rem;                  /* –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏, –Ω–∞ —à–∏—Ä–∏–Ω—É –Ω–µ –≤–ª–∏—è–µ—Ç */
    }

    .gap-block .exercise-main-body {
        flex: 1 1 0;             /* ¬´–∑–∞–Ω–∏–º–∞–π –≤—Å—ë –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ¬ª, –ø–æ—ç—Ç–æ–º—É –µ—ë –¥–æ–ª—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, —Å–∫–æ–ª—å–∫–æ –º—ã –æ—Ç–∫—É—Å–∏–ª–∏ —É –ø—Ä–∞–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏. */
        min-width: 0;
    }

    /* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Å –ø—É–ª–æ–º: —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Ä–∞–∑—É–º–Ω—É—é —à–∏—Ä–∏–Ω—É –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö */
    .gap-block .exercise-main-pool {
        flex: 0 0 var(--pool-width, 32%);             /* –ü–ï–†–í–ê–Ø —Ü–∏—Ñ—Ä–∞, –∫–æ—Ç–æ—Ä—É—é —Å—Ç–æ–∏—Ç –∫—Ä—É—Ç–∏—Ç—å ‚Äî —ç—Ç–æ —Ç—Ä–µ—Ç—å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ flex: 0 0 32% (flex-basis = 32%) */
        max-width: var(--pool-width, 32%);            /* ¬´–Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è —à–∏—Ä–µ 40% –±–ª–æ–∫–∞¬ª */
        padding-top: 2rem;                            /* –≤–µ—Ä—Ö–Ω–∏–π –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã –≤—ã—Ä–æ–≤–Ω—è—Ç—å –≤–µ—Ä—Ö –ø—É–ª–∞ —Å —Ç–µ–∫—Å—Ç–æ–º */
    }

    /* –ü—É–ª –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–æ–Ω–∫–∏: –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø—É–ª, –Ω–æ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –æ—Ç—Å—Ç—É–ø–æ–≤ */
    .gap-block .exercise-main-pool .pool {
        margin-top: 0;
    }

    /* –ù–ï –∑–∞–¥–∞—ë–º flex-basis –¥–ª—è .pool-element ‚Äî –ø–ª–∞—à–∫–∏ –ø–æ —Ä–∞–∑–º–µ—Ä—É —Ç–µ–∫—Å—Ç–∞ */

    @media (max-width: 350px) {
        .gap-block .exercise-main.pool-pos-right {
            flex-direction: column;   /* –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø—É–ª –ø–æ–¥ —Ç–µ–∫—Å—Ç–æ–º */
        }
        .gap-block .exercise-main-pool {
            flex: 0 0 auto;
            max-width: 100%;
        }
    }

/* ===== BLOCK: Q_TEXT ===== */
/* ====================================================================== */
    .qtext-block {
        margin: 0.8em 0 1.4em;
    }

/* ===== BLOCK: TEXTAREA ===== */
/* ====================================================================== */
    /* –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –ø–æ–ª–µ –æ—Ç–≤–µ—Ç–∞, –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–æ–µ –∫–∞–∫ –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (–∫–∞–∫ callout, –Ω–æ –±–µ–∑ glow) */
    textarea.gap {
        width: 85%;                               /* –∫–∞–∫ —É callout: —É–∂–µ —Ç–µ–∫—Å—Ç–∞, –Ω–æ –Ω–µ —É–∑–∫–∞—è –ø–æ–ª–æ—Å–∫–∞ */
        margin: 0.75rem auto;                     /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –±–ª–æ–∫ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */

        display: block;                           /* —á—Ç–æ–±—ã width + margin: auto —Ä–∞–±–æ—Ç–∞–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ */

        font-size: 1rem;                          /* —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ textarea */
        line-height: 1.4;                         /* –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
        font-family: inherit;                     /* —Ç–æ—Ç –∂–µ —à—Ä–∏—Ñ—Ç, —á—Ç–æ –∏ —É —Å—Ç—Ä–∞–Ω–∏—Ü—ã */

        background-color: var(--surface-bg);      /* –æ–±—â–∏–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ */
        color: var(--neutral-text-color);         /* —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ ‚Äî —Ç—ë–º–Ω—ã–π, –∫–∞–∫ –≤ –æ—Å—Ç–∞–ª—å–Ω–æ–º —Ç–µ–∫—Å—Ç–µ */

        border: none;                             /* —É–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ä–∞–º–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ */
        border-radius: var(--radius-md);          /* —Ç–∞–∫–æ–π –∂–µ —Ä–∞–¥–∏—É—Å, –∫–∞–∫ —É callout –∏ –¥—Ä—É–≥–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
        box-shadow: var(--shadow-soft-md);        /* –º—è–≥–∫–∞—è –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å, –∫–∞–∫ —É callout */

        padding: 0.6rem 0.8rem;                   /* –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
        box-sizing: border-box;                   /* —à–∏—Ä–∏–Ω–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç padding, –Ω–µ –≤—ã–ª–µ–∑–∞–µ—Ç –∑–∞ 85% */

        resize: vertical;                         /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        outline: none;                            /* –±–µ–∑ —Å–∏–Ω–µ–π –æ–±–≤–æ–¥–∫–∏ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ (–Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ) */

        transition:
            box-shadow 0.2s ease,
            transform 0.1s ease;
    }

    /* –ü–†–ò –ù–ê–ñ–ê–¢–ò–ò: –ù–µ–±–æ–ª—å—à–æ–π ¬´–ø–æ–¥—ä—ë–º¬ª, —á—Ç–æ–±—ã –ø–æ—Ö–æ–¥–∏–ª–æ –Ω–∞ –Ω–∞–∂–∏–º–∞–µ–º—É—é –∫–∞—Ä—Ç–æ—á–∫—É */
    textarea.gap:focus {
        transform: translateY(-1px);
        box-shadow: var(--shadow-soft-lg);
    }

/* ===== BLOCK: MATCHIMG ===== */
/* ====================================================================== */
    .matchimg-block {
        margin: 2em 0;
    }
    .matchimg-images {
        display: flex;
        flex-wrap: wrap;
        gap: 1em;
        justify-content: center;
        align-items: flex-start;
    }
    .matchimg-img {
        /* –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ / —Ä–∞—Å–∫–ª–∞–¥–∫–∞ */
        display: flex;
        flex-direction: column;
        align-items: stretch;
        justify-content: flex-start;
        position: relative;
        flex: 0 1 auto;         /* flex: 1 1 auto = grow=1, shrink=1, basis=auto = –≠–ª–∞—Å—Ç–∏—á–Ω—ã–π: –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∫–æ–Ω—Ç–µ–Ω—Ç, –º–æ–∂–µ—Ç –∏ —Ä–∞—Å—Ç–∏, –∏ —Å–∂–∏–º–∞—Ç—å—Å—è. –î–µ–ª–∏—Ç –ª–∏—à–Ω–µ–µ –º–µ—Å—Ç–æ –ø–æ—Ä–æ–≤–Ω—É —Å —Å–æ—Å–µ–¥—è–º–∏. */
        
        /* –ë–ª–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å */
        box-sizing: border-box;
        margin: 0 auto;
        padding: 0.5em;
        border: 2px solid transparent;
        border-radius: 8px;
        
        /* –í–∏–∑—É–∞–ª */
        background: var(--color-background);
        box-shadow: 0 12px 20px rgba(0,0,0,.2); /* –º—è–≥–∫–∞—è —Ç–µ–Ω—å –∫–∞–∫ —É —Ñ–æ—Ç–æ */
    }
    .matchimg-img.selected {
        border-color: var(--color-grey-150);
    }
    .numbered-image {
        position: relative; /* —è–∫–æ—Ä–∏–º —Ü–∏—Ñ—Ä—É –∫ –∫–∞—Ä—Ç–∏–Ω–∫–µ */
    }
    .numbered-image img {
        width: auto;            /* –Ω–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ 100% */
        max-width: 100%;        /* –Ω–æ –Ω–µ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        height: auto;
        max-height: var(--img-max-height, 100px);  /* –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        display: block;
        margin: 0 auto;         /* —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º, –µ—Å–ª–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É–∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        object-fit: contain;    /* –≤–ø–∏—Å—ã–≤–∞–µ–º —Ü–µ–ª–∏–∫–æ–º */
        border-radius: 8px;
    }
    .numbered-image .image-number {
        position: absolute;
        left: 8px;
        top: 8px;
        z-index: 2;

        color: var(--color-white);                   /* –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
        font-family: cursive, sans-serif;         /* —Ç–æ—Ç –∂–µ —Ä—É–∫–æ–ø–∏—Å–Ω—ã–π —Å—Ç–∏–ª—å */
        font-weight: 500;                         /* –∂–∏—Ä–Ω–∞—è */
        font-size: 1rem;               /* —Ä–∞–∑–º–µ—Ä (–º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å/—É–º–µ–Ω—å—à–∏—Ç—å) */

        text-shadow: 0 2px 4px rgba(0,0,0,.6); /* –º—è–≥–∫–∞—è —Ç–µ–Ω—å –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
        pointer-events: none;          /* –∫–ª–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å–∫–≤–æ–∑—å */
    }
    .matched-phrase {
        margin: 0.3em 0 1em;
        min-height: 1.4em;
        font-size: 1rem;
        text-align: center;
        word-break: break-word;
    }
    .matchimg-phrases {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5em;
        margin-top: 1em;
        justify-content: center;
        margin-bottom: 1em;  /* –º–æ–∂–Ω–æ 12px, 16px –∏–ª–∏ —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ */
    }
    .matchimg-phrase {
        cursor: pointer;
        user-select: none;
        max-width: 100%;
        font-size: 1rem;
        /* —Ñ–æ–Ω/—Ä–∞–¥–∏—É—Å/—Ç–µ–Ω–∏ */
    }
    .matchimg-phrase.selected { /* –≤–∏–∑—É–∞–ª –≤—ã–¥–µ–ª–µ–Ω–∏—è */ 
    }
    .matchimg-phrase.assigned {
        opacity: 0.5;
        pointer-events: none;
    }
    .matched-phrase .phrase-in-slot {
        position: relative;
        display: inline-block;
        max-width: 100%;
        font-size: 1rem;
        /* sticky‚Äë–≤–∏–¥ –¥–∞—ë—Ç */
    }
    .matched-phrase .unassign {
        position: absolute;
        top: -0.4em;
        left: -0.6em;
        cursor: pointer;
        color: #900;            /* CHANGE COLOR VAR */
        border-radius: 50%;
        padding: 0 0.3em;
        font-size: 0.9em;
    }
    /* –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–∞ –∏ –≤ –ø—É–ª–µ, –∏ –≤ —Å–ª–æ—Ç–µ, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω --text-max-ch */
    .matchimg-block[style*="--text-max-ch"] .matchimg-phrase,
    .matchimg-block[style*="--text-max-ch"] .matched-phrase .phrase-in-slot {
        max-width: var(--text-max-ch);
        white-space: normal;
        overflow-wrap: anywhere;
        word-break: break-word;
    }

/* ===== BLOCK: MCQ FAMILY (MCQ / MCQGAP / MCQGAPS / MCQINLINE) ===== */
/* ====================================================================== */

    /* üîß –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ‚Äî –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –∏ –≤–ª–∏—è—Ç—å –Ω–∞ –≤—Å–µ —Ç—Ä–∏ –±–ª–æ–∫–∞ */
    :root {
    --options-gap: 10px;      /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –æ–ø—Ü–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ */
    --label-gap: 2px;         /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –º–µ—Ç–∫–æ–π (–±—É–∫–≤–æ–π/—Ü–∏—Ñ—Ä–æ–π) –∏ —Ç–µ–∫—Å—Ç–æ–º */
    --option-pad-y: 2px;      /* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø –∫–∞–∂–¥–æ–π –æ–ø—Ü–∏–∏ */
    --option-pad-x: 2px;      /* –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø (–¥–ª—è LIST/COLUMNS) */
    --card-min: 180px;        /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ ¬´–∫–∞—Ä—Ç–æ—á–∫–∏¬ª –ø—Ä–∏ layout_answers=CARDS */
    --opt-min: 15ch;          /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏ layout_answers=COLUMNS */
    --mcq-question-gap: 40px; /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏ MCQ */
    --img-radius: 8px;        /* —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
    }

    /* –í–µ—Å—å MCQ-–±–ª–æ–∫ –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    .mcq-block {
    margin: 1.4em 0;          /* –≤–Ω–µ—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É */
    }

    /* –°—Ç—Ä–æ–∫–∞: –Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ + —Å—Ç–µ–º (—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞) */
    .mcq-stem-row {
    display: flex;            /* –Ω–æ–º–µ—Ä –∏ —Ç–µ–∫—Å—Ç ‚Äî –≤ —Ä—è–¥ */
    align-items: baseline;    /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ */
    gap: 8px;                 /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–æ–º–µ—Ä–æ–º –∏ —Ç–µ–∫—Å—Ç–æ–º */
    margin: .3em 0 .5em;      /* –Ω–µ–±–æ–ª—å—à–∏–µ –æ—Ç—Å—Ç—É–ø—ã —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É */
    }
    .mcq-stem {
    font-weight: 400;         /* –æ–±—ã—á–Ω–∞—è —Ç–æ–ª—â–∏–Ω–∞ —à—Ä–∏—Ñ—Ç–∞ */
    line-height: 1.4;         /* –±–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ */
    }
    .mcq-qnum {
    font-weight: 400;         /* –æ–±—ã—á–Ω–∞—è —Ç–æ–ª—â–∏–Ω–∞ —à—Ä–∏—Ñ—Ç–∞ */
    line-height: 1.4;         /* –±–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ */
    color: var(--color-grey-150); 
    }

    /* –°–ø–∏—Å–æ–∫ –æ–ø—Ü–∏–π */
    .mcq-options {
    list-style: none;         /* —É–±–∏—Ä–∞–µ–º –º–∞—Ä–∫–µ—Ä—ã —Å–ø–∏—Å–∫–∞ */
    margin: 0;
    padding: 0;
    }

    /* –ö–∞–∂–¥–∞—è –æ–ø—Ü–∏—è (—Å—Ç—Ä–æ–∫–∞ —Å –±—É–∫–≤–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º) */
    .mcq-option {
        display: flex;            /* –±—É–∫–≤–∞ –∏ —Ç–µ–∫—Å—Ç –≤ –æ–¥–Ω–æ–π –ª–∏–Ω–∏–∏ */
        align-items: center;      /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
        gap: var(--label-gap);    /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –±—É–∫–≤–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2px) */
        border: none;             /* —É–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É */
        border-radius: 8px;       /* –ª—ë–≥–∫–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
        padding: var(--option-pad-y) var(--option-pad-x); /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É –∏ —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞ */
        background: transparent;             /* –Ω–µ—Ç —Ñ–æ–Ω–∞ –¥–æ –∫–ª–∏–∫–∞ */
    }

    /* –ú–µ—Ç–∫–∞ (–±—É–∫–≤–∞/—Ü–∏—Ñ—Ä–∞) */
    .mcq-label {
    display: flex;     /* —á—Ç–æ–±—ã –±—É–∫–≤–∞ –±—ã–ª–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É —Å–≤–æ–µ–π ¬´–∫–∞–ø—Å—É–ª—ã¬ª */
    place-items: center;      /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –∏ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, –∏ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    min-width: 28px;          /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –ø–æ–ª—è –ø–æ–¥ –±—É–∫–≤—É (—Ü–∏—Ñ—Ä—ã —Ç–æ–∂–µ –ø–æ–º–µ—â–∞—é—Ç—Å—è) */
    height: 28px;             /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –º–µ—Ç–∫–∏ */
    border-radius: 7px;       /* –ª—ë–≥–∫–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏ */
    border: none;             /* –±–µ–∑ —Ä–∞–º–∫–∏ */
    background: transparent;  /* —Ñ–æ–Ω –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π */
    font-size: .95rem;        /* —á—É—Ç—å –º–µ–Ω—å—à–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ */
    color: var(--color-grey-150); 
    }

    /* –¢–µ–∫—Å—Ç –æ–ø—Ü–∏–∏ */
    .mcq-text {
    flex: 1 1 auto;           /* —Ç–µ–∫—Å—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ */
    }

    .mcq-option img, .mcq-card img { 
        max-height: var(--img-max-height, 100px); 
        height: auto; 
    }

    /* –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –æ–ø—Ü–∏–∏ */
    .click-group .mcq-option .mcq-text,
    .click-group .mcq-option .mcq-text .click-content {
    line-height: 1.25;        /* —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–π –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ–ø—Ü–∏–∏ */
    }

    /* layout_answers = LIST ‚Äî —Å–ø–∏—Å–æ–∫ –æ–ø—Ü–∏–π –¥—Ä—É–≥ –ø–æ–¥ –¥—Ä—É–≥–æ–º */
    .mcq-options.list {
    display: grid;            /* –∫–∞–∂–¥–∞—è –æ–ø—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π */
    gap: var(--options-gap);  /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–∞–º–∏ */
    }

    /* layout_answers = CARDS ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–π –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –æ–±—Ç–µ–∫–∞–µ–º—ã–µ */
    .mcq-options.cards {
    display: flex;
    flex-wrap: wrap;          /* –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞ */
    gap: var(--options-gap);  /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ */
    }
    .mcq-options.cards .mcq-option {
    min-width: var(--card-min);   /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    justify-content: flex-start;      /* —Ç–µ–∫—Å—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ */
    text-align: left;           /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
    padding: var(--option-pad-y) 1ch; /* —Å–≤–µ—Ä—Ö—É/—Å–Ω–∏–∑—É ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π –æ—Ç—Å—Ç—É–ø; —Å–ª–µ–≤–∞/—Å–ø—Ä–∞–≤–∞ ‚Äî —Ä–æ–≤–Ω–æ 2 —Å–∏–º–≤–æ–ª–∞ */
    }

    /* layout_answers = COLUMNS N ‚Äî —Å–µ—Ç–∫–∞ –∏–∑ –∫–æ–ª–æ–Ω–æ–∫, ¬´—É–º–Ω–∞—è¬ª (auto-fit) */
    .mcq-options.columns2,
    .mcq-options.columns3,
    .mcq-options.columns4 {
    display: grid;
    gap: var(--options-gap);              /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏ */
    grid-template-columns: repeat(auto-fit, minmax(var(--opt-min), 1fr)); 
    /* auto-fit: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–æ–∫, —Å–∫–æ–ª—å–∫–æ –≤–ª–µ–∑–µ—Ç –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ min —à–∏—Ä–∏–Ω—ã */
    }
    .mcq-options.columns3 { --opt-min: 15ch; } /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è 3 –∫–æ–ª–æ–Ω–æ–∫ */
    .mcq-options.columns4 { --opt-min: 12ch; } /* –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è 4 –∫–æ–ª–æ–Ω–æ–∫ */

    /* –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö */
    .mcq-media { margin-top: 6px; }       /* –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–∫–∏/–∞—É–¥–∏–æ */
    .mcq-media-stem { margin-top: 8px; }  /* –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É, –µ—Å–ª–∏ –º–µ–¥–∏–∞ –≤ —Ç–µ–∫—Å—Ç–µ –≤–æ–ø—Ä–æ—Å–∞ */
    .mcq-media img {
    display: block;
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    }
    .mcq-media audio {
    width: 100%;
    max-width: 100%;
    }


/* ===== –¢–æ–ª—å–∫–æ MCQGAPS: –Ω–æ–º–µ—Ä —Ä—è–¥–∞ —Å–ª–µ–≤–∞ –æ—Ç –æ–ø—Ü–∏–π ===== */
/* ====================================================================== */
    .mcqgaps-block { margin: 1.4em 0; }   /* –≤–Ω–µ—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø –±–ª–æ–∫–∞ */
    .mcqgaps-text { margin-bottom: 1em; } /* –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É —Ç–µ–∫—Å—Ç–æ–º –∏ —Ä—è–¥–∞–º–∏ –æ–ø—Ü–∏–π */

    .mcqgaps-row {
    display: flex;                        /* –Ω–æ–º–µ—Ä + –æ–ø—Ü–∏–∏ –≤ –æ–¥–Ω—É –ª–∏–Ω–∏—é */
    align-items: flex-start;              /* –Ω–æ–º–µ—Ä –≤—ã—Ä–∞–≤–Ω–µ–Ω –ø–æ –≤–µ—Ä—Ö–Ω–µ–º—É –∫—Ä–∞—é */
    gap: 8px;                            /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –Ω–æ–º–µ—Ä–æ–º –∏ —Å–ø–∏—Å–∫–æ–º –æ–ø—Ü–∏–π */
    margin: 0.4em 0;
    }
    .mcqgaps-row-label {
    flex: 0 0 auto;                       /* —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∏—Ä–∏–Ω–∞, –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è */
    min-width: 1.6em;                     /* —á—Ç–æ–±—ã –¥–≤—É—Ö–∑–Ω–∞—á–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ —Ç–æ–∂–µ –≤–ª–µ–∑–∞–ª–∏ */
    text-align: right;                    /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é */
    font-weight: 700;                     /* –∂–∏—Ä–Ω—ã–π –Ω–æ–º–µ—Ä */
    opacity: .6;                          /* –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –Ω–µ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–ª */
    line-height: 1;                       /* –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫–∏ = —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
    padding-top: 0.5em;                   /* —Å–ª–µ–≥–∫–∞ —Å–¥–≤–∏–≥–∞–µ–º –≤–Ω–∏–∑ –¥–ª—è –æ–ø—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è */
    }
    .mcqgaps-row .mcq-options {
    flex: 1 1 auto;                       /* –æ–ø—Ü–∏–∏ —Ç—è–Ω—É—Ç—Å—è –Ω–∞ –≤—Å—é –æ—Å—Ç–∞–≤—à—É—é—Å—è —à–∏—Ä–∏–Ω—É */
    margin: 0;                            /* —É–±–∏—Ä–∞–µ–º –≤–Ω–µ—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    }

    .mcq-question { 
    margin: 0 0 var(--mcq-question-gap, 20px);   /* –î–û–ë–ê–í–¨: –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É —É –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ */
    } 


    /* –û–ø—Ü–∏–∏ —É MCQINLINE ‚Äî —á—É—Ç—å –ø–ª–æ—Ç–Ω–µ–µ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É */
    .mcqinline-content .click-option {
        padding: 0 0.2ch;                      /* –º–µ–Ω—å—à–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø ‚Üí –æ–ø—Ü–∏–∏ –±–ª–∏–∂–µ */
    }

    /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å / –º–µ–∂–¥—É –æ–ø—Ü–∏—è–º–∏ ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∏ —Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π */
    .choice-separator {
        margin: 0 2px;
        color: var(--color-grey-150);
    }

/* ====================================================== */
/* COMMON EXERCISE ELEMENTS */
/* ====================================================== */

/* ===== POOL ELEMENTS ===== */
/* ====================================================================== */
    .pool-element {     /* –ë–∞–∑–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—É–ª–∞ */
        position: relative;                          /* –Ω—É–∂–µ–Ω –¥–ª—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç–æ–≤/–≥–ª–æ—É */
        display: inline-block;                       /* –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –ø–ª–∞—à–∫–∞ –≤ —Å—Ç—Ä–æ–∫–µ */

        background: var(--surface-bg);               /* –æ–±—â–∏–π —Ñ–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ */
        color: var(--neutral-text-color);           /* —Ç—ë–º–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—à–∫–∏ */

        border-radius: var(--radius-md);             /* —Å—Ä–µ–¥–Ω–∏–π —Ä–∞–¥–∏—É—Å ‚Äî –¥–ª—è —á–∏–ø–æ–≤, –ø—É–ª–∞ –∏ –º–µ–ª–∫–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
        padding: 6px 10px;                           /* –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã: –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π / –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π */

        box-shadow: var(--shadow-soft-md);           /* –º—è–≥–∫–∞—è –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */

        user-select: none;                           /* –Ω–µ–ª—å–∑—è –≤—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç —Å–ª—É—á–∞–π–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏/–∫–ª–∏–∫–µ */
        cursor: pointer;                             /* —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç */
        max-width: 100%;                             /* –Ω–µ –¥–∞—ë–º –ø–ª–∞—à–∫–µ –≤—ã–ª–µ–∑—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
        line-height: 1.25;                           /* —á—É—Ç—å –ø–ª–æ—Ç–Ω–µ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ */

        transition:
            transform 0.06s ease,                    /* –ª—ë–≥–∫–∏–π ¬´–ø—Ä—ã–∂–æ–∫¬ª/–Ω–∞–∂–∞—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ */
            box-shadow 0.2s ease,                    /* –º—è–≥–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–Ω–∏ –ø—Ä–∏ hover/active */
            opacity 0.2s ease;                       /* –ø–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ/–ø–æ—è–≤–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ */
    }
    .pool-element:hover { 
        transform: translateY(-2px);                 /* –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ ‚Äî —á—É—Ç—å –ø—Ä–∏–ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è */
    }
    .pool-element:active { 
        transform: translateY(0);                    /* –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–æ */
    }

    .pool-element.sticky {                          /* –í–∏–∑—É–∞–ª sticky-note */
        background: var(--surface-bg);               /* —Ç–æ—Ç –∂–µ –±–∞–∑–æ–≤—ã–π —Ñ–æ–Ω */
        padding: 15px 10px 6px 10px;                 /* —Å–≤–µ—Ä—Ö—É –±–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø ‚Äî –∫–∞–∫ —É —Å—Ç–∏–∫–µ—Ä–∞ */
        box-shadow: var(--shadow-soft-lg);           /* —á—É—Ç—å –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è —Å—Ç–∏–∫–µ—Ä–∞ */
    }

    .pool-element.sticky.tape-clear::before {
        content: "";
        position: absolute;
        left: 18%;
        top: -8px;
        width: 64%;
        height: 14px;
        background: rgba(255,255,255,.45);
        backdrop-filter: blur(2px);
        transform: rotate(3deg);
        box-shadow: 0 4px 10px rgba(0,0,0,.18);
        border-radius: 2px;
        pointer-events: none;
    }

/* ===== POOL WIDGET ===== */
/* ====================================================================== */
    .pool {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5em;
        margin: 0.5em 0 1em;
        justify-content: flex-start;
        align-items: flex-start;
    }

    /* –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—É–ª–∞.
       –í–∏–∑—É–∞–ª –±–µ—Ä—ë—Ç—Å—è –∏–∑ .pool-element/.pool-element.sticky; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å 'pool-element sticky'. */
    .pool-element {}

    /* –ï—Å–ª–∏ –≤—ã–±–µ—Ä–µ–º —Ä–µ–∂–∏–º crossed-out: */
    .pool-element.crossed-out {
        text-decoration: line-through;
        opacity: .6;
    }
    
    /* –í—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—É–ª–∞: —Ç–æ—Ç –∂–µ –Ω–µ–æ–º–æ—Ä—Ñ–Ω—ã–π –ø—Ä–µ—Å–µ—Ç + glow –ü–û–î –ø–ª–∞—à–∫–æ–π (–∫–∞–∫ —É –Ω–æ–º–µ—Ä–∞) */
    .pool-element.selected {
        outline: none;
        border: none;           /* –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, —á—Ç–æ–±—ã –Ω–µ –≤—Å–ø–ª—ã–ª–∞ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è —Ä–∞–º–∫–∞ */
        position: relative;     /* –æ—Å—Ç–∞–≤–ª—è–µ–º, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */

        /* –ø–æ–¥–∫–ª—é—á–∞–µ–º –æ–±—â–∏–π GLOW SHADOW PRESET */
        animation: glow-shadow-soft var(--glow-duration) ease-in-out infinite;
    }

    .pool-element .count-badge {
    position: absolute;
    top: -7px;
    right: -7px;

    font-size: 12px;
    line-height: 1;

    padding: 2px 6px;
    border-radius: 999px;

    background: var(--surface-bg);
    color: var(--neutral-text-color);
    box-shadow: var(--shadow-soft-md);
    border: 1px solid rgba(0,0,0,0.18);

    pointer-events: none; /* —á—Ç–æ–±—ã –∫–ª–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏–ª –≤ —Å–∞–º —ç–ª–µ–º–µ–Ω—Ç */
    }


/* ===== STICKY POOL (during scroll) ===== */
/* ====================================================================== */
    .pool-sticky-sentinel{
        height: 1px;
        width: 100%;
    }

    .pool-sticky-placeholder{
        height: 0;
    }

    .pool-sticky-wrap{
        position: relative; /* –Ω—É–∂–Ω–æ –¥–ª—è ::after */
        will-change: transform;
    }

    /* –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–π –ø—É–ª */
    .pool-sticky-wrap.is-pinned {
        position: fixed;
        top: 0;
        z-index: 1000;
        left: 0 !important;
        right: 0 !important;
        width: auto !important;

        /* ‚úÖ –º–µ—Å—Ç–æ –¥–ª—è –±–µ–π–¥–∂–∏–∫–æ–≤ —Å–≤–µ—Ä—Ö—É */
        padding-top: 10px;
        padding-bottom: 8px;
        padding-left: 15px;
        padding-right: 12px;
        box-sizing: border-box;

        background: var(--color-background);

        /* –º—è–≥–∫–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ –æ—Ç —Ç–µ–∫—Å—Ç–∞ */
        box-shadow:
            0 10px 24px rgba(0,0,0,0.10),
            0 0 18px 12px rgba(243,243,243,0.98);

        transition: transform 140ms ease-out;
    }


    /* ‚úÖ –ø—Ä—è—á–µ–º —Å–∫—Ä–æ–ª–ª–±–∞—Ä —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø—É–ª —Ä–µ–∞–ª—å–Ω–æ —Å–∫—Ä–æ–ª–ª–∏—Ç—Å—è */
    .pool-sticky-wrap.is-pinned.pool-scrollable{
        /* ‚úÖ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É pinned-–ø—É–ª–∞ –∏ –¥–∞—ë–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–∫—Ä–æ–ª–ª */
        max-height: 40vh;
        overflow: auto;
        overscroll-behavior: contain;          /* —á—Ç–æ–±—ã —Å–∫—Ä–æ–ª–ª –Ω–µ "–ø—Ä–æ–∫–∏–¥—ã–≤–∞–ª—Å—è" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É */
        -webkit-overflow-scrolling: touch;     /* –ø—Ä–∏—è—Ç–Ω–∞—è –∏–Ω–µ—Ä—Ü–∏—è –Ω–∞ iOS */
        /* –ø—Ä—è—á–µ–º —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        scrollbar-width: none;        /* Firefox */
        -ms-overflow-style: none;     /* old Edge */
    }
    .pool-sticky-wrap.is-pinned.pool-scrollable::-webkit-scrollbar{
        width: 0;
        height: 0;
    }

    /* ‚úÖ –Ω–∏–∂–Ω–∏–π –∫—Ä–∞–π ‚Äú—Ä–∞—Å—Ç–≤–æ—Ä—è–µ—Ç—Å—è‚Äù –≤ —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ) */
    .pool-sticky-wrap.is-pinned.pool-scrollable::before{
        content:"";
        position:absolute;
        left:0;
        right:0;
        bottom:0;
        height:26px;
        pointer-events:none;
        z-index: 6;
        background: linear-gradient(
            to bottom,
            rgba(0,0,0,0.10),
            rgba(224,224,224,1)
        );
    }


    /* –∫–æ–≥–¥–∞ –ø—É–ª –∑–∞–∫—Ä–µ–ø–ª—ë–Ω ‚Äî —É–±–∏—Ä–∞–µ–º –µ–≥–æ –≤–Ω–µ—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã,
    —á—Ç–æ–±—ã –≤–µ—Ä—Ö –ø—É–ª–∞ —Ä–µ–∞–ª—å–Ω–æ –±—ã–ª —É –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞ */
    .pool-sticky-wrap.is-pinned .pool{
        margin: 0 !important;
    }


/* ===== EXERCISE ACTION BUTTONS (Count / Check / Reveal) ===== */
/* ====================================================================== */
    /* –ë–∞–∑–æ–≤—ã–π –≤–∏–¥ –∫–Ω–æ–ø–æ–∫ —Å –∏–∫–æ–Ω–∫–∞–º–∏ */
    .count-btn,
    .check-btn,
    .reveal-btn {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;

        min-width: 46px;                  /* –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è ¬´—Ç–∞–±–ª–µ—Ç–∫–∞¬ª */
        height: 42px;
        padding: 0 0.7rem;                /* –ø–æ –±–æ–∫–∞–º —á—É—Ç—å-—á—É—Ç—å –º–µ—Å—Ç–∞ */
        border-radius: 999px;             /* –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ ‚Äî –ø–∏–ª—é–ª—è */

        background-color: var(--surface-bg);
        background-image: none;           /* glow –¥–æ–±–∞–≤–∏–º —Ç–æ–ª—å–∫–æ –Ω–∞ hover */
        border: none;
        box-shadow: var(--shadow-soft-md);

        cursor: pointer;
        overflow: hidden;                 /* —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø—Ä—ã–≥–∏–≤–∞–ª–∏ –Ω–∞—Ä—É–∂—É */

        transform: translateY(0);

        transition:
            transform 0.06s ease,
            box-shadow 0.2s ease,
            padding 0.28s ease,
            background 0.28s ease;
    }

    /* –ò–∫–æ–Ω–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ */
    .count-btn .material-symbols-outlined,
    .check-btn .material-symbols-outlined,
    .reveal-btn .material-symbols-outlined {
        font-size: 1.3rem;                /* –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä */
        line-height: 1;
        vertical-align: middle;

        transition:
            font-size 0.28s ease,
            transform 0.28s ease;
    }

/* COUNT: –∏–∫–æ–Ω–∫–∞ —Å –æ–±—â–µ–π –Ω–µ–æ–Ω–æ–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π —Ü–≤–µ—Ç–∞ (color-1) */
/* ====================================================================== */
    .count-btn .material-symbols-outlined {
        color: var(--color-gradient-1);     /* —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ü–≤–µ—Ç */
        animation: color-1 var(--glow-duration) ease-in-out infinite;
    }

/* CHECK / SHOW: —Å–ø–æ–∫–æ–π–Ω—ã–π —Å–µ—Ä—ã–π –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏ */
/* ====================================================================== */
    .check-btn .material-symbols-outlined,
    .reveal-btn .material-symbols-outlined {
        color: var(--color-grey-150);
    }

    .count-btn:hover,
    .check-btn:hover,
    .reveal-btn:hover {
        box-shadow: var(--shadow-soft-lg);  /* —á—É—Ç—å —Å–∏–ª—å–Ω–µ–µ –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è —Ç–µ–Ω—å */
        transform: translateY(-2px);        /* –∫–∞–∫ .pool-element:hover */
    }

    .count-btn:active,
    .check-btn:active,
    .reveal-btn:active {
        transform: translateY(0);           /* –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ –º–µ—Å—Ç–æ */
        box-shadow: var(--shadow-soft-md);  /* –±–∞–∑–æ–≤–∞—è —Ç–µ–Ω—å, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ */
    }


/* ===== EXERCISE FOOTER & BUTTONS LAYOUT ===== */
/* ====================================================================== */
    .exercise-footer {
        display: flex;
        flex-direction: column;     /* —Å–≤–µ—Ä—Ö—É ‚Äî –∫–Ω–æ–ø–∫–∏, —Å–Ω–∏–∑—É ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */
        align-items: stretch;
        gap: 0.75rem;
        margin-top: 0.5rem;
    }

    .exercise-footer-row {
        display: flex;              /* –∫–Ω–æ–ø–∫–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ */
        align-items: center;
        justify-content: space-between;
        gap: 1.75rem;
        flex-wrap: wrap;            /* –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –≤—Å—ë –∫—Ä–∞—Å–∏–≤–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è */
    }

    /* –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∞—Ç Count / Check / Show */
    .exercise-buttons {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

/* ===== EXERCISE PROGRESS ===== */
/* ====================================================================== */
    /* .exercise-separator ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ: */
    /* .exercise-progress-bar ‚Äî —Å–∞–º–∞ –ø–æ–ª–æ—Å–∞ (1em –≤—ã—Å–æ—Ç–æ–π, ~85% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞), */
    /* .exercise-progress-fill ‚Äî —Ü–≤–µ—Ç–Ω–∞—è ¬´–∑–∞–ª–∏–≤–∫–∞¬ª, */
    /* .exercise-progress-icon ‚Äî —Å–º–∞–π–ª–∏–∫ üôÇ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –µ–∑–¥–∏—Ç—å. */

    .exercise-separator {
        position: relative;                 /* –Ω—É–∂–µ–Ω –¥–ª—è –ø—Å–µ–≤–¥–æ—ç–ª–µ–º–µ–Ω—Ç–æ–≤ ::before/::after */
        margin: 2.0rem 0 0;
        padding-top: 0.4rem;

        display: flex;
        justify-content: center;   /* –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ–ª–æ—Å—É –ø–æ —Ü–µ–Ω—Ç—Ä—É */
        align-items: flex-end;
        overflow: visible;
    }

    .exercise-progress-track {
        position: relative;
        width: min(85vw, 900px);
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0.35rem;              /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –±–∞—Ä–æ–º –∏ —à–∫–∞–ª–æ–π */
    }

    .exercise-progress-bar {
        position: relative;
        width: min(85vw, 900px);   /* 85% —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞, –Ω–æ –Ω–µ —à–∏—Ä–µ 900px */
        height: 3px;               /* –≤—ã—Å–æ—Ç–∞ –ø–æ–ª–æ—Å—ã */
        border-radius: 999px;      /* –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—É–≥–ª—ë–Ω–Ω–∞—è –ø–æ–ª–æ—Å–∞ */
        border-radius: 999px;

        /* –Ω–µ–æ–º–æ—Ä—Ñ–Ω–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∏–∑ GLOBAL NEUMORPHIC SURFACES */
        background: var(--surface-bg);
        box-shadow:
            var(--shadow-soft-md),                          /* –º—è–≥–∫–∏–π –æ–±—ä—ë–º */
            0 var(--glow-shadow-soft-y-1)                   /* + –º—è–≥–∫–∏–π —Ü–≤–µ—Ç–Ω–æ–π glow –∏–∑ GLOBAL GLOW SHADOW PRESET */
              var(--glow-shadow-soft-blur-1)
              var(--glow-shadow-soft-spread-1)
              var(--glow-shadow-soft-color-1);

        overflow: visible;   /* ‚Üê –≤–º–µ—Å—Ç–æ hidden */
    }

    .exercise-progress-fill {
        position: absolute;
        inset: 0;
        width: 0%;                 /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0% –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö */
        background: var(--glow-gradient);   /* —Ç–æ—Ç –∂–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç, —á—Ç–æ –∏ –≤ —Ç–µ–º–µ */
        background-size: var(--glow-bg-size);
        animation: glow var(--glow-duration) ease-in-out infinite;
        transition: width 0.7s ease-in-out; /* –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã */
    }
/* ===== –°–ú–ê–ô–õ–ò–ö ===== */
/* ====================================================================== */
    .exercise-progress-icon {
        position: absolute;
        bottom: -0.3em;            /* –Ω–∏–∂–Ω—è—è —Ç–æ—á–∫–∞ –Ω–∏–∂–µ –ø–æ–ª–æ—Å—ã */
        left: 0%;                  /* —Å—Ç–∞—Ä—Ç ‚Äî –≤ –Ω–∞—á–∞–ª–µ –ø–æ–ª–æ—Å—ã (0%) */
        transform: translateX(-50%) translateY(0);
        font-size: 1.4em;
        line-height: 1;
        pointer-events: none;
        transition: left 0.7s ease-in-out; /* –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –æ—Å–∏ X */
        filter: drop-shadow(0 0 3px rgba(15, 23, 42, 0.9)); /* –ª—ë–≥–∫–∞—è —Ç—ë–º–Ω–∞—è —Ç–µ–Ω—å –ø–æ–¥ —Å–º–∞–π–ª–∏–∫–æ–º */

    }

    @keyframes exercise-icon-bounce {
        0%   { transform: translateX(-50%) translateY(0); }
        30%  { transform: translateX(-50%) translateY(-0.35em); }
        60%  { transform: translateX(-50%) translateY(0.35em); }
        100% { transform: translateX(-50%) translateY(0); }
    }

    .exercise-progress-icon.icon-bounce {
        animation: exercise-icon-bounce 0.4s ease-out;
    }

/* ===== –®–ö–ê–õ–ê ===== */
/* ====================================================================== */
    .exercise-progress-scale {
        position: relative;
        height: 0.9rem;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;

        color: var(--color-grey-150);
        font-size: 1rem;
        font-variant-numeric: tabular-nums;
        opacity: 1;
    }

    /* –û–¥–∏–Ω —à–∞–≥ —à–∫–∞–ª—ã: —Ä–∏—Å–∫–∞ + –ø–æ–¥–ø–∏—Å—å */
    .scale-step {
        flex: 0 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.15rem;
    }

    .scale-tick {
        width: 1px;
        background-color: var(--color-grey-150);
        height: 0.5rem;
    }

    .scale-tick-major {
        height: 0.8rem;
    }

    .scale-label {
        line-height: 1;
    }

/* ====================================================== */
/* SPECIFIC MEDIA PARAMETERS */
/* ====================================================== */

/* MEDIA IN GAP*/
/* ====================================================================== */
    .gap-media {
        display: inline-block;
        vertical-align: middle;
        margin: 0.1rem 0.6rem 0.2rem 0;
    }
    .gap-media.gap-align-left   { text-align: left; }
    .gap-media.gap-align-center { text-align: center; }
    .gap-media.gap-align-right  { text-align: right; }

    .gap-float { margin: .25rem 1rem .75rem 0; }
    .gap-float.gap-float-right { float: right; margin: .25rem 0 .75rem 1rem; }
    .gap-float.gap-float-left  { float: left; }

    /* —á—Ç–æ–±—ã –ø–ª–∞–≤–∞—é—â–∏–µ –º–µ–¥–∏–∞ –Ω–µ –Ω–∞–µ–∑–∂–∞–ª–∏ –Ω–∞ –Ω–∏–∂–Ω–∏–µ –±–ª–æ–∫–∏ */
    .gap-block::after { content: ""; display: block; clear: both; }

/* MEDIA IN MCQ */
/* ====================================================================== */
    .mcq-media { margin: .5em 0; }
    .mcq-align-left   { text-align:left; }
    .mcq-align-center { text-align:center; }
    .mcq-align-right  { text-align:right; }
    .mcq-float { margin:.25rem 1rem .75rem 0; }
    .mcq-float.mcq-float-right { float:right; margin:.25rem 0 .75rem 1rem; }
    .mcq-float.mcq-float-left  { float:left; }
    .mcq-stem::after { content:""; display:block; clear:both; }

/* MEDIA IN EXERCISE ELEMENT: Instruction and Example */
/* ====================================================================== */
    .exercise-instruction::after, .exercise-example::after { content:""; display:block; clear:both; }

/* ====================================================== */
/* PROGRESS BAR */
/* ====================================================== */

/* ===== GLOBAL PAGE PROGRESS FLOAT CLUSTER ===== */
/* ====================================================================== */
    .page-progress {
        position: fixed;
        right: 1.5rem;
        bottom: 1.5rem;
        z-index: 9999;

        /* —Ä–∞–∑–º–µ—Ä –∏ —Ü–≤–µ—Ç —à—Ä–∏—Ñ—Ç–∞ –∫–∞–∫ —É body */
        font-size: 1rem;
        color: var(--neutral-text-color);

        pointer-events: none;          /* –∫–ª–∏–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ inner */
    }

    .page-progress-inner {
        position: relative;
        width: 5.5rem;
        height: 5.5rem;
        pointer-events: auto;
    }

    .page-progress-main,
    .page-progress-orb {
        position: absolute;
        border-radius: 999px;
        border: none;
        padding: 0;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.1rem;

        /* GLOBAL NEUMORPHIC SURFACES */
        background: var(--surface-bg);
        box-shadow: var(--shadow-soft-md);

        /* —à—Ä–∏—Ñ—Ç ‚Äî –±–µ–∑ –∑–∞—Å–µ—á–µ–∫ */
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        font-size: 1em;
        color: inherit;

        cursor: pointer;
        transition:
            transform 0.35s ease,
            box-shadow 0.25s ease,
            background 0.25s ease,
            opacity 0.25s ease;
    }

    /* –≥–ª–∞–≤–Ω—ã–π –∫—Ä—É–≥: –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä */
    .page-progress-main {
        width: 3rem;
        height: 3rem;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }


    /* –æ—Ä–±–∏—Ç—ã: —á—É—Ç—å –∫—Ä—É–ø–Ω–µ–µ */
    .page-progress-orb {
        width: 3.4rem;
        height: 3.4rem;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.3);
        opacity: 0;
        pointer-events: none;
        z-index: 1;
    }

    .page-progress-main-glow {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 3rem;                       /* –∫–∞–∫ –≥–ª–∞–≤–Ω—ã–π –∫—Ä—É–∂–æ–∫ */
        height: 3rem;
        transform: translate(-50%, -50%) translateY(10px) scale(1.7);
        border-radius: 999px;
        pointer-events: none;
        z-index: 0;

        background: var(--glow-gradient);  /* —Ç–æ—Ç –∂–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç, —á—Ç–æ —É –ø–ª–∞—à–∫–∏ –Ω–æ–º–µ—Ä–∞ */
        background-size: var(--glow-bg-size);
        filter: blur(22px);
        opacity: 0.9;
        animation: glow var(--glow-duration) ease-in-out infinite;
    }
    

    .page-progress-main-value {
        font-weight: 700;
        font-size: 1.1em;

        /* –∫–∞–∫ —É —Ç–µ–∫—Å—Ç–∞ –Ω–æ–º–µ—Ä–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è */
        color: var(--color-gradient-1);
        animation: color-1 var(--glow-duration) ease-in-out infinite;
    }

    .page-progress-correct,
    .page-progress-wrong,
    .page-progress-empty {
        font-size: 0.8em;
    }

    /* –≥–ª–∞–≤–Ω—ã–π –∫—Ä—É–≥ ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    .page-progress-main {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2;
    }

    /* –æ—Ä–±–∏—Ç—ã –≤ –∑–∞–∫—Ä—ã—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏: —Å–ø—Ä—è—Ç–∞–Ω—ã –ø–æ–¥ –≥–ª–∞–≤–Ω—ã–º –∫—Ä—É–≥–æ–º */
    .page-progress-orb {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.3);
        opacity: 0;
        pointer-events: none;
        z-index: 1;
    }

    .page-progress-main:hover,
    .page-progress-main:focus-visible {
        box-shadow: var(--shadow-soft-lg);
    }

    /* –ø—Ä–∏ hover –Ω–∞ –≥—Ä—É–ø–ø—É –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–ª–∞—Å—Å–æ–º .is-open ‚Äî –æ—Ä–±–∏—Ç—ã –≤—ã–ª–µ—Ç–∞—é—Ç */
    .page-progress-inner:hover .page-progress-orb,
    .page-progress.is-open .page-progress-orb {
        opacity: 1;
        pointer-events: auto;
    }

    /* –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ (‚úÖ) ‚Äî –≤–≤–µ—Ä—Ö –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫—Ä—É–≥–∞ */
    .page-progress-inner:hover .orb-correct,
    .page-progress.is-open .orb-correct {
        transform: translate(-50%, -50%) translate(1.0rem, -4.0rem) scale(1);
        transition-delay: 0.05s;
    }

    /* –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ (‚ùå) ‚Äî –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏ –≤–≤–µ—Ä—Ö-–≤–ª–µ–≤–æ */
    .page-progress-inner:hover .orb-wrong,
    .page-progress.is-open .orb-wrong {
        transform: translate(-50%, -50%) translate(-3.0rem, -3.0rem) scale(1);
        transition-delay: 0.12s;
    }

    /* –ü—É—Å—Ç—ã–µ (‚ö™) ‚Äî –≤–ª–µ–≤–æ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫—Ä—É–≥–∞ */
    .page-progress-inner:hover .orb-empty,
    .page-progress.is-open .orb-empty {
        transform: translate(-50%, -50%) translate(-4.0rem, 1.0rem) scale(1);
        transition-delay: 0.19s;
    }

    .page-progress-orb .material-symbols-outlined {
        font-size: 1.1rem;
        line-height: 1;
    }

/* === GLOBAL AUDIO BAR === */
/* ====================================================================== */
    .audio-global-player {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 50;

    background: var(--surface-bg);
    color: var(--neutral-text-color);
    box-shadow: var(--shadow-soft-lg);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    border-top: 1px solid var(--color-border);

    padding: 8px 18px 10px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    font-size: 0.875rem;

    /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–ª–µ–µ—Ä —Å–ø—Ä—è—Ç–∞–Ω –∑–∞ –Ω–∏–∂–Ω–∏–º –∫—Ä–∞–µ–º —ç–∫—Ä–∞–Ω–∞ */
    transform: translateY(100%);
    opacity: 0;
    pointer-events: none;
    transition: transform 0.3s ease, opacity 0.3s ease;
    }

    /* –∫–∞–∫ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å active ‚Äî –ø–ª–µ–µ—Ä "–≤—ã–µ–∑–∂–∞–µ—Ç" –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º */
    .audio-global-player.audio-global-player-active {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
    }

    .audio-global-player-inner {
    display: flex;
    align-items: center;
    gap: 12px;
    }

    /* —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫: waveform —Å–≤–µ—Ä—Ö—É, –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–Ω–∏–∑—É */
    .audio-global-player-visual {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    gap: 4px;
    }

    .audio-global-player-waveform-canvas {
    width: 100%;
    height: 32px;
    display: block;
    border-radius: var(--radius-md);
    background: var(--surface-bg);
    box-shadow: var(--shadow-soft-md);
    }

    /* –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞ ‚Äî
       waveform —Å–∞–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å */
    .audio-global-player-progress {
    display: none;
    }

    .audio-global-player-progress-fill {
    display: none;
    }

    .audio-global-player-times {
    flex: 0 0 auto;
    margin-left: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
    font-variant-numeric: tabular-nums;
    opacity: 0.85;
    font-size: 0.8rem;
    }

    .audio-global-player-controls {
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 0 0 auto;
    }

    .audio-global-player-times {
    flex: 0 0 auto;
    margin-left: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
    font-variant-numeric: tabular-nums;
    opacity: 0.85;
    font-size: 0.8rem;
    }

    .audio-global-player-playbtn {
    border: none;
    background: transparent;
    padding: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0;
    }

    .audio-global-player-playbtn .material-symbols-outlined {
    font-size: 28px;
    }

    .audio-global-player-loopbtn {
    border: none;
    background: transparent;
    padding: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0;
    opacity: 0.9;
    }

    .audio-global-player-loopbtn .material-symbols-outlined {
    font-size: 22px;
    }

    .audio-global-player-loopbtn:hover {
    opacity: 1;
    }

    .audio-global-player-closebtn{
        border: none;
        background: transparent;
        padding: 0;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0;
        opacity: 0.9;
    }
    .audio-global-player-closebtn .material-symbols-outlined{
        font-size: 22px;
        color: var(--color-wrong);   /* –∫–∞–∫ "wrong" */
    }
    .audio-global-player-closebtn:hover{
        opacity: 1;
    }

    .audio-global-player-playbtn .material-symbols-outlined,
    .audio-global-player-loopbtn .material-symbols-outlined {
    color: var(--color-grey-150);
    }

    .audio-global-player-loopbtn.is-active .material-symbols-outlined{
        color: var(--color-gradient-1);
        animation: color-1 var(--glow-duration) ease-in-out infinite;
    }

    @media (max-width: 640px) {
    .audio-global-player {
        padding: 6px 12px 8px;
    }
    .audio-global-player-playbtn .material-symbols-outlined {
        font-size: 24px;
    }
    .audio-global-player-title {
        font-size: 0.8rem;
    }
    }

    body {
    /* —á—Ç–æ–±—ã –Ω–∏–∂–Ω–∏–π –ø–ª–µ–µ—Ä –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª –∫–æ–Ω—Ç–µ–Ω—Ç */
    padding-bottom: 72px;
    }
    
</style></head><body data-reveal='false'>
<div id="block-1" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">1</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">‚ö†Ô∏è ¬øQu√© significan las abreviaturas?</div>
<div class="exercise-example">El s√≠mbolo üü¶ representa el verbo en su forma inicial.</div>
<div class="exercise-example">C = Consonante.</div>
<div class="exercise-example">V = Vocal.</div>
<div class="exercise-example">‚Ä¢ <strong>üü¶ + C + ed</strong> = representa el caso cuando se duplica el consonante (si el verbo termina con una √∫nica vocal y un consonante).</div>
<div class="exercise-example">‚Ä¢ <strong>üü¶C-i + ed</strong> = el caso cuando  la ‚Äúy‚Äù se convierte a ‚Äúi‚Äù</div>
<div class="exercise-example">‚Ä¢ <strong>üü¶V-y + ed</strong> = el caso cuando la ‚Äúy‚Äù no se cambia</div>
<div class="exercise-example">‚Ä¢ <strong>üü¶ + d</strong> = para no duplicar la ‚Äúe‚Äù (porque ‚Äúee‚Äù se pronunciar√≠a como /i/) solo se a√±ade la ‚Äúd‚Äù.</div>
<div class="exercise-example">‚Ä¢ <strong>üü¶ + ed</strong> = el caso m√°s simple y normal.</div>
<div class="exercise-example">‚Ä¢ Para los verbos irregulares utiliza ‚ùå en ambos campos.</div>
<div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-1-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-1-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-1-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-1-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-1-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-1-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-1-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-1-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-1-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">remember ‚Äî recordar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>judge ‚Äî juzgar ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>create ‚Äî crear ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>listen ‚Äî escuchar ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>explain ‚Äî explicar ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>stay ‚Äî quedar ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>buy ‚Äî comprar ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"></div><div class="column">interest ‚Äî interesar ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>beg ‚Äî rogar ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>find ‚Äî encontrar ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>help ‚Äî ayudar ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>build ‚Äî construir ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>take ‚Äî tomar / llevar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>muddle ‚Äî confundir ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">agree ‚Äî estar de acuerdo ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>cry ‚Äî llorar ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>be ‚Äî ser / estar ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>knot ‚Äî hacer un nudo / anudar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>practice ‚Äî practicar ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>rub ‚Äî frotar ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-1')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-1')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-2" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">2</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-2-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-2-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-2-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-2-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-2-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-2-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-2-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-2-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-2-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">understand ‚Äî entender / comprender ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>clap ‚Äî aplaudir ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>grip ‚Äî agarrar ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>grab ‚Äî agarrar ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>mix ‚Äî mezclar ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>think ‚Äî pensar ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>dance ‚Äî bailar ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"></div><div class="column">move ‚Äî mover ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>meet ‚Äî conocer / reunirse ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>employ ‚Äî contratar ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>start ‚Äî empezar / comenzar ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>injure ‚Äî herir / lesionar ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>enjoy ‚Äî disfrutar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>plug ‚Äî enchufar / conectar ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">shop ‚Äî comprar ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>bring ‚Äî traer ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>memorize ‚Äî memorizar ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>save ‚Äî ahorrar / guardar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>delay ‚Äî atrasar ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>trip ‚Äî tropezar ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-2')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-2')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-3" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">3</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-3-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-3-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-3-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-3-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-3-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-3-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-3-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-3-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-3-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">organize ‚Äî organizar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>label ‚Äî etiquetar ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>milk ‚Äî orde√±ar ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>call ‚Äî llamar ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>pass ‚Äî aprobar / pasar ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>work ‚Äî trabajar ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>long ‚Äî anhelar ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">license ‚Äî otorgar licencia / licenciar ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>live ‚Äî vivir ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>research ‚Äî investigar ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>sell ‚Äî vender ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>skip ‚Äî saltar / omitir ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>march ‚Äî marchar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>introduce ‚Äî presentar / introducir ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"></div><div class="column">paint ‚Äî pintar ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>tell ‚Äî decir / contar ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>impress ‚Äî impresionar ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>show ‚Äî mostrar / ense√±ar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>forget ‚Äî olvidar ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>flip ‚Äî dar la vuelta / voltear ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-3')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-3')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-4" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">4</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-4-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-4-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-4-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-4-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-4-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-4-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-4-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-4-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-4-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">look ‚Äî mirar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>include ‚Äî incluir ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>study ‚Äî estudiar ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>watch ‚Äî ver / mirar ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>teach ‚Äî ense√±ar ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>kiss ‚Äî besar ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>lock ‚Äî cerrar con llave ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"></div><div class="column">destroy ‚Äî destruir ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>share ‚Äî compartir ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>slip ‚Äî resbalar ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>hug ‚Äî abrazar ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>get ‚Äî conseguir / obtener ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>jump ‚Äî saltar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>believe ‚Äî creer ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">feel ‚Äî sentir ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>improve ‚Äî mejorar ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>measure ‚Äî medir ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>discuss ‚Äî discutir ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>last ‚Äî durar ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>play ‚Äî jugar / tocar (instrumento) ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-4')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-4')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-5" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">5</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-5-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-5-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-5-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-5-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-5-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-5-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-5-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-5-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-5-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">inform ‚Äî informar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>like ‚Äî gustar ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>try ‚Äî intentar ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>tap ‚Äî tocar (ligeramente) ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>know ‚Äî saber / conocer ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>have ‚Äî tener ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>marry ‚Äî casarse ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">go ‚Äî ir ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>learn ‚Äî aprender ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>kick ‚Äî patear ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>chat ‚Äî charlar ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>miss ‚Äî echar de menos / perder ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>inject ‚Äî inyectar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>cut ‚Äî cortar ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"></div><div class="column">carry ‚Äî llevar ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>see ‚Äî ver ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>turn ‚Äî girar / dar la vuelta ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>copy ‚Äî copiar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>make ‚Äî hacer ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>give ‚Äî dar ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-5')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-5')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-6" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">6</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-6-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-6-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-6-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-6-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-6-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-6-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-6-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-6-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-6-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">cook ‚Äî cocinar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>spend ‚Äî gastar / pasar (tiempo) ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>use ‚Äî usar ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>leave ‚Äî dejar / irse ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>snap ‚Äî chasquear / romper de golpe ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>travel ‚Äî viajar ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>follow ‚Äî seguir ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">jog ‚Äî trotar ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>say ‚Äî decir ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>lie ‚Äî mentir ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>do ‚Äî hacer ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>matter ‚Äî importar ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>ask ‚Äî preguntar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>imagine ‚Äî imaginar ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">happen ‚Äî pasar / ocurrir ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>relax ‚Äî relajarse ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>plan ‚Äî planear ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>sing ‚Äî cantar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>read ‚Äî leer ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>invite ‚Äî invitar ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-6')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-6')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-7" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">7</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-7-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-7-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-7-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-7-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-7-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-7-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-7-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-7-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-7-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">glow ‚Äî brillar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>close ‚Äî cerrar ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>drag ‚Äî arrastrar ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>irritate ‚Äî irritar ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>annoy ‚Äî molestar ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>laugh ‚Äî re√≠r(se) ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>talk ‚Äî hablar ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"></div><div class="column">handle ‚Äî manejar / tratar ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>manage ‚Äî gestionar / manejar ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>stop ‚Äî parar ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>melt ‚Äî derretir(se) ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>answer ‚Äî responder ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>keep ‚Äî guardar / mantener ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>prepare ‚Äî preparar ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">joke ‚Äî bromear ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>change ‚Äî cambiar ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>borrow ‚Äî pedir prestado ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>draw ‚Äî dibujar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>step ‚Äî pisar / dar un paso ‚Üí <span class="gap-label" aria-hidden="true">37</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">38</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>display ‚Äî demostrar ‚Üí <span class="gap-label" aria-hidden="true">39</span><input type="text" class="gap" data-answer="üü¶V-y + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">40</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-7')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-7')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><div id="block-8" class="gap-block" data-type="GAP" data-points="1" data-lock-on-check="false" style="--img-max-height:100px;">
            <div class="exercise-header">
                <span class="exercise-number">8</span>
                <div class="exercise-instruction">Indica c√≥mo se forma al participio pasado para el Past Simple Tense y como se pronuncia la terminaci√≥n. Mira las explicaciones abajo.</div>
            </div>
            <div class="exercise-example">EJEMPLO: open ‚Äî abrir ‚Üí <span class='example-answer'>üü¶ + ed</span> = üëÇüèª <span class='example-answer'>/d/</span></div>
<div class="exercise-example"></div><div class="exercise-main pool-pos-top"><div class="pool" data-role="pool" data-pool-mode="interact" data-pool-visual="sticky" data-interact-mode="reuse"><span class="pool-element sticky" data-token="block-8-h1" tabindex="0">üü¶ + C + ed</span><span class="pool-element sticky" data-token="block-8-h2" tabindex="0">üü¶C-i + ed</span><span class="pool-element sticky" data-token="block-8-h3" tabindex="0">üü¶V-y + ed</span><span class="pool-element sticky" data-token="block-8-h4" tabindex="0">üü¶ + d</span><span class="pool-element sticky" data-token="block-8-h5" tabindex="0">üü¶ + ed</span><span class="pool-element sticky" data-token="block-8-h6" tabindex="0">‚ùå</span><span class="pool-element sticky" data-token="block-8-h7" tabindex="0">id</span><span class="pool-element sticky" data-token="block-8-h8" tabindex="0">d</span><span class="pool-element sticky" data-token="block-8-h9" tabindex="0">t</span></div><div class="columns-block" style="--cols-template:repeat(3, 1fr);"><div class="column">level ‚Äî nivelar ‚Üí <span class="gap-label" aria-hidden="true">1</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">2</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>want ‚Äî querer ‚Üí <span class="gap-label" aria-hidden="true">3</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">4</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>join ‚Äî unirse ‚Üí <span class="gap-label" aria-hidden="true">5</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">6</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>–∑–∞–ø–∏—Å–∞—Ç—å—Å—è ‚Äî inscribirse / apuntarse ‚Üí <span class="gap-label" aria-hidden="true">7</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">8</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>knock ‚Äî llamar (a la puerta) / golpear ‚Üí <span class="gap-label" aria-hidden="true">9</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">10</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>love ‚Äî amar / encantar ‚Üí <span class="gap-label" aria-hidden="true">11</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">12</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">decide ‚Äî decidir ‚Üí <span class="gap-label" aria-hidden="true">13</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">14</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>pay ‚Äî pagar ‚Üí <span class="gap-label" aria-hidden="true">15</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">16</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>mend ‚Äî arreglar / remendar ‚Üí <span class="gap-label" aria-hidden="true">17</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">18</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>influence ‚Äî influir ‚Üí <span class="gap-label" aria-hidden="true">19</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">20</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>wait ‚Äî esperar ‚Üí <span class="gap-label" aria-hidden="true">21</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">22</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>disagree ‚Äî estar en desacuerdo ‚Üí <span class="gap-label" aria-hidden="true">23</span><input type="text" class="gap" data-answer="üü¶ + d" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">24</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div><div class="column">drop ‚Äî dejar caer / soltar ‚Üí <span class="gap-label" aria-hidden="true">25</span><input type="text" class="gap" data-answer="üü¶ + C + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">26</span><input type="text" class="gap" data-answer="/t/" style="width: 4ch" data-gap-min="4"><br>come ‚Äî venir ‚Üí <span class="gap-label" aria-hidden="true">27</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">28</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>write ‚Äî escribir ‚Üí <span class="gap-label" aria-hidden="true">29</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">30</span><input type="text" class="gap" data-answer="‚ùå" style="width: 4ch" data-gap-min="4"><br>visit ‚Äî visitar ‚Üí <span class="gap-label" aria-hidden="true">31</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">32</span><input type="text" class="gap" data-answer="/id/" style="width: 4ch" data-gap-min="4"><br>multiply ‚Äî multiplicar ‚Üí <span class="gap-label" aria-hidden="true">33</span><input type="text" class="gap" data-answer="üü¶C-i + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">34</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"><br>kill ‚Äî matar ‚Üí <span class="gap-label" aria-hidden="true">35</span><input type="text" class="gap" data-answer="üü¶ + ed" style="width: 4ch" data-gap-min="4"> = üëÇüèª <span class="gap-label" aria-hidden="true">36</span><input type="text" class="gap" data-answer="/d/" style="width: 4ch" data-gap-min="4"></div></div></div><div class='exercise-footer'>  <div class='exercise-footer-row'>    <div class='exercise-buttons'><button class='count-btn' onclick="countAnswers('block-8')" title='Count' aria-label='Count'><span class='material-symbols-outlined'>check_circle</span></button> <button class='check-btn' onclick="checkAnswers('block-8')" style='display:none' title='Check' aria-label='Check'><span class='material-symbols-outlined'>search</span></button></div>  </div>  <div class='exercise-separator'>    <div class='exercise-progress-track'>      <div class='exercise-progress-bar'>        <div class='exercise-progress-fill'></div>        <div class='exercise-progress-icon' aria-hidden='true'>üòâ</div>      </div>      <div class='exercise-progress-scale' aria-hidden='true'></div>    </div>  </div></div></div><script>
window.APP_CONFIG = window.APP_CONFIG || {};
window.APP_CONFIG.speech_lang = "en-US";
/* ======================================================================
   APP.JS ‚Äî Exercise Engine
   ====================================================================== */

// ======================================================================
// ==================== FUNDAMENTALS
// ======================================================================

//#region GLOBALS
window.KEYS_MAP = window.KEYS_MAP || {};
window.BLOCK_CFG = window.BLOCK_CFG || {};
const SPEECH_RECO_LANG = (window.APP_CONFIG && window.APP_CONFIG.speech_lang) || document.documentElement.lang || 'en-US';
//#endregion
// ======================================================================

//#region UTILS: normalization & comparison
function normalize(text) {
    return text
        .toLowerCase()
        .replace(/\\bwon't\\b/g, 'will not')
        .replace(/\\b(\\w+)'s got\\b/g, '$1 has got')
        .replace(/n't\\b/g, ' not')
        .replace(/'re\\b/g, ' are')
        .replace(/'m\\b/g, ' am')
        .replace(/'ve\\b/g, ' have')
        .replace(/[.,!?;:()\\[\\]'"‚Äú‚Äù‚Äò‚Äô]/g, '')
        .replace(/\\s+/g, ' ')
        .trim();
}

function canonMulti(s) {
    return String(s ?? '')
        .split('/')
        .map(x => x.trim())
        .filter(Boolean)
        .sort((a,b) => a.localeCompare(b))
        .join('/');
}

function isCorrect(user, correct) {
    const normUser = normalize(user);
    const variants = correct.split("/").map(v => normalize(v));
    return variants.includes(normUser);
}

//#endregion
// ======================================================================

//#region BOOTSTRAPPING KEYS/UNITS
function bootstrapAnsAndKeys() {
    document.querySelectorAll('[data-points]').forEach(block => {
        const blockId = block.id;
        if (!blockId) return;

        // –ö–æ–Ω—Ñ–∏–≥ –±–ª–æ–∫–∞ (–æ—á–∫–∏/–ª–æ–∫). –î–µ—Ñ–æ–ª—Ç –¥–ª—è lockOnCheck = false,
        // –µ—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç –Ω–µ –∑–∞–¥–∞–ª–∏ –≤ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–ª–æ–∫–∞.
        const hasAttr = Object.prototype.hasOwnProperty.call(block.dataset, 'lockOnCheck');
        window.BLOCK_CFG[blockId] = {
            points: +(block.dataset.points||0),
            lockOnCheck: String(hasAttr ? block.dataset.lockOnCheck : 'false').toLowerCase()==='true'
        };

        if (!window.KEYS_MAP[blockId]) window.KEYS_MAP[blockId] = {};

        // --- GAP: input/textarea —Å data-answer ‚Üí .ans + –∫–ª—é—á–∏
        const gapInputs = block.querySelectorAll('input.gap[data-answer], textarea.gap[data-answer]');
        if (gapInputs.length) {
            let idx = 0;
            gapInputs.forEach(inp => {
                idx++;
                // –æ–±—ë—Ä—Ç–∫–∞ .ans
                let ansWrap = inp.closest('.ans[data-uid]');
                if (!ansWrap) {
                    ansWrap = document.createElement('span');
                    ansWrap.className = 'ans';
                    ansWrap.dataset.uid = `U${idx}`;
                    ansWrap.dataset.method = 'input-based';
                    inp.parentNode.insertBefore(ansWrap, inp);
                    ansWrap.appendChild(inp);
                }
                const uid = ansWrap.dataset.uid;
                // –∫–ª—é—á–∏-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
                const exp = (inp.dataset.answer||'').split('/').map(s=>normalize(s.trim())).filter(Boolean);
                window.KEYS_MAP[blockId][uid] = exp.length>1 ? exp : (exp[0]||'');
            });
        }

        // --- MCQINLINE: –∫–∞–∂–¥–∞—è .click-group ‚Üí –æ–¥–∏–Ω —é–Ω–∏—Ç .ans + –∫–ª—é—á
        const groups = block.querySelectorAll('.click-group');
        if (groups.length) {
            const answers = (block.dataset.answers||'').split(',').map(s=>s.trim());
            groups.forEach((grp, i) => {
                let ansWrap = grp.closest('.ans[data-uid]');
                if (!ansWrap) {
                    ansWrap = document.createElement('span');
                    ansWrap.className = 'ans';
                    ansWrap.dataset.uid = `U${i+1}`;
                    ansWrap.dataset.method = 'single-click';
                    grp.parentNode.insertBefore(ansWrap, grp);
                    ansWrap.appendChild(grp);
                }
                const uid = ansWrap.dataset.uid;
                const exp = (answers[i]||'').trim();
                if (exp) window.KEYS_MAP[blockId][uid] = exp;
            });
        }

        // --- MATCHIMG: –∫–∞–∂–¥—ã–π .matched-phrase ‚Üí —é–Ω–∏—Ç .ans + –∫–ª—é—á
        const targets = block.querySelectorAll('.matched-phrase[data-answer]');
        if (targets.length) {
          let idx2 = 0;
          targets.forEach(t => {
            idx2++;
            // –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ .ans (–±–µ–∑ –æ–±—ë—Ä—Ç–æ–∫, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –≤—ë—Ä—Å—Ç–∫—É)
            if (!t.classList.contains('ans')) {
              t.classList.add('ans');
              t.dataset.uid = `M${idx2}`;
              t.dataset.method = 'pairing-click'; // —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç —Ñ—Ä–∞–∑—ã
            }
            const uid = t.dataset.uid;
            const exp = (t.dataset.answer || '').trim();
            if (exp) window.KEYS_MAP[blockId][uid] = exp;

            // –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—É—Å—Ç–æ–µ (–ø–æ–∫–∞ –Ω–µ –≤—ã–±—Ä–∞–ª–∏ —Ñ—Ä–∞–∑—É)
            if (!t.dataset.val) t.dataset.val = '';
          });
        }

        // MCQ: –ø–µ—Ä–µ–Ω–æ—Å–∏–º data-expected –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –≤ KEYS_MAP
        // (–≤–æ–ø—Ä–æ—Å—ã –±–µ–∑ data-expected –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ –ø–æ–¥—Å—á—ë—Ç–∞ –∏ —Å—é–¥–∞ –Ω–µ –ø–æ–ø–∞–¥—É—Ç)
        (function() {
            const blocks = document.querySelectorAll(
                '.mcq-block[data-type="MCQ"], .mcqgap-block[data-type="MCQGAP"], .mcqgaps-block[data-type="MCQGAPS"]'
            );
            blocks.forEach(block => {
                const blockId = block.id || '';
                if (!blockId) return;
                const qs = block.querySelectorAll('.ans[data-uid]');
                qs.forEach(q => {
                    const uid = q.dataset.uid;
                    const exp = (q.dataset.expected || '').trim();
                    if (uid && exp) {
                        if (!window.KEYS_MAP[blockId]) window.KEYS_MAP[blockId] = {};
                        window.KEYS_MAP[blockId][uid] = exp;
                }
                });
            });
        })();

        // (–ù–∞ –±—É–¥—É—â–µ–µ: start-end-click / pairing-click –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ)
    });
}
//#endregion
// ======================================================================




// ======================================================================
// ==================== INPUT
// ======================================================================

//#region INTERACTIVE POOL
// POOL CROSS_OUT
try {
    document.addEventListener('click', function(e) {
        const el = e.target.closest('.pool-element');
        if (!el) return;

        const pool = el.closest('.pool');
        if (!pool) return;

        const mode = String(pool.dataset.poolMode || '')
            .trim()
            .toLowerCase()
            .replace(/-/g, '_');

        if (!mode) return;
        
        if (mode === 'cross_out') {
            el.classList.toggle('crossed-out');
            return;
        }

        if (mode === 'interact') {
            // –ù–∏—á–µ–≥–æ: "interact" –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–¥–∞–ø—Ç–µ—Ä–æ–º GAP –Ω–∏–∂–µ.
            return;
        }
    });

    // keyboard accessibility: Space/Enter toggles like click
    document.addEventListener('keydown', function(e) {
        if ((e.key !== ' ' && e.key !== 'Enter')) return;
        const target = e.target;
        if (!target || !target.classList || !target.classList.contains('pool-element')) return;
        e.preventDefault();
        target.click();
    });
} catch (err) {
    console.error('Pool init error:', err);
}

// POOL INTERACT
(function() {   // –í—Å—è –ª–æ–≥–∏–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –±–ª–æ–∫–∞
    const STATE = new Map();  // –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º (–ø–æ –æ–¥–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É –Ω–∞ –±–ª–æ–∫)

    function getState(container) {  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (–∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç) —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        if (!STATE.has(container)) {
        STATE.set(container, {
            activeTokenId: null,           // id —Ç–µ–∫—É—â–µ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—É–ª–∞
            elementByToken: new Map(),     // token ‚Üí DOM-—ç–ª–µ–º–µ–Ω—Ç –ø—É–ª–∞
            elementByKey: new Map(),   // key (—Å–ª–æ–≤–æ) ‚Üí DOM-—ç–ª–µ–º–µ–Ω—Ç (–¥–ª—è group)
            placedByInput: new Map(),      // input ‚Üí token (–∫–∞–∫–æ–π —Ç–æ–∫–µ–Ω —Å–µ–π—á–∞—Å —Å—Ç–æ–∏—Ç –≤ —ç—Ç–æ–º –ø–æ–ª–µ) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ consume
            disabled: false,               // —Ñ–ª–∞–≥ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∞–¥–∞–ø—Ç–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ lockExercise)
            interactMode: "consume",       // "consume" (—Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ) –∏–ª–∏ "reuse" (–Ω–æ–≤–æ–µ)
        });
        }
        return STATE.get(container);
    }

    function initInteractiveGAP(container) {  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö GAP –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –±–ª–æ–∫–∞
        const pool = container.querySelector('.pool[data-pool-mode="interact"]');  // –ò—â–µ–º –ø—É–ª —Å —Ä–µ–∂–∏–º–æ–º interact
        if (!pool) return;  // –ï—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –ø—É–ª–∞ –Ω–µ—Ç, —ç—Ç–æ—Ç –±–ª–æ–∫ –Ω–∞–º –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω

        const st = getState(container);  // –ë–µ—Ä—ë–º (–∏–ª–∏ —Å–æ–∑–¥–∞—ë–º) —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–¥—Ä–µ–∂–∏–º: consume | reuse
        const rawMode = (pool.dataset.interactMode || "consume").toLowerCase();
        st.interactMode = (rawMode === "reuse") ? "reuse"
                    : (rawMode === "group") ? "group"
                    : "consume";

        // 1) –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø—É–ª–∞
        pool.querySelectorAll('.pool-element').forEach(el => {
        const tok = el.getAttribute('data-token') || Math.random().toString(36).slice(2);  // –ë–µ—Ä—ë–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π token –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π
        el.setAttribute('data-token', tok);                                                // –°–æ—Ö—Ä–∞–Ω—è–µ–º token –≤ –∞—Ç—Ä–∏–±—É—Ç–µ
        st.elementByToken.set(tok, el);                                                    // –ò –≤ –∫–∞—Ä—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
        if (st.interactMode === "group") {
            const key = String(el.dataset.key || "").trim();
            if (key) st.elementByKey.set(key, el);
        }
        });

        // 2) –ü–æ–º–µ—á–∞–µ–º –ø–æ–ª—è GAP –∏ –¥–µ–ª–∞–µ–º –∏—Ö readonly –≤–Ω—É—Ç—Ä–∏ –≠–¢–û–ì–û –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        container.querySelectorAll('input.gap').forEach(inp => {
        inp.readOnly = true;                 // –ü–æ–ª–µ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        inp.classList.add('gap-targetable'); // –ù–æ —è–≤–ª—è–µ—Ç—Å—è ¬´–º–∏—à–µ–Ω—å—é¬ª –¥–ª—è –ø—É–ª–∞ (–ø–æ–∫–∞ –º—ã –Ω–µ —Å–Ω–∏–º–µ–º —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ)
        });

        // 3) –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª–∏–∫ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º –ø—É–ª–∞ ‚Äî –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω
        pool.addEventListener('click', function(e) {
        if (st.disabled) return;                                     // –ï—Å–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –æ—Ç–∫–ª—é—á—ë–Ω ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
        const el = e.target.closest('.pool-element');                // –ò—â–µ–º –±–ª–∏–∂–∞–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç –ø—É–ª–∞
        if (!el) return;                                             // –ö–ª–∏–∫ –º–∏–º–æ ‚Äî –≤—ã—Ö–æ–¥–∏–º

        // –°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –≤ –ø—É–ª–µ
        pool.querySelectorAll('.pool-element.selected').forEach(x => x.classList.remove('selected'));

        // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π
        el.classList.add('selected');
        st.activeTokenId = (st.interactMode === "group")
        ? String(el.dataset.key || "").trim()
        : el.getAttribute('data-token');
        });

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ GAP –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ —á—É–≤—Å—Ç–≤–æ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã/–∞–≤—Ç–æ—Å–∞–π–∑–µ—Ä
        function applyValueToGap(target, value) {
        target.value = value;
        if (value) {
            target.classList.add('input-plug-gap');
        } else {
            target.classList.remove('input-plug-gap');
        }

        // üîÑ –ï—Å–ª–∏ –¥–æ —ç—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç –±—ã–ª WRONG ‚Äî –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –ø–æ–ø—ã—Ç–∫—É (ATTEMPT)
        const ans = target.closest('.ans[data-uid]');
        if (ans && ans.dataset.state === 'wrong') {
            ans.dataset.state = 'attempt';
            target.classList.add('answer-attempt');
            try { removeGapWrongIcon(target); } catch(_e) {}
            if (ans.dataset.visualLocked === '1') {
                delete ans.dataset.visualLocked;
            }
        }

        // –£–≤–µ–¥–æ–º–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –æ —Å–º–µ–Ω–µ –∑–Ω–∞—á–µ–Ω–∏—è (–¥–ª—è count/check –∏ –∞–≤—Ç–æ—Ä–∞–∑–º–µ—Ä–∞)
        try { target.dispatchEvent(new Event('input',  { bubbles: true })); } catch(e) {}
        try { target.dispatchEvent(new Event('change', { bubbles: true })); } catch(e) {}

        // –ï—Å–ª–∏ –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ—Å–∞–π–∑–µ—Ä ‚Äî –¥–µ—Ä–Ω—ë–º —è–≤–Ω–æ
        try { if (typeof autosizeInputs === 'function') autosizeInputs(container); } catch(e) {}
        }

        function updateGroupBadge(el, n) {
        // n —É–∂–µ –∑–∞–ø–∏—Å–∞–Ω –≤ data-count
        const badge = el.querySelector('.count-badge');
        if (n >= 2) {
            if (badge) badge.textContent = '√ó' + n;
            else {
            const b = document.createElement('span');
            b.className = 'count-badge';
            b.textContent = '√ó' + n;
            el.appendChild(b);
            }
        } else {
            if (badge) badge.remove();
        }
        }

        function decGroup(key) {
        const el = st.elementByKey.get(key);
        if (!el) return;
        let n = Number(el.dataset.count || '1');
        n = n - 1;
        if (n <= 0) {
            // –µ—Å–ª–∏ —ç—Ç–æ –±—ã–ª –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç ‚Äî —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä
            if (st.activeTokenId === key) st.activeTokenId = null;
            el.classList.remove('selected');
            const tok = el.getAttribute('data-token');
            if (tok) st.elementByToken.delete(tok);
            el.remove();
            st.elementByKey.delete(key);
            return;
        }
        el.dataset.count = String(n);
        updateGroupBadge(el, n);
        }

        function incGroup(key) {
        let el = st.elementByKey.get(key);

        if (!el) {
            // —ç–ª–µ–º–µ–Ω—Ç –±—ã–ª "–ø–æ—Ç—Ä–∞—á–µ–Ω" –¥–æ 0 ‚Äî —Å–æ–∑–¥–∞—ë–º –∑–∞–Ω–æ–≤–æ
            const visual = (pool.dataset.poolVisual || '').toLowerCase();
            const cls = 'pool-element' + (visual === 'sticky' ? ' sticky' : '');

            el = document.createElement('span');
            el.className = cls;
            el.tabIndex = 0;
            el.dataset.token = Math.random().toString(36).slice(2);
            el.dataset.key = key;
            el.dataset.count = '1';
            el.textContent = key;

            pool.appendChild(el);
            st.elementByKey.set(key, el);
            st.elementByToken.set(el.dataset.token, el);
            return;
        }

        let n = Number(el.dataset.count || '1');
        n = n + 1;
        el.dataset.count = String(n);
        updateGroupBadge(el, n);
        }

        // 4) –ö–ª–∏–∫ –ø–æ –ø–æ–ª—é GAP ‚Äî –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
        container.addEventListener('click', function(e) {
        if (st.disabled) return;                                     // –ê–¥–∞–ø—Ç–µ—Ä –æ—Ç–∫–ª—é—á—ë–Ω —Ü–µ–ª–∏–∫–æ–º
        const target = e.target;
        if (!target || !target.classList || !target.classList.contains('gap')) return;     // –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ .gap
        if (!target.classList.contains('gap-targetable')) return;                           // üîí –ü–æ–ª–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª—å—é –¥–ª—è –ø—É–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ) ‚Üí –≤—ã—Ö–æ–¥–∏–º

        const tok = st.activeTokenId;
        if (!tok) return;

        let el = null;
        let val = "";

        if (st.interactMode === "group") {
        const key = String(tok || "").trim();
        el = st.elementByKey.get(key);
        if (!el) return;
        val = key; // –≤–∞–∂–Ω–æ: –Ω–µ –±–µ—Ä—ë–º textContent (—Ç–∞–º –±—É–¥–µ—Ç √óN)
        } else {
        el = st.elementByToken.get(tok);
        if (!el) return;
        val = (el.textContent || '').trim();
        }

        if (st.interactMode === 'group') {
        const key = String(tok || '').trim();

        // –µ—Å–ª–∏ –≤ –ø–æ–ª–µ —É–∂–µ —Å—Ç–æ—è–ª–æ —Å–ª–æ–≤–æ –∏–∑ –ø—É–ª–∞ ‚Äî –≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ –ø—É–ª
        if (st.placedByInput.has(target)) {
            const prevKey = st.placedByInput.get(target);
            if (prevKey) incGroup(prevKey);
        }

        // "–ø–æ—Ç—Ä–∞—Ç–∏—Ç—å" –≤—ã–±—Ä–∞–Ω–Ω–æ–µ
        decGroup(key);

        applyValueToGap(target, val);

        // –∑–∞–ø–æ–º–∏–Ω–∞–µ–º, —á—Ç–æ –≤ —ç—Ç–æ–º –ø–æ–ª–µ —Å—Ç–æ–∏—Ç KEY
        st.placedByInput.set(target, key);

        // —Å–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä, –∫–∞–∫ –≤ consume (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –º–∞—Å—Å–æ–≤–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏)
        st.activeTokenId = null;
        return;
        }

        if (st.interactMode === 'consume') {
            // ===== –°–¢–ê–†–û–ï –ü–û–í–ï–î–ï–ù–ò–ï: —ç–ª–µ–º–µ–Ω—Ç ¬´—Ç—Ä–∞—Ç–∏—Ç—Å—è¬ª =====

            // –ï—Å–ª–∏ –≤ –ø–æ–ª–µ —É–∂–µ —Å—Ç–æ—è–ª —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –ø—É–ª–∞ ‚Äî –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–µ–∂–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–∑–∞–¥
            if (st.placedByInput.has(target)) {
            const prevTok = st.placedByInput.get(target);
            const prevEl  = st.elementByToken.get(prevTok);
            if (prevEl) {
                prevEl.style.display = '';                           // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø—É–ª–µ
                prevEl.classList.remove('selected');                 // –ò —Å–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            }
            }

            // –í–∑—è—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏ ¬´—É–±—Ä–∞—Ç—å¬ª –µ–≥–æ –∏–∑ –ø—É–ª–∞ (–≤–∏–∑—É–∞–ª—å–Ω–æ)
            el.style.display = 'none';                               // –ü—Ä—è—á–µ–º –ø–ª–∞—à–∫—É –∏–∑ –ø—É–ª–∞
            el.classList.remove('selected');                         // –°–Ω–∏–º–∞–µ–º —Å –Ω–µ—ë –≤—ã–¥–µ–ª–µ–Ω–∏–µ

            applyValueToGap(target, val);                            // –ó–∞–ø–∏—Å–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–æ–ª–µ

            // –ó–∞–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —ç—Ç–æ –ø–æ–ª–µ —Å–µ–π—á–∞—Å –∑–∞–Ω—è—Ç–æ —Ç–æ–∫–µ–Ω–æ–º tok
            st.placedByInput.set(target, tok);
            // –ê–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–±—Ä–æ—Å–∏—Ç—å (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å–ª—É—á–∞–π–Ω–æ–π –º–∞—Å—Å–æ–≤–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏)
            st.activeTokenId = null;
        } else {
            // ===== –ù–û–í–û–ï –ü–û–í–ï–î–ï–ù–ò–ï: REUSE (—ç–ª–µ–º–µ–Ω—Ç –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è) =====
            // –ù–∏—á–µ–≥–æ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ–º, –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ.
            // –ï—Å–ª–∏ —Ä–∞–Ω—å—à–µ –≤ st.placedByInput —á—Ç–æ-—Ç–æ –±—ã–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã —Ä–µ–∂–∏–º–∞) ‚Äî –æ—á–∏—â–∞–µ–º.
            if (st.placedByInput.has(target)) {
            st.placedByInput.delete(target);
            }
            applyValueToGap(target, val);
            // –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–∫–µ–Ω –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º: –º–æ–∂–Ω–æ –ø–æ–¥—Ä—è–¥ –∑–∞–ø–æ–ª–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º.
        }
        });

        // 5) –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è: dblclick –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
        container.addEventListener('dblclick', function(e) {
        if (st.disabled) return;
        const target = e.target;
        if (!target || !target.classList || !target.classList.contains('gap')) return;
        if (!target.classList.contains('gap-targetable')) return;    // üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ) –ø–æ–ª—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º

        if (st.interactMode === 'reuse') {
            // –í —Ä–µ–∂–∏–º–µ REUSE –ø—Ä–æ—Å—Ç–æ –æ—á–∏—â–∞–µ–º –ø–æ–ª–µ, –ø—É–ª –Ω–µ —Ç—Ä–æ–≥–∞–µ–º
            if (!target.value) return;
            applyValueToGap(target, '');
            return;
        }

        if (st.interactMode === 'group') {
        if (!st.placedByInput.has(target)) return;
        const key = st.placedByInput.get(target);
        if (key) incGroup(key);
        st.placedByInput.delete(target);
        applyValueToGap(target, '');
        return;
        }

        // –†–µ–∂–∏–º CONSUME: –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ –ø—É–ª
        if (!st.placedByInput.has(target)) return;                   // –í –ø–æ–ª–µ –Ω–µ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ ‚Äî –Ω–µ—á–µ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å

        const tok = st.placedByInput.get(target);
        const el = st.elementByToken.get(tok);
        if (el) {
            el.style.display = '';                                   // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–∞—à–∫—É —Å–Ω–æ–≤–∞ –≤ –ø—É–ª–µ
        }
        st.placedByInput.delete(target);                             // –£–±–∏—Ä–∞–µ–º —Å–≤—è–∑—å input ‚Üí token
        applyValueToGap(target, '');                                 // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ
        });

        // 6) –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö: long-press (600 –º—Å)
        let touchTimer = null;
        container.addEventListener('touchstart', function(e) {
        if (st.disabled) return;
        const t = e.target;
        if (!t || !t.classList || !t.classList.contains('gap')) return;
        if (!t.classList.contains('gap-targetable')) return;         // üîí –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è

        touchTimer = setTimeout(() => {
            // long-press —Å—Ä–∞–±–æ—Ç–∞–ª
            if (st.interactMode === 'reuse') {
            if (!t.value) return;
            applyValueToGap(t, '');
            return;
            }

            // –†–µ–∂–∏–º GROUP
            if (st.interactMode === 'group') {
            if (!st.placedByInput.has(t)) return;
            const key = st.placedByInput.get(t);
            if (key) incGroup(key);
            st.placedByInput.delete(t);
            applyValueToGap(t, '');
            return;
            }


            // –†–µ–∂–∏–º CONSUME
            if (!st.placedByInput.has(t)) return;
            const tok = st.placedByInput.get(t);
            const el = st.elementByToken.get(tok);
            if (el) el.style.display = '';                           // –í–µ—Ä–Ω—É—Ç—å –ø–ª–∞—à–∫—É –≤ –ø—É–ª
            st.placedByInput.delete(t);                              // –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É
            applyValueToGap(t, '');                                  // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ
        }, 600);  // 600 –º—Å —É–¥–µ—Ä–∂–∞–Ω–∏—è
        }, { passive: true });

        container.addEventListener('touchend', function() {
        if (touchTimer) {
            clearTimeout(touchTimer);                                // –ï—Å–ª–∏ –ø–∞–ª–µ—Ü —É–±—Ä–∞–ª–∏ —Ä–∞–Ω—å—à–µ 600 –º—Å ‚Äî long-press –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è
            touchTimer = null;
        }
        }, { passive: true });
    }

    // –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ —Å pool_mode="interact"
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('[data-points]').forEach(initInteractiveGAP);
    });
})();
//#endregion
// ======================================================================

//#region INPUT & MCQ INTERACTIONS (—Å–ª—É—à–∞—Ç–µ–ª–∏ –∫–ª–∏–∫–æ–≤/–≤–≤–æ–¥–∞)
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø: –ø–æ–º–µ—á–∞–µ–º –≤—Å–µ ¬´—è—á–µ–π–∫–∏ –æ—Ç–≤–µ—Ç–∞¬ª –∫–ª–∞—Å—Å–æ–º .answer
document.addEventListener('DOMContentLoaded', () => {
    // === 1) –ü–æ–º–µ—á–∞–µ–º –ø–æ–ª—è GAP, textarea.gap –∏ plug-gap –∫–∞–∫ "–º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–≤–µ—Ç–∞" ===
    document.querySelectorAll('input.gap, textarea.gap, .plug-gap').forEach((field) => {
        field.classList.add('answer');              // –±–∞–∑–æ–≤—ã–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π –≤–∏–¥ ¬´—è—á–µ–π–∫–∏ –æ—Ç–≤–µ—Ç–∞¬ª
    });

    // === 2) –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –≤–≤–æ–¥ –≤ GAP: —Å—Ç–∞–≤–∏–º/—Å–Ω–∏–º–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ ATTEMPT ===
    document.addEventListener('input', (e) => {
        const field = e.target;                          // —ç–ª–µ–º–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏–¥—ë—Ç –≤–≤–æ–¥
        if (!field.matches('input.gap')) return;         // –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ GAP-–∏–Ω–ø—É—Ç—ã

        const ans = field.closest('.ans[data-uid]');     // –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-—é–Ω–∏—Ç –æ—Ç–≤–µ—Ç–∞
        if (!ans) return;

        const val = field.value.trim();                  // –≤–≤–µ–¥—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –ø–æ –∫—Ä–∞—è–º

        if (val) {
            // –ï—Å—Ç—å —Ç–µ–∫—Å—Ç ‚Üí —ç—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ (ATTEMPT)
            field.classList.add('answer-attempt');       // –≤–∏–∑—É–∞–ª—å–Ω–æ: –∫—É—Ä—Å–∏–≤ + —Å–∏–Ω—è—è –ª–∏–Ω–∏—è
            // –ï—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –µ—â—ë –Ω–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –∫–∞–∫ correct/wrong/revealed ‚Äî
            // –ø–æ–º–µ—á–∞–µ–º, —á—Ç–æ —ç—Ç–æ –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞
            if (!ans.dataset.state ||
                ans.dataset.state === 'unanswered' ||
                ans.dataset.state === 'attempt') {
                ans.dataset.state = 'attempt';
            }
        } else {
            // –¢–µ–∫—Å—Ç —Å—Ç–µ—Ä–ª–∏ ‚Üí –ø–æ–ª–µ —Å–Ω–æ–≤–∞ "–ø—É—Å—Ç–æ–µ"
            field.classList.remove('answer-attempt');    // —É–±–∏—Ä–∞–µ–º —Å—Ç–∏–ª–∏ –ø–æ–ø—ã—Ç–∫–∏
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ unanswered, –µ—Å–ª–∏ –Ω–µ –±—ã–ª–æ –¥—Ä—É–≥–æ–≥–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            if (!ans.dataset.state || ans.dataset.state === 'attempt') {
                ans.dataset.state = 'unanswered';
            }
        }
    });
});

// –ü—Ä–∏ –∫–ª–∏–∫–µ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π GAP-—Å–ª–æ—Ç: —É–±–∏—Ä–∞–µ–º –∫—Ä–∞—Å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º attempt
// –°–±—Ä–æ—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è WRONG ‚Üí ATTEMPT –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –ø–æ–ª–µ GAP
document.addEventListener('focusin', (e) => {
    const field = e.target;
    if (!field.matches('input.gap, textarea.gap')) return;

    const ans = field.closest('.ans[data-uid]');
    if (!ans) return;

    // –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ WRONG –∏ –µ—â—ë —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã
    if (ans.dataset.state === 'wrong' && !field.readOnly) {
        // –ü–µ—Ä–µ–≤–æ–¥–∏–º –æ—Ç–≤–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏
        ans.dataset.state = 'attempt';

        // –í–Ω–µ—à–Ω–∏–π –≤–∏–¥: —É–±–∏—Ä–∞–µ–º –∫—Ä–∞—Å–Ω–æ–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏
        field.classList.add('answer-attempt');
        removeGapWrongIcon(field);

        // –†–∞–∑—Ä–µ—à–∞–µ–º COUNT —Å–Ω–æ–≤–∞ –º—è–≥–∫–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å —ç—Ç–∏–º –æ—Ç–≤–µ—Ç–æ–º
        if (ans.dataset.visualLocked === '1') {
            delete ans.dataset.visualLocked;
        }
    }
});

// single-click / multi-click: –∑–∞–ø–∏—Å—ã–≤–∞–µ–º .dataset.val, —Å–æ—Å—Ç–æ—è–Ω–∏–µ ATTEMPT/UNANSWERED
// –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º plug-gap –≤ MCQGAP / MCQGAPS —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π .answer / .answer-attempt
// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–ª–∏–∫ –ø–æ .click-option –¥–ª—è single-/multi-click
document.addEventListener('click', (e) => {
    const opt = e.target.closest('.click-option');                      // –∏—â–µ–º, –∫–ª–∏–∫–Ω—É–ª–∏ –ª–∏ –ø–æ –æ–ø—Ü–∏–∏
    if (!opt) return;

    const group = opt.closest('.click-group');                          // –≥—Ä—É–ø–ø–∞ –æ–ø—Ü–∏–π –æ–¥–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
    const ans   = group && group.closest('.ans[data-uid]');             // —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π .ans (–≤–æ–ø—Ä–æ—Å / —Å—Ç—Ä–æ–∫–∞)
    if (!group || !ans) return;

    const method = (ans.dataset.method || '').toLowerCase();            // 'single-click' | 'multi-click'
    if (method !== 'single-click' && method !== 'multi-click') return;  // –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã –Ω–∞—Å –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç

    // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç —É–∂–µ –±—ã–ª –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –ø–æ—Å–ª–µ CHECK / SHOW ANSWERS ‚Äî –∫–ª–∏–∫–æ–º –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –ø–æ–ø—ã—Ç–∫—É
    if (ans.dataset.visualLocked === '1') {
        delete ans.dataset.visualLocked;
    }

    // 1) –°–Ω–∏–º–∞–µ–º —Å—Ç–∞—Ä—É—é –ø–æ–¥—Å–≤–µ—Ç–∫—É (–ø–æ—Å–ª–µ Check/Correct) –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≠–¢–û–ô –≥—Ä—É–ø–ø—ã
    group.querySelectorAll('.click-option').forEach(o => {
        o.classList.remove(
            'click-correct','click-wrong','click-neutral',
            'correct-choice','wrong-choice',
            'answer-attempt'
        );
        const span = o.querySelector('.click-content');
        if (span) {
            span.classList.remove('answer', 'answer-attempt');
        }  
    });

    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è ¬´–∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ¬ª —Ç–µ–∫—Å—Ç–∞ –æ–ø—Ü–∏–∏
    const getCanonical = (el) => {
        const dataCanon = (el.getAttribute('data-canon') || '').trim(); // 1) data-canon (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (dataCanon) return dataCanon;
        const t = el.querySelector('.click-content');                   // 2) —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ .click-content
        return (t?.textContent || el.textContent || '').trim();         // 3) –∏–Ω–∞—á–µ –≤–µ—Å—å —Ç–µ–∫—Å—Ç —ç–ª–µ–º–µ–Ω—Ç–∞
    };

    // –ù–µ–±–æ–ª—å—à–æ–π –ø–æ–º–æ—â–Ω–∏–∫: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è plug-gap –≤ MCQGAP / MCQGAPS
    const syncPlugGap = (ansElt, values) => {
        const block = ansElt.closest('.mcqgap-block, .mcqgaps-block');   // –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä MCQGAP / MCQGAPS
        if (!block) return;

        const textValue = Array.isArray(values) ? values.join(' / ') : (values || '');
        const hasValue  = !!textValue.trim();

        if (block.classList.contains('mcqgap-block')) {
            // MCQGAP: —É –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –æ–¥–∏–Ω plug-gap –ø—Ä—è–º–æ –≤ —Å—Ç–µ–º–µ
            const plug = ansElt.querySelector('.plug-gap[data-plug="true"]');
            if (!plug) return;
            plug.textContent = textValue;
            plug.classList.toggle('answer-attempt', hasValue);          // –ø–æ–ø—ã—Ç–∫–∞ ‚Üí –∫—É—Ä—Å–∏–≤/—Ü–≤–µ—Ç —á–µ—Ä–µ–∑ .answer-attempt
            if (!hasValue) ansElt.dataset.state = 'unanswered';         // –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –æ—á–∏—Å—Ç–∏–ª–∏ –≤—ã–±–æ—Ä
        } else if (block.classList.contains('mcqgaps-block')) {
            // MCQGAPS: –≤–µ—Ä—Ö–Ω–∏–π —Ç–µ–∫—Å—Ç .mcqgaps-text + —Å—Ç—Ä–æ–∫–∏ .mcqgaps-row.ans[data-gap]
            const idx = String(ansElt.dataset.gap || '').trim();
            if (!idx) return;
            const top = block.querySelector('.mcqgaps-text');
            if (!top) return;
            const plug = top.querySelector(`.plug-gap[data-idx="${idx}"]`);
            if (!plug) return;
            plug.textContent = textValue;
            plug.classList.toggle('answer-attempt', hasValue);
            if (!hasValue) ansElt.dataset.state = 'unanswered';
        }
    };

    if (method === 'single-click') {                                   // --- SINGLE-CLICK: –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –æ–ø—Ü–∏—é ---
        const opts = group.querySelectorAll('.click-option');
        opts.forEach(o => {
            const isSel = (o === opt);                                  // —Ç–æ–ª—å–∫–æ –∫–ª–∏–∫–Ω—É—Ç–∞—è –æ–ø—Ü–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π
            o.classList.toggle('selected',   isSel);
            o.classList.toggle('unselected', !isSel);
            o.setAttribute('aria-checked', isSel ? 'true' : 'false');
            const span = o.querySelector('.click-content');             // –≤—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ø—ã—Ç–∫–æ–π
            if (span) {
                if (isSel) {
                    span.classList.add('answer', 'answer-attempt');
                } else {
                    span.classList.remove('answer-attempt');
                    span.classList.remove('answer');
                }
            }
        });

        const chosen = getCanonical(opt);                               // –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏
        ans.dataset.val = chosen;                                       // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        ans.dataset.state = chosen ? 'attempt' : 'unanswered';          // –µ—Å—Ç—å –≤—ã–±–æ—Ä ‚Üí attempt, –ø—É—Å—Ç–æ ‚Üí unanswered

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º plug-gap –≤ MCQGAP / MCQGAPS —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
        syncPlugGap(ans, chosen);

    } else if (method === 'multi-click') {                            // --- MULTI-CLICK: –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–π ---
        opt.classList.toggle('selected');
        opt.classList.toggle('unselected', !opt.classList.contains('selected'));
        opt.setAttribute('aria-checked', opt.classList.contains('selected') ? 'true' : 'false');

        const allOpts = Array.from(group.querySelectorAll('.click-option'));

        const selected = allOpts
            .filter(el => el.classList.contains('selected'))
            .map(el => getCanonical(el))
            .map(x => String(x || '').trim())
            .filter(Boolean)
            .sort((a,b) => a.localeCompare(b));

        // attempt-–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–ø—Ü–∏–π
        allOpts.forEach(el => {
            const span = el.querySelector('.click-content');
            const isSelected = el.classList.contains('selected');
            if (span) {
                span.classList.toggle('answer', isSelected);
                span.classList.toggle('answer-attempt', isSelected);
            }
        });

        // ‚úÖ –í–ê–ñ–ù–û: dataset.val –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ "/"
        ans.dataset.val = selected.join('/');
        ans.dataset.state = selected.length ? 'attempt' : 'unanswered';

        // –í plug-gap –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫—Ä–∞—Å–∏–≤—ã–π –≤–∏–¥ " / "
        syncPlugGap(ans, selected);
    }
});

//#endregion
// ======================================================================

//#region PAIRING-CLICK (for MATCHIMG)
    let selectedPhraseEl = null;

    function selectPhrase(el, blockId) {
        selectedPhraseEl = el;
        document.querySelectorAll(`#${blockId}-phrases .matchimg-phrase`).forEach(p => p.classList.remove("selected"));
        el.classList.add("selected");
    }
    
    function selectImage(blockId, imgNum) {
        if (!selectedPhraseEl) return;

        const selectedText = selectedPhraseEl.textContent;
        const selectedCorrect = selectedPhraseEl.getAttribute('data-answer') || '';

        // –µ—Å–ª–∏ –≤ —Å–ª–æ—Ç–µ —á—Ç–æ‚Äë—Ç–æ –µ—Å—Ç—å ‚Äî –≤–µ—Ä–Ω—É—Ç—å —ç—Ç–æ –≤ pool –ë–ï–ó –ø–æ–¥—Å–≤–µ—Ç–∫–∏
        const target = document.getElementById(`${blockId}-target-${imgNum}`);
        const previousPhrase = target.querySelector('.phrase-in-slot');
        if (previousPhrase) {
            const oldText = previousPhrase.textContent.slice(0, -2); // —É–±—Ä–∞—Ç—å √ó
            const prevCorrect = previousPhrase.getAttribute('data-correct') || '';

            const phraseEl = document.createElement('div');
            phraseEl.className = 'matchimg-phrase pool-element sticky tape-clear'; // –±–∞–∑–æ–≤—ã–π –≤–∏–¥
            if (prevCorrect) phraseEl.setAttribute('data-answer', prevCorrect); // –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
            phraseEl.textContent = oldText;
            phraseEl.onclick = function() { selectPhrase(this, blockId); };
            // –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π (–µ—Å–ª–∏ –∫—Ç–æ‚Äë—Ç–æ —Ä–µ—à–∏—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∑–µ–ª):
            phraseEl.classList.remove('click-correct','click-wrong','click-neutral','selected');

            document.getElementById(`${blockId}-phrases`).appendChild(phraseEl);
        }

        // –ø–æ–ª–æ–∂–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ñ—Ä–∞–∑—É –≤ —Å–ª–æ—Ç –∫–∞–∫ ANSWER + ATTEMPT
        const inSlot = document.createElement('span');
        inSlot.className = 'phrase-in-slot pool-element sticky tape-clear answer answer-attempt';
        if (selectedCorrect) inSlot.setAttribute('data-correct', selectedCorrect);

        const cross = document.createElement('span');
        cross.className = 'unassign';
        cross.textContent = '√ó';
        cross.onclick = function() { unassignPhrase(this, blockId, imgNum); };

        inSlot.textContent = selectedText + ' ';
        inSlot.appendChild(cross);

        target.innerHTML = '';
        target.appendChild(inSlot);

        // –∑–∞–ø–∏—Å–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ .ans
        target.dataset.val = (selectedText || '').trim();

        // –ø–æ–º–µ—Ç–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞–∫ ATTEMPT / UNANSWERED (–¥–ª—è UNIFIED ANSWER STATES)
        if (target.dataset.visualLocked !== '1') {
            const hasVal = !!(target.dataset.val || '').trim();
            target.dataset.state = hasVal ? 'attempt' : 'unanswered';
        }

        // —É–±—Ä–∞—Ç—å —Ñ—Ä–∞–∑—É –∏–∑ —Å–ø–∏—Å–∫–∞
        selectedPhraseEl.remove();
        selectedPhraseEl = null;
    }
    
    function unassignPhrase(crossEl, blockId, imgNum) {
        const holder = crossEl.parentElement; // .phrase-in-slot
        const phraseText = holder.textContent.slice(0, -2); // —É–±—Ä–∞—Ç—å √ó
        const originalCorrect = holder.getAttribute('data-correct') || '';

        // –≤–µ—Ä–Ω—É—Ç—å –ë–ï–ó –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∏ —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏
        const phraseEl = document.createElement('div');
        phraseEl.className = 'matchimg-phrase pool-element sticky tape-clear';
        if (originalCorrect) phraseEl.setAttribute('data-answer', originalCorrect);
        phraseEl.textContent = phraseText;
        phraseEl.onclick = function() { selectPhrase(this, blockId); };
        phraseEl.classList.remove('click-correct','click-wrong','click-neutral','selected');

        document.getElementById(`${blockId}-phrases`).appendChild(phraseEl);

        const target = document.getElementById(`${blockId}-target-${imgNum}`);
        target.innerHTML = '';
        target.dataset.val = '';

        if (target.dataset.visualLocked !== '1') {
            target.dataset.state = 'unanswered';
        }
    }

//#endregion
// ======================================================================

//#region START-END-CLICK (for CLICKWRITE)
    let clickSelections = {};

    function selectClickWord(blockId, sentIdx, wordIdx) {
        const sentKey = `${blockId}-${sentIdx}`;
        const sentenceEl = document.getElementById(`${blockId}-sent-${sentIdx}`);
        const words = sentenceEl.querySelectorAll(".click-word");

        if (!clickSelections[sentKey] || clickSelections[sentKey].start === undefined) {
            // –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫
            clickSelections[sentKey] = {start: wordIdx, end: null};
            words[wordIdx].classList.add("click-selected");
        } else if (clickSelections[sentKey].end === null) {
            // –í—Ç–æ—Ä–æ–π –∫–ª–∏–∫
            if (wordIdx > clickSelections[sentKey].start) {
                clickSelections[sentKey].end = wordIdx;
                for (let i = clickSelections[sentKey].start; i <= wordIdx; i++) {
                    words[i].classList.add("click-selected");
                }
            } else {
                // –ö–ª–∏–∫ –¥–æ start ‚Äî —Å–±—Ä–æ—Å
                words.forEach(w => w.classList.remove("click-selected"));
                clickSelections[sentKey] = {start: wordIdx, end: null};
                words[wordIdx].classList.add("click-selected");
            }
        } else {
            // –ù–æ–≤—ã–π –≤—ã–±–æ—Ä
            words.forEach(w => w.classList.remove("click-selected"));
            clickSelections[sentKey] = {start: wordIdx, end: null};
            words[wordIdx].classList.add("click-selected");
        }
    }

    function checkClickWrite(blockId, points) {
        const block = document.getElementById(blockId);
        const sentences = block.querySelectorAll(".clickwrite-sentence");
        const resultBlock = document.getElementById("result-" + blockId);

        let correct = 0;
        let wrong = 0;

        sentences.forEach((sent, idx) => {
            const clickAnswer = sent.dataset.click || "";
            const inputAnswer = sent.dataset.input || "";

            // –°–æ–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
            const selectedWords = Array.from(sent.querySelectorAll(".click-word.click-selected"))
                .map(w => w.textContent.trim())
                .join(" ")
                .toLowerCase();

            if (selectedWords === clickAnswer.toLowerCase()) {
                correct++;
            } else {
                wrong++;
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ input
            const input = document.getElementById(`${blockId}-input-${idx}`);
            if (input) {
                const userValue = input.value.trim().toLowerCase();
                const expectedVariants = inputAnswer.split("/").map(v => v.trim().toLowerCase());
                if (expectedVariants.includes(userValue)) {
                    correct++;
                } else {
                    wrong++;
                }
            }
        });

        resultBlock.innerHTML = `<span class='score-correct'>${correct} correct</span><span class='score-wrong'>${wrong} wrong</span>`;
        const revealBtn = block.querySelector(".reveal-btn");
        if (revealBtn) revealBtn.style.display = "inline-block";
    }
    
    function showClickWriteAnswers(blockId) {
        const block = document.getElementById(blockId);
        const sentences = block.querySelectorAll(".clickwrite-sentence");

        sentences.forEach((sent, idx) => {
            const clickAnswer = sent.dataset.click || "";
            const inputAnswer = sent.dataset.input || "";

            // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
            const words = sent.querySelectorAll(".click-word");
            let answerWords = clickAnswer.split(" ");
            words.forEach(w => {
                if (answerWords.includes(w.textContent)) {
                    w.classList.add("click-selected");
                }
            });

            // –ü–æ–∫–∞–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            const input = document.getElementById(`${blockId}-input-${idx}`);
            if (input) {
                input.value = inputAnswer;
                
                // –ï—Å–ª–∏ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º alt-–∏–∫–æ–Ω–∫–∏
                insertAltIconIfNeeded(input, inputAnswer);

                input.disabled = true;
            }
        });

        const checkBtn = block.querySelector(".check-btn");
        if (checkBtn) checkBtn.style.display = "none";
        const revealBtn = block.querySelector(".reveal-btn");
        if (revealBtn) revealBtn.style.display = "none";
    }

//#endregion
// ======================================================================

//#region AUTOSIZE / SIZING HELPERS
// —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ª–æ–≥–∏–∫–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è <input>‚Üî<textarea> –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
function autosizeInputs(container) {
    // üîπ –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –ø–µ—Ä–µ–¥–∞–ª–∏ ‚Äî –±–µ—Ä—ë–º –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç
    const root    = container || document;
    const rootBox = container || document.body;

    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑—É–º–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞
    const maxWidth = (rootBox && rootBox.offsetWidth) ? rootBox.offsetWidth : 800;

    // –û–¥–∏–Ω –æ–±—â–∏–π –∏–∑–º–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π <span>, —á—Ç–æ–±—ã –Ω–µ –ø–ª–æ–¥–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã
    let meas = document.getElementById("gap-measure-span");
    if (!meas) {
        meas = document.createElement("span");
        meas.id = "gap-measure-span";
        meas.style.position = "absolute";
        meas.style.visibility = "hidden";
        meas.style.whiteSpace = "pre";   // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–±–µ–ª—ã
        meas.style.top = "-9999px";
        meas.style.left = "-9999px";
        document.body.appendChild(meas);
    }

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –ø–æ—Å—á–∏—Ç–∞—Ç—å —à–∏—Ä–∏–Ω—É —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è
    function measureWidthPx(el, text, minCh) {
        const rawText = text || "";

        // –ë–µ—Ä—ë–º —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø–æ–ª—è, —á—Ç–æ–±—ã —à–∏—Ä–∏–Ω–∞ –±—ã–ª–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ—á–Ω–æ–π
        const cs = window.getComputedStyle(el);

        meas.style.fontFamily    = cs.fontFamily;
        meas.style.fontSize      = cs.fontSize;
        meas.style.fontWeight    = cs.fontWeight;
        meas.style.fontStyle     = cs.fontStyle;
        meas.style.letterSpacing = cs.letterSpacing;
        meas.style.whiteSpace    = "pre";

        // 1) –∏–∑–º–µ—Ä—è–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç
        meas.textContent = rawText || " ";
        let widthText = meas.getBoundingClientRect().width;

        // 2) –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏
        let width = widthText;

        // –ï—Å–ª–∏ –ü–û–õ–ï –ü–£–°–¢–û–ï ‚Äî —Ä–∏—Å—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É:
        //   –ª–∏–±–æ gap=[n], –ª–∏–±–æ –±–∞–∑–æ–≤—ã–µ 4 —Å–∏–º–≤–æ–ª–∞, —á—Ç–æ–±—ã –±—ã–ª–æ –∫—É–¥–∞ –∫–ª–∏–∫–Ω—É—Ç—å.
        if (!rawText) {
            const baseMin = 4;                         // —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è
            const chCount = Math.max(minCh || 0, baseMin);
            const ref = "0".repeat(chCount);
            meas.textContent = ref;
            width = meas.getBoundingClientRect().width;

        } else if (minCh > 0) {
            // –ï—Å–ª–∏ gap=[n] —É–∫–∞–∑–∞–Ω –∏ –ø–æ–ª–µ –ù–ï –ø—É—Å—Ç–æ–µ ‚Äî –Ω–µ –¥–∞—ë–º –µ–º—É —Å—Ç–∞—Ç—å —É–∂–µ n —Å–∏–º–≤–æ–ª–æ–≤.
            // –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –∫–æ—Ä–æ—Ç–∫–æ–º –æ—Ç–≤–µ—Ç–µ –Ω–µ ¬´–ª–æ–º–∞—Ç—å¬ª –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—É—é –¥–ª–∏–Ω—É.
            const ref = "0".repeat(minCh);
            meas.textContent = ref;
            const widthMin = meas.getBoundingClientRect().width;
            if (width < widthMin) width = widthMin;
        }

        return width;
    }

    const fields = root.querySelectorAll("input.gap, textarea.gap");

    fields.forEach(el => {
        const raw = el.value || "";
        const tag = el.tagName.toLowerCase();

        // –ß–∏—Ç–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –∏–∑ data-gap-min (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ gap=[n] –≤ render_input)
        let minCh = 0;
        const attr = el.getAttribute("data-gap-min");
        if (attr) {
            const n = parseFloat(String(attr).replace(",", "."));
            if (!Number.isNaN(n) && n > 0) {
                minCh = n;
            }
        }

        // ===== INPUT: –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ =====
        if (tag === "input") {
            const widthPx = measureWidthPx(el, raw, minCh);

            // –ï—Å–ª–∏ –ø–æ–ª–µ —Å—Ç–∞–ª–æ –Ω–µ–ø—Ä–∏–ª–∏—á–Ω–æ —à–∏—Ä–æ–∫–∏–º –∏ —Ç–µ–∫—Å—Ç —Ä–µ–∞–ª—å–Ω–æ –±–æ–ª—å—à–æ–π ‚Äî
            // –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –µ–≥–æ –≤ textarea –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —Å—Ç—Ä–æ–∫–∏.
            if (widthPx > maxWidth - 40 && raw.length > 40) {
                const ta = document.createElement("textarea");
                ta.className = el.className;
                ta.value = raw;
                if (el.dataset.answer) ta.setAttribute("data-answer", el.dataset.answer);
                ta.disabled = !!el.disabled;
                ta.readOnly = !!el.readOnly;
                ta.style.width = "100%";
                ta.style.minHeight = "3em";
                if (attr) ta.setAttribute("data-gap-min", attr);
                el.replaceWith(ta);
            } else {
                // –ò–Ω–∞—á–µ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–∞—ë–º –≤—ã—á–∏—Å–ª–µ–Ω–Ω—É—é —à–∏—Ä–∏–Ω—É –≤ –ø–∏–∫—Å–µ–ª—è—Ö
                const finalWidth = Math.min(widthPx, maxWidth - 10);
                el.style.width = finalWidth + "px";
            }
            return;
        }

        // ===== TEXTAREA: –ø—Ä–æ–±—É–µ–º –≤–µ—Ä–Ω—É—Ç—å –≤ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π input =====
        if (tag === "textarea") {
            const hasLineBreaks = /\\r|\\n/.test(raw);
            const len = raw.length;

            // –ï—Å–ª–∏ –Ω–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ –∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π ‚Äî
            // –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –æ–±—ã—á–Ω—ã–π input
            if (!hasLineBreaks && len <= 40) {
                const inp = document.createElement("input");
                inp.type = "text";
                inp.className = el.className;
                inp.value = raw;
                if (el.dataset.answer) inp.setAttribute("data-answer", el.dataset.answer);
                inp.disabled = !!el.disabled;
                inp.readOnly = !!el.readOnly;
                if (attr) inp.setAttribute("data-gap-min", attr);

                // –®–∏—Ä–∏–Ω—É —Å—á–∏—Ç–∞–µ–º –ø–æ —Å—Ç–∏–ª—è–º textarea (–æ–Ω–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å input.gap)
                const widthPx = measureWidthPx(el, raw, minCh);
                const finalWidth = Math.min(widthPx, maxWidth - 10);
                inp.style.width = finalWidth + "px";

                el.replaceWith(inp);
                return;
            }
        }
    });
}

// –Ω–∞–≤–µ—à–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ input –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –≤—ã–∑—ã–≤–∞–µ—Ç autosizeInputs(container) –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤–≤–æ–¥–µ
function enableAutoResize(container) {
    container.addEventListener("input", function(e) {
        const t = e.target;
        if (!t || !(t.matches("input.gap") || t.matches("textarea.gap"))) return;

        // üîë –ö–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è input-based
        const ans = t.closest('.ans[data-uid]');
        if (ans) ans.dataset.val = normalize(t.value || '');

        // –°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∞–≤—Ç–æ‚Äë–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤
        autosizeInputs(container);
    });
}

//#endregion
// ======================================================================




// ======================================================================
// ==================== CHECK AND SCORE
// ======================================================================

//#region SCORING CORE
function getBlockCfg(blockId) {
    const el = document.getElementById(blockId);
    const cfg = (window.BLOCK_CFG || {})[blockId] || {};
    const points = Number(cfg.points ?? (el ? el.dataset.points : 0)) || 0;

    const hasAttr = !!(el && Object.prototype.hasOwnProperty.call(el.dataset, 'lockOnCheck'));
    const raw = (cfg.lockOnCheck ?? (hasAttr ? el.dataset.lockOnCheck : 'false'));
    const lockOnCheck = String(raw).toLowerCase() === 'true';

    return { points, lockOnCheck };
}

function getKeyMap(blockId) {
    const m = (window.KEYS_MAP || {})[blockId];
    return m || {};
}

// –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç data-state=correct|wrong|unanswered –Ω–∞ .ans
function evaluateBlockById(blockId, mode) {
    const c = document.getElementById(blockId);
    if (!c) return;
    const keys = getKeyMap(blockId);
    const cfg = getBlockCfg(blockId);

    const units = [...c.querySelectorAll('.ans[data-uid]')];
    let total = 0, correct = 0, wrong = 0, unanswered = 0;

    for (const el of units) {
        const uid = el.dataset.uid;
        if (!uid) continue;

        const expected = keys[uid];
        if (expected === undefined) continue; // —é–Ω–∏—Ç –Ω–µ –≤ –∫–ª—é—á–µ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º

        total++;
        const raw = (el.dataset.val ?? "").trim();
        if (!raw) {
            unanswered++;
            el.dataset.state = "unanswered";
            continue;
        }

        const expArr = Array.isArray(expected) ? expected : [expected];

        const method = (el.dataset.method || '').toLowerCase();
        let ok = false;

        if (method === 'multi-click') {
            const rawCanon = canonMulti(raw);
            const expCanonArr = expArr.map(canonMulti);
            ok = expCanonArr.includes(rawCanon);
        } else {
            ok = expArr.includes(raw);
        }

        el.dataset.state = ok ? "correct" : "wrong";
        if (ok) correct++; else wrong++;
    }

    const pts = cfg.points || total || 0;
    const score = total ? Math.round((pts * correct) / total) : 0;

    if (mode === "check" && cfg.lockOnCheck) {
        if (typeof lockExercise === "function") lockExercise(blockId);
    }

    c.dataset.checked = "true";
    return { total, correct, wrong, unanswered, score };
}

//#endregion
// ======================================================================

//#region METHOD DECORATORS
const METHOD_DECORATORS = {
    "input-based": {  // –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å –ø–æ–ª—è–º–∏ –≤–≤–æ–¥–∞ (GAP, MCQGAP –∏ —Ç.–ø.)

        onCount(ans, res, block) {  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ COUNT –¥–ª—è input-based —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
            // –î–ª—è input-based Count –ù–ï –º–µ–Ω—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤.
            // –û–Ω —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–ª–æ–∫–∞ (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç –æ–±—â–∏–π –¥–≤–∏–∂–æ–∫),
            // –∞ –∑–¥–µ—Å—å –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º ¬´–º—è–≥–∫–æ–µ¬ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ (attempt / unanswered),
            // —á—Ç–æ–±—ã CSS –ø–æ ans[data-state] –Ω–µ –ø–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–ª –ø–æ–ª—è.

            // –ï—Å–ª–∏ —ç—Ç–æ—Ç –æ—Ç–≤–µ—Ç —É–∂–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω —á–µ—Ä–µ–∑ CHECK / REVEAL ‚Äî –Ω–µ —Ç—Ä–æ–≥–∞–µ–º.
            if (ans.dataset.visualLocked === "1") {
                return;
            }

            const field = ans.querySelector("input.gap, textarea.gap");  // –ò—â–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –≤ —Ç–µ–∫—É—â–µ–º –æ—Ç–≤–µ—Ç–µ
            if (!field) return;  // –ï—Å–ª–∏ –ø–æ–ª—è –Ω–µ—Ç, –ø—Ä–æ—Å—Ç–æ –≤—ã—Ö–æ–¥–∏–º

            const val = (field.value || "").trim();
            
            if (val) {
                // –ï—Å—Ç—å —Ç–µ–∫—Å—Ç ‚Üí —ç—Ç–æ ¬´–ø–æ–ø—ã—Ç–∫–∞¬ª, –Ω–æ –Ω–µ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
                ans.dataset.state = "attempt";
                field.classList.add("answer-attempt");
            } else {
                // –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ ‚Üí unanswered
                ans.dataset.state = "unanswered";
                field.classList.remove("answer-attempt");
            }
        },  // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ onCount


        onCheck(ans, _res, _block) {  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ CHECK –¥–ª—è input-based —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
            const field = ans.querySelector("input.gap, textarea.gap");  // –ò—â–µ–º –≤–Ω—É—Ç—Ä–∏ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ GAP (input –∏–ª–∏ textarea)
            if (!field) return;                                          // –ï—Å–ª–∏ –ø–æ–ª—è –Ω–µ—Ç, –≤—ã—Ö–æ–¥–∏–º

            const isInteractiveGap = field.classList.contains("gap-targetable");  // true, –µ—Å–ª–∏ —ç—Ç–æ –ø–æ–ª–µ —Å–≤—è–∑–∞–Ω–æ —Å –ø—É–ª–æ–º (pool_mode=interact)

            field.classList.remove("input-plug-gap");                        // –£–±–∏—Ä–∞–µ–º —Å–ª—É–∂–µ–±–Ω—ã–π –∫–ª–∞—Å—Å-–∑–∞–≥–ª—É—à–∫—É, –µ—Å–ª–∏ –æ–Ω –±—ã–ª
            field.classList.remove("answer-attempt");                        // –°–Ω–∏–º–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏ ‚Äî –¥–∞–ª—å—à–µ —Ä–∞–±–æ—Ç–∞–µ–º –ø–æ data-state
            removeGapCorrectIcon(field);                                     // –£–±–∏—Ä–∞–µ–º –≥–∞–ª–æ—á–∫—É —Å–ª–µ–≤–∞, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞
            removeGapWrongIcon(field);                                       // –£–±–∏—Ä–∞–µ–º –∫—Ä–µ—Å—Ç–∏–∫ —Å–ª–µ–≤–∞, –µ—Å–ª–∏ –æ–Ω –±—ã–ª

            if (!isInteractiveGap) {                                        // ‚öôÔ∏è –û–±—ã—á–Ω—ã–µ (–Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ) GAP
                field.readOnly = false;                                      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª–µ –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                field.removeAttribute("aria-readonly");                      // –£–±–∏—Ä–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ "—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è"
            }                                                               // –î–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö GAP readOnly –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –±—ã–ª–æ (–æ–Ω–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ –ø—É–ª–∞)

            if (ans.dataset.state === "correct") {                          // –ï—Å–ª–∏ —Ç–µ–∫—É—â–∏–π –æ—Ç–≤–µ—Ç –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
                field.readOnly = true;                                       // –§–∏–∫—Å–∏—Ä—É–µ–º –ø–æ–ª–µ –≤ –Ω–µ—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
                field.setAttribute("aria-readonly", "true");                 // –û–±–Ω–æ–≤–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
                ensureGapCorrectIcon(field);                                 // –°—Ç–∞–≤–∏–º –≥–∞–ª–æ—á–∫—É —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è
                insertAltIconIfNeeded(field, field.dataset.answer || "");    // –ï—Å–ª–∏ –≤ –∫–ª—é—á–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã, –¥–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É visibility

                field.classList.remove("gap-targetable");                    // üîí –í–ê–ñ–ù–û: –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç/–Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –ø—É–ª–∞
            } else if (ans.dataset.state === "wrong") {                    // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
                ensureGapWrongIcon(field);                                   // –°—Ç–∞–≤–∏–º —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –∏–∫–æ–Ω–∫—É –∫—Ä–µ—Å—Ç–∏–∫–∞
                // –î–ª—è wrong –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö GAP –∫–ª–∞—Å—Å gap-targetable –æ—Å—Ç–∞–≤–ª—è–µ–º ‚Äî —É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–∑ –ø—É–ª–∞
            }                                                               // –ö–æ–Ω–µ—Ü –≤–µ—Ç–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ wrong
            // –ü–æ—Å–ª–µ CHECK –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç—Ç–æ–≥–æ ans —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
            if (ans.dataset.state === "correct" || ans.dataset.state === "wrong") {
                ans.dataset.visualLocked = "1";
            }
        },  // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ onCheck

        
        onReveal(ans, _res, _block) {  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ SHOW ANSWERS / CORRECT –¥–ª—è input-based —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π (GAP –∏ –¥—Ä.)
            const field = ans.querySelector("input.gap, textarea.gap");  // –ò—â–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ GAP –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞
            if (!field) return;  // –ï—Å–ª–∏ –ø–æ–ª—è –Ω–µ—Ç, –≤—ã—Ö–æ–¥–∏–º

            const corr = field.dataset.answer || "";  // –ë–µ—Ä—ë–º —Å—Ç—Ä–æ–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞(–æ–≤) –∏–∑ data-answer (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å "/")

            field.classList.remove("input-plug-gap");                        // –£–±–∏—Ä–∞–µ–º —Å–ª—É–∂–µ–±–Ω—ã–π –∫–ª–∞—Å—Å-–∑–∞–≥–ª—É—à–∫—É
            field.classList.remove("answer-attempt");                        // –ü—ã—Ç–∞–µ–º—Å—è –≤—ã–π—Ç–∏ –∏–∑ —Ä–µ–∂–∏–º–∞ –ø–æ–ø—ã—Ç–∫–∏
            removeGapCorrectIcon(field);                                     // –£–±–∏—Ä–∞–µ–º –≥–∞–ª–æ—á–∫—É —Å–ª–µ–≤–∞, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ —Ä–∞–Ω–µ–µ
            // –í–ê–ñ–ù–û: –∫—Ä–µ—Å—Ç–∏–∫ –ù–ï —É–±–∏—Ä–∞–µ–º –∑–¥–µ—Å—å, –¥–ª—è wrong/–ø—É—Å—Ç—ã—Ö –æ–Ω –Ω–∞–º –Ω—É–∂–µ–Ω –ø–æ—Å–ª–µ Show Answers

            // –ü—Ä–∏ –ø–æ–∫–∞–∑–µ –æ—Ç–≤–µ—Ç–æ–≤ –º—ã –±–æ–ª—å—à–µ –Ω–µ –¥–∞—ë–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è,
            // –Ω–æ –¥–ª—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö/–ø—É—Å—Ç—ã—Ö –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å.
            field.readOnly = false;                                          // –°–Ω–∞—á–∞–ª–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª–µ –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            field.removeAttribute("aria-readonly");                          // –£–±–∏—Ä–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–ø–æ—Ç–æ–º –¥–æ–±–∞–≤–∏–º –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

            // –°–Ω–∞—á–∞–ª–∞ —É–±–∏—Ä–∞–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–π —Å—Ç–∞—Ä—ã–π –±–ª–æ–∫ "‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã" –∏–∑ —ç—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
            const oldShow = ans.querySelector(".answer-revealed");          // –ò—â–µ–º —Å—Ç–∞—Ä—ã–π .answer-revealed –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—É—â–µ–≥–æ ans
            if (oldShow) {                                                  // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Ç–∞–∫–æ–π –±–ª–æ–∫
                oldShow.remove();                                            // –£–¥–∞–ª—è–µ–º –µ–≥–æ
            }  // –ö–æ–Ω–µ—Ü —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ –±–ª–æ–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

            const userVal = (field.value || "").trim();                      // –¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–≤—ë–ª —É—á–µ–Ω–∏–∫ –≤ —ç—Ç–æ –ø–æ–ª–µ (–æ–±—Ä–µ–∑–∞–µ–º –ø—Ä–æ–±–µ–ª—ã)

            if (ans.dataset.state === "correct") {          // –ï–°–õ–ò –æ—Ç–≤–µ—Ç –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –¥–æ Show Answers
                field.readOnly = true;                       // –§–∏–∫—Å–∏—Ä—É–µ–º –ø–æ–ª–µ
                field.setAttribute("aria-readonly", "true");
                ensureGapCorrectIcon(field);                 // –ì–∞–ª–æ—á–∫–∞ —Å–ª–µ–≤–∞
                insertAltIconIfNeeded(field, corr);          // –ò–∫–æ–Ω–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
            } else {                                       // –ï–°–õ–ò –æ—Ç–≤–µ—Ç –±—ã–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–ª–∏ –ø—É—Å—Ç—ã–º
                // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —É—á–µ–Ω–∏–∫–∞ –∑–∞—á—ë—Ä–∫–Ω—É—Ç—ã–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º "‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã"
                ensureGapWrongIcon(field);                   // –ö—Ä–µ—Å—Ç–∏–∫ —Å–ª–µ–≤–∞
                if (corr) {
                    setAnswerRevealed(ans, field, corr);     // "‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã"
                }
                ans.dataset.revealed = "1";   // –ø–æ–º–µ—á–∞–µ–º, —á—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ ans –ø–æ–∫–∞–∑–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                if (corr && corr.includes("/")) {
                    insertAltIconIfNeeded(field, corr);      // –ì–ª–∞–∑–∏–∫ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏
                }
            }
            // –ü–æ—Å–ª–µ SHOW ANSWERS –æ—Ç–≤–µ—Ç –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –≤–∏–∑—É–∞–ª—å–Ω–æ
            ans.dataset.visualLocked = "1";
        },  // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ onReveal

    }, // –ö–æ–Ω–µ—Ü —Å–µ–∫—Ü–∏–∏ "input-based" –≤ METHOD_DECORATORS

    "single-click": {
        onCount(ans, res, _block) {
            // COUNT: –¥–ª—è single-click –Ω–µ –º–µ–Ω—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ, —Ç–æ–ª—å–∫–æ –º—è–≥–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            if (ans.dataset.visualLocked === "1") return;

            const grp = ans.querySelector(".click-group"); 
            if (!grp) return;

            const sel = grp.querySelector(".click-option.selected");
            ans.dataset.state = sel ? "attempt" : "unanswered";
        },

        onCheck(ans, _res, block) {
            // CHECK: –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –¢–û–õ–¨–ö–û –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç; –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–µ–≤—ã–±—Ä–∞–Ω–Ω—ã–π –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
            const grp = ans.querySelector(".click-group"); 
            if (!grp) return;

            const keyMap = (window.KEYS_MAP[block.id]||{});
            const exp = (keyMap[ans.dataset.uid]||"").trim();

            // —É–±—Ä–∞—Ç—å –ø—Ä–æ—à–ª—É—é –ø–æ–¥—Å–≤–µ—Ç–∫—É —É –≤—Å–µ—Ö
            grp.querySelectorAll(".click-option").forEach(opt => {
                opt.classList.remove(
                    "click-correct","click-wrong","click-neutral",
                    "correct-choice","wrong-choice",
                    "answer-attempt"
                );

                const span = opt.querySelector('.click-content');
                if (span) {
                    span.classList.remove('answer-attempt');
                }
            });

            const sel = grp.querySelector(".click-option.selected");
            if (!sel) return;

            const selText = (
                sel.getAttribute('data-canon') ||
                sel.querySelector('.click-content')?.textContent ||
                sel.textContent ||
                ''
            ).trim();

            if (selText === exp) {
                sel.classList.add("click-correct","correct-choice");
            } else {
                sel.classList.add("click-wrong","wrong-choice");
            }

            // –ü–æ—Å–ª–µ CHECK –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç—Ç–æ–≥–æ ans —Å—á–∏—Ç–∞–µ–º –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
            if (ans.dataset.state === "correct" || ans.dataset.state === "wrong") {
                ans.dataset.visualLocked = "1";
            }
        },

        onReveal(ans, _res, block) {
            // REVEAL: –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é —É—á–µ–Ω–∏–∫–æ–º –æ–ø—Ü–∏—é –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ–≥–æ –æ—Ç–≤–µ—Ç
            const grp = ans.querySelector(".click-group"); 
            if (!grp) return;

            const keyMap = (window.KEYS_MAP[block.id]||{});
            const exp = (keyMap[ans.dataset.uid]||"").trim();

            // 1) –°–Ω–∏–º–∞–µ–º —Å—Ç–∞—Ä—ã–µ ‚Äú–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ‚Äù –º–µ—Ç–∫–∏ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏
            grp.querySelectorAll(".click-option").forEach(opt => {
                opt.classList.remove(
                    "click-correct","click-wrong","click-neutral",
                    "correct-choice","wrong-choice",
                    "answer-attempt",
                    "opt-revealed" 
                );
                const span = opt.querySelector('.click-content');
                if (span) {
                    span.classList.remove('answer-attempt');
                    // answer –Ω–µ —Ç—Ä–æ–≥–∞–µ–º: –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è wrong —á–µ—Ä–µ–∑ ans[data-state]
                }
            });

            // 2) –ü–æ–º–µ—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ–ø—Ü–∏—é –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            grp.querySelectorAll(".click-option").forEach(opt => {
                const span = opt.querySelector('.click-content');
                if (!span) return;

                const t = (
                    opt.getAttribute('data-canon') ||
                    span.textContent ||
                    opt.textContent ||
                    ''
                ).trim();

                if (t === exp) {
                    // –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å–∫—Ä—ã–≤–∞–µ–º
                    span.classList.add('answer', 'answer-revealed');
                    opt.classList.add('opt-revealed');        // ‚Üê —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è revealed
                }
            });

            // 3) –£ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —É—á–µ–Ω–∏–∫–æ–º –æ–ø—Ü–∏–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å .answer,
            // —á—Ç–æ–±—ã –¥–ª—è WRONG —Å—Ä–∞–±–æ—Ç–∞–ª–æ –æ–±—â–µ–µ –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ
            const sel = grp.querySelector(".click-option.selected");
            if (sel) {
                const spanSel = sel.querySelector('.click-content');
                if (spanSel) {
                    spanSel.classList.add('answer');
                }
            }

            // 4) –ü–æ–º–µ—á–∞–µ–º, —á—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ ans –±—ã–ª–∏ —Ä–∞—Å–∫—Ä—ã—Ç—ã –æ—Ç–≤–µ—Ç—ã –∏ –≤–∏–∑—É–∞–ª –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω
            ans.dataset.revealed = "1";
            ans.dataset.visualLocked = "1";
        },
    },

    "multi-click": {
        onCount(ans, res, _block) {
            // COUNT: –¥–ª—è multi-click –Ω–µ –º–µ–Ω—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ,
            // —Ç–æ–ª—å–∫–æ –º—è–≥–∫–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ attempt/unanswered
            if (ans.dataset.visualLocked === "1") return;

            const grp = ans.querySelector(".click-group"); 
            if (!grp) return;

            const anySelected = !!grp.querySelector(".click-option.selected");
            ans.dataset.state = anySelected ? "attempt" : "unanswered";
        },

        onCheck(ans, _res, block) {
            // CHECK: –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –¢–û–õ–¨–ö–û –≤—ã–±—Ä–∞–Ω–Ω—ã–µ; –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–µ–≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
            const grp = ans.querySelector(".click-group"); 
            if (!grp) return;

            const keyMap = (window.KEYS_MAP[block.id]||{});
            const expSet = new Set(
                String(keyMap[ans.dataset.uid]||"")
                    .split("/")
                    .map(s => s.trim())
                    .filter(Boolean)
            );

            // –æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–∫–∏ + —Å–±—Ä–æ—Å–∏—Ç—å "answer" —É —Ç–µ–∫—Å—Ç–∞,
            // –ø–æ—Ç–æ–º—É —á—Ç–æ –¥–ª—è multi –ø—Ä–∏ wrong-question –Ω–µ–ª—å–∑—è –∑–∞—á—ë—Ä–∫–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
            grp.querySelectorAll(".click-option").forEach(opt => {
                opt.classList.remove(
                    "click-correct","click-wrong","click-neutral",
                    "correct-choice","wrong-choice",
                    "answer-attempt"
                );

                const span = opt.querySelector('.click-content');
                if (span) {
                    span.classList.remove('answer-attempt');
                    span.classList.remove('answer');           // ‚Üê –≤–∞–∂–Ω–æ
                    span.classList.remove('answer-revealed');  // –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
                }
            });

            // –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
            grp.querySelectorAll(".click-option.selected").forEach(opt => {
                const span = opt.querySelector('.click-content');

                const t = (
                    opt.getAttribute('data-canon') ||
                    span?.textContent ||
                    opt.textContent ||
                    ''
                ).trim();

                if (expSet.has(t)) {
                    // ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è ‚Äî –∑–µ–ª—ë–Ω–∞—è –∏ –ù–ï –∑–∞—á—ë—Ä–∫–Ω—É—Ç–∞—è
                    opt.classList.add("click-correct","correct-choice");
                    if (span) {
                        span.classList.remove('answer');       // —á—Ç–æ–±—ã –Ω–µ –ø–æ–ø–∞–ª–æ –ø–æ–¥ .ans[data-state="wrong"] .answer
                        span.classList.remove('answer-attempt');
                    }
                } else {
                    // ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è ‚Äî –∑–∞—á—ë—Ä–∫–Ω—É—Ç–∞—è
                    opt.classList.add("click-wrong","wrong-choice");
                    if (span) {
                        span.classList.add('answer');          // –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–±—â–∏–π CSS wrong
                        span.classList.remove('answer-attempt');
                    }
                }
            });

            // –ü–æ—Å–ª–µ CHECK –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç—Ç–æ–≥–æ ans —Å—á–∏—Ç–∞–µ–º –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
            if (ans.dataset.state === "correct" || ans.dataset.state === "wrong") {
                ans.dataset.visualLocked = "1";
            }
        },

        onReveal(ans, _res, block) {
            // REVEAL: –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ; –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –ø–æ–ø—ã—Ç–∫–∞ —É—á–µ–Ω–∏–∫–∞
            const grp = ans.querySelector(".click-group"); 
            if (!grp) return;

            const keyMap = (window.KEYS_MAP[block.id]||{});
            const expSet = new Set(
                String(keyMap[ans.dataset.uid]||"")
                    .split("/")
                    .map(s => s.trim())
                    .filter(Boolean)
            );

            // 1) –°–Ω–∏–º–∞–µ–º —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–∫–∏ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏
            grp.querySelectorAll(".click-option").forEach(opt => {
                opt.classList.remove(
                    "click-correct","click-wrong","click-neutral",
                    "correct-choice","wrong-choice",
                    "answer-attempt",
                    "opt-revealed"
                );
                const span = opt.querySelector('.click-content');
                if (span) {
                    span.classList.remove('answer-attempt');
                    // .answer –æ—Å—Ç–∞–≤–ª—è–µ–º
                }
            });

            // 2) –û—Ç–º–µ—á–∞–µ–º –í–°–ï –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –∫–∞–∫ —Ä–∞—Å–∫—Ä—ã—Ç—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            grp.querySelectorAll(".click-option").forEach(opt => {
                const span = opt.querySelector('.click-content');
                if (!span) return;

                const t = (
                    opt.getAttribute('data-canon') ||
                    span.textContent ||
                    opt.textContent ||
                    ''
                ).trim();

                if (expSet.has(t)) {
                    span.classList.add('answer', 'answer-revealed');
                    opt.classList.add('opt-revealed');        // ‚Üê –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
                }
            });

            // 3) –î–ª—è –≤—Å–µ—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–º –æ–ø—Ü–∏–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å .answer,
            // —á—Ç–æ–±—ã –ø—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ wrong –æ–Ω–∏ –∑–∞—á–µ—Ä–∫–∏–≤–∞–ª–∏—Å—å
            grp.querySelectorAll(".click-option.selected").forEach(opt => {
                const span = opt.querySelector('.click-content');
                if (span) {
                    span.classList.add('answer');
                }
            });

            ans.dataset.revealed = "1";
            ans.dataset.visualLocked = "1";
        },
    },

    "start-end-click": {
        onCount(ans, res, _block) {
        // COUNT: –µ—Å–ª–∏ wrong===0 ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –∑–∞—á—ë—Ä–∫–Ω—É—Ç/¬´–∑–µ–ª—ë–Ω—ã–π¬ª (–¥–µ–ª–∞–µ–º –º—è–≥–∫–æ)
            if (!(res.wrong===0 && res.unanswered===0 && res.total>0)) return;
            ans.querySelectorAll(".click-word.click-selected").forEach(w => {
                w.style.textDecoration = "line-through";
            });
        },
        onCheck(ans, _res, _block) {
        // CHECK: –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω ‚Äî –∑–µ–ª—ë–Ω—ã–π –µ—Å–ª–∏ correct, –∏–Ω–∞—á–µ –∫—Ä–∞—Å–Ω—ã–π
        const ok = ans.dataset.state==="correct";
        ans.querySelectorAll(".click-word.click-selected").forEach(w => {
            w.style.textDecoration = "line-through";
        });
        },
        onReveal(ans, res, _block) {
        // REVEAL: –∫–∞–∫ Check; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —ç—Ç–∞–ª–æ–Ω–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω ‚Äî –¥–æ–±–∞–≤–∏–º –ø–æ–∑–∂–µ)
        this.onCheck(ans, res, _block);
        }
    },

    "pairing-click": {
        onCount(ans, _res, _block) {
            // COUNT: —Ç–æ–ª—å–∫–æ —Å—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, –≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º correct/wrong.
            // –°—Ç–∞–≤–∏–º –º—è–≥–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ATTEMPT / UNANSWERED, —á—Ç–æ–±—ã CSS –Ω–µ –∫—Ä–∞—Å–∏–ª —è—á–µ–π–∫–∏.
            if (ans.dataset.visualLocked === "1") return;

            const slot = ans.querySelector('.phrase-in-slot');
            const hasVal = !!((ans.dataset.val || '').trim());

            if (hasVal && slot) {
                ans.dataset.state = 'attempt';
                slot.classList.add('answer-attempt');
            } else {
                ans.dataset.state = 'unanswered';
                if (slot) slot.classList.remove('answer-attempt');
            }
        },
        onCheck(ans, _res, _block) {
            const slot = ans.querySelector('.phrase-in-slot');
            if (!slot) return;

            // –ü–æ—Å–ª–µ CHECK —Å–Ω–∏–º–∞–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–∫–∏:
            // —Ü–≤–µ—Ç –∏ –∑–∞—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ .ans[data-state="correct|wrong"] .answer
            slot.classList.remove('answer-attempt');
        },
        onReveal(ans, res, block) {
            // –î–ª—è MATCHIMG REVEAL –≤–∏–∑—É–∞–ª—å–Ω–æ —Ç–æ –∂–µ, —á—Ç–æ –∏ CHECK:
            // –≤—Å—ë –±–µ—Ä—ë–º –∏–∑ ans.dataset.state –∏ CSS.
            this.onCheck(ans, res, block);
        }
    },
}; 

function applyMethodDecorators(container, phase, resSummary) {
    container.querySelectorAll('.ans[data-method]').forEach(ans => {
        const api = METHOD_DECORATORS[ans.dataset.method];
        if (!api) return;
        const fn = api['on' + phase.charAt(0).toUpperCase() + phase.slice(1)];
        if (typeof fn === 'function') fn(ans, resSummary, container);
    });
}

//#endregion
// ======================================================================

//#region SCORING ACTIONS API (—Ç–æ, —á—Ç–æ –¥–µ—Ä–≥–∞—é—Ç –∫–Ω–æ–ø–∫–∏)

// ‚Äî ‚Äú—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ‚Äù (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ)
function countById(blockId) {
    return evaluateBlockById(blockId, "count");
}

function checkById(blockId) {
    return evaluateBlockById(blockId, "check");
}

function scoreById(blockEl) {
    const blockId = blockEl.id || "";
    const keyMap = getKeyMap(blockId);
    const units = [...blockEl.querySelectorAll('.ans[data-uid]')];

    let unitsTotal = 0, correctUnits = 0, wrongUnits = 0, unansweredUnits = 0;

    units.forEach(el => {
        const uid = el.dataset.uid;
        if (!uid || keyMap[uid] === undefined) return;   // —é–Ω–∏—Ç –Ω–µ –≤ –∫–ª—é—á–µ ‚Üí –∏–≥–Ω–æ—Ä

        unitsTotal++;

        // —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ (–¥–ª—è input, MCQ, –ø—É–ª–∞ –∏ —Ç.–ø.)
        const raw = (el.dataset.val || "").trim();

        // üîπ –ü–£–°–¢–û–ï POL–ï / –ù–ï–í–´–ë–†–ê–ù–ù–ê–Ø –û–ü–¶–ò–Ø:
        // –≤—Å–µ–≥–¥–∞ —Å—á–∏—Ç–∞–µ–º –∫–∞–∫ unanswered,
        // –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω–∞–∂–∏–º–∞–ª–∏ Check –∏–ª–∏ –Ω–µ—Ç
        if (raw === "") {
            unansweredUnits++;
            return;
        }

        // üîπ –ï—Å—Ç—å –æ—Ç–≤–µ—Ç ‚Üí —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –∫–ª—é—á–æ–º
        const expected = keyMap[uid];
        const expArr = Array.isArray(expected) ? expected : [expected];

        const method = (el.dataset.method || '').toLowerCase();
        let ok = false;

        if (method === 'multi-click') {
            const rawCanon = canonMulti(raw);
            const expCanonArr = expArr.map(canonMulti);
            ok = expCanonArr.includes(rawCanon);
        } else {
            ok = expArr.includes(raw);
        }

        if (ok) {
            correctUnits++;
        } else {
            wrongUnits++;
        }
    });

    return { unitsTotal, correctUnits, wrongUnits, unansweredUnits };
}

// ‚Äî ‚Äú–∫–Ω–æ–ø–∫–∏ –∏–∑ HTML‚Äù (–ø—É–±–ª–∏—á–Ω—ã–µ –¥–ª—è onclick)
function countAnswers(blockId) {
const c = document.getElementById(blockId); if (!c) return;
const res = evaluateBlockById(blockId, "count") || {total:0,correct:0,wrong:0,unanswered:0,score:0};
c.dataset.checked = "true";

// ‚¨áÔ∏è –ù–æ–≤—ã–π –±–µ–∑—É—Å–ª–æ–≤–Ω—ã–π –∞–≤—Ç–æ-—Ä–µ—Å–∞–π–∑ (–Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç –¥–ª—è –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π)
try { autosizeInputs(c); } catch (e) {}


const isPerfect = (res.wrong === 0 && res.unanswered === 0 && res.total > 0);

// –ï—Å–ª–∏ –≤—Å—ë –∏–¥–µ–∞–ª—å–Ω–æ ‚Äî –æ—Ñ–æ—Ä–º–ª—è–µ–º –∫–∞–∫ CHECK (—á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç—ã —Å—Ç–∞–ª–∏ Correct),
// –∏–Ω–∞—á–µ ‚Äî –æ–±—ã—á–Ω—ã–π –º—è–≥–∫–∏–π COUNT –±–µ–∑ correct/wrong
applyMethodDecorators(c, isPerfect ? 'check' : 'count', res);

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏ ‚Äî –ø–æ —Ç–≤–æ–∏–º –ø—Ä–∞–≤–∏–ª–∞–º
if (isPerfect) {
    // —Ç–æ–ª—å–∫–æ –¥–ª—è input-based (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª—è)
    c.querySelectorAll('input.gap, textarea.gap').forEach(inp => {
    const ans = inp.closest('.ans[data-uid]'); if (!ans) return;
    if (ans.dataset.state==="correct") insertAltIconIfNeeded(inp, inp.dataset.answer||"");
    });
    autosizeInputs(c);
    lockExercise(blockId);
} else {
    const checkBtn = c.querySelector(".check-btn");
    if (checkBtn) checkBtn.style.display = "inline-block";
}
}

function checkAnswers(blockId) {
const c = document.getElementById(blockId); if (!c) return;
const res = evaluateBlockById(blockId, "check") || {total:0,correct:0,wrong:0,unanswered:0,score:0};
c.dataset.checked = "true";

applyMethodDecorators(c, 'check', res);
autosizeInputs(c);

const { lockOnCheck } = getBlockCfg(blockId);
if (lockOnCheck) {
    // —Ç–æ–ª—å–∫–æ –≤–µ—Ä–Ω—ã–º input‚Äëbased; –ª–æ—á–∏–º
    c.querySelectorAll('input.gap, textarea.gap').forEach(inp => {
    const ans = inp.closest('.ans[data-uid]'); if (!ans) return;
    if (ans.dataset.state==="correct") insertAltIconIfNeeded(inp, inp.dataset.answer||"");
    });
    autosizeInputs(c);
    lockExercise(blockId);
} else if (res.wrong === 0 && res.unanswered === 0 && res.total > 0) {
    c.querySelectorAll('input.gap, textarea.gap').forEach(inp => insertAltIconIfNeeded(inp, inp.dataset.answer||""));
    autosizeInputs(c);
    lockExercise(blockId);
} else {
    const revealBtn = c.querySelector(".reveal-btn");
    if (revealBtn) revealBtn.style.display = "inline-block";
}
}

function revealAnswers(blockId) {
const c = document.getElementById(blockId); if (!c) return;

// –ü–æ–¥—Å—á—ë—Ç –∏ —à—Ç–∞—Ç–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º
const res = evaluateBlockById(blockId, "check") || {total:0,correct:0,wrong:0,unanswered:0,score:0};
c.dataset.checked = "true";
applyMethodDecorators(c, 'reveal', res);

// --- MCQGAP: –≤ –∫–∞–∂–¥–æ–º –≤–æ–ø—Ä–æ—Å–µ –µ—Å—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω .plug-gap –≤–Ω—É—Ç—Ä–∏ —Å—Ç–µ–º–∞
if (c.matches('.mcqgap-block[data-type="MCQGAP"]')) {
    const keys = getKeyMap(blockId);
    c.querySelectorAll('.mcq-question.ans[data-uid]').forEach(q => {
        const uid = q.dataset.uid || '';
        const exp = (keys[uid] || '').trim();
        if (!exp) return;

        const plug = q.querySelector('.plug-gap[data-plug="true"]');
        if (!plug) return;

        // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–ø–∏—Å—ã–≤–∞–µ–º:
        // —Å–≤–µ—Ä—Ö—É —É–∂–µ —Å—Ç–æ–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ—Ä–∞–∑–∞ –±–µ–∑ –∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è.
        if (q.dataset.state === 'correct') {
            return;
        }

        // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –±—ã–ª –Ω–µ–≤–µ—Ä–Ω—ã–º ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ø—ã—Ç–∫—É –≤ plug-gap
        // (–æ–Ω–∞ —É–∂–µ –∑–∞—á—ë—Ä–∫–Ω—É—Ç–∞ —á–µ—Ä–µ–∑ .ans[data-state="wrong"]),
        // –∏ –î–û–ü–ò–°–´–í–ê–ï–ú –ø–æ—Å–ª–µ –ø–æ–ª—è "‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç".
        setPlugGapRevealed(q, plug, exp);
    });
}

// --- MCQGAPS: –≤–µ—Ä—Ö–Ω–∏–π —Ç–µ–∫—Å—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ plug-gap; —Å—Ç—Ä–æ–∫–∏ .mcqgaps-row —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ data-
if (c.matches('.mcqgaps-block[data-type="MCQGAPS"]')) {
    const keys = getKeyMap(blockId);
    const top = c.querySelector('.mcqgaps-text');
    if (!top) return;

    c.querySelectorAll('.mcqgaps-row.ans[data-uid][data-gap]').forEach(row => {
        const uid = row.dataset.uid || '';
        const idx = String(row.dataset.gap || '').trim();
        const exp = (keys[uid] || '').trim();
        if (!idx || !exp) return;

        // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –æ—Ç–≤–µ—Ç —É–∂–µ CORRECT
        if (row.dataset.state === 'correct') {
            return;
        }

        const gap = top.querySelector(`.plug-gap[data-idx="${idx}"]`);
        if (!gap) return;

        // –ó–¥–µ—Å—å ans-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è revealed-–æ—Ç–≤–µ—Ç–∞ ‚Äî –æ–±—â–∏–π –≤–µ—Ä—Ö–Ω–∏–π —Ç–µ–∫—Å—Ç (top)
        setPlugGapRevealed(top, gap, exp);
    });
}

// 3) –ó–∞–≤–µ—Ä—à–∞–µ–º
autosizeInputs(c);
lockExercise(blockId);
}

//#endregion
// ======================================================================

//#region REVEAL HELPERS (—Ç–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ Show Answers –∏ –ø—Ä–∏ Check)
    function ensureGapCorrectIcon(input) {  // –î–æ–±–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–æ–∫ –≥–∞–ª–æ—á–∫–∏ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è, –µ—Å–ª–∏ —Ç–∞–∫–æ–π –≥–∞–ª–æ—á–∫–∏ –µ—â—ë –Ω–µ—Ç
        if (!input) return;  // –ï—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ (null/undefined), –≤—ã—Ö–æ–¥–∏–º

        const prev = input.previousElementSibling;  // –ë–µ—Ä—ë–º —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è
        const hasIconHere = prev && prev.classList && prev.classList.contains("gap-correct-icon");  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω —É–∂–µ –≥–∞–ª–æ—á–∫–æ–π

        const prev2 = prev && prev.previousElementSibling;  // –ë–µ—Ä—ë–º –µ—â—ë –æ–¥–Ω–æ–≥–æ —Å–æ—Å–µ–¥–∞ —Å–ª–µ–≤–∞ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –º–µ–∂–¥—É –≥–∞–ª–æ—á–∫–æ–π –∏ –ø–æ–ª–µ–º —Å—Ç–æ–∏—Ç –≥–ª–∞–∑–∏–∫)
        const hasIconBefore = prev2 && prev2.classList && prev2.classList.contains("gap-correct-icon");  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —Å–ø—Ä—è—Ç–∞–ª–∞—Å—å –ª–∏ –≥–∞–ª–æ—á–∫–∞ –µ—â—ë –Ω–∞ –æ–¥–∏–Ω —à–∞–≥ –ª–µ–≤–µ–µ

        if (hasIconHere || hasIconBefore) return;  // –ï—Å–ª–∏ –≥–∞–ª–æ—á–∫–∞ —É–∂–µ –µ—Å—Ç—å —Ä—è–¥–æ–º (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–≤—É—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤), –Ω–æ–≤—É—é –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º

        const icon = document.createElement("span");  // –°–æ–∑–¥–∞—ë–º span –¥–ª—è –∏–∫–æ–Ω–∫–∏ –≥–∞–ª–æ—á–∫–∏
        icon.className = "material-symbols-outlined gap-correct-icon";  // –ó–∞–¥–∞—ë–º –∫–ª–∞—Å—Å—ã: Material Symbols + –Ω–∞—à –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –≥–∞–ª–æ—á–∫–∏
        icon.textContent = "check_small";  // –ò–º—è –∏–∫–æ–Ω–∫–∏ –≥–∞–ª–æ—á–∫–∏ –∏–∑ –Ω–∞–±–æ—Ä–∞ Material Symbols

        input.insertAdjacentElement("beforebegin", icon);  // –í—Å—Ç–∞–≤–ª—è–µ–º –≥–∞–ª–æ—á–∫—É –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ü–ï–†–ï–î –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ (—Å–ª–µ–≤–∞ –æ—Ç –Ω–µ–≥–æ)
    }      // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ ensureGapCorrectIcon
    
    function removeGapCorrectIcon(input) {  // –£–¥–∞–ª—è–µ—Ç –≥–∞–ª–æ—á–∫—É —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å (—Å —É—á—ë—Ç–æ–º –≥–ª–∞–∑–∏–∫–∞)
        if (!input) return;  // –ï—Å–ª–∏ –ø–æ–ª—è –Ω–µ—Ç, –≤—ã—Ö–æ–¥–∏–º

        let prev = input.previousElementSibling;  // –ë–µ—Ä—ë–º –±–ª–∏–∂–∞–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è

        if (prev && prev.classList && prev.classList.contains("gap-correct-icon")) {  // –ï—Å–ª–∏ —ç—Ç–æ –Ω–∞—à–∞ –≥–∞–ª–æ—á–∫–∞
            prev.remove();  // –£–¥–∞–ª—è–µ–º –≥–∞–ª–æ—á–∫—É
            return;  // –ò –≤—ã—Ö–æ–¥–∏–º, –±–æ–ª—å—à–µ –∏—Å–∫–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å–æ—Å–µ–¥–∞

        if (prev && prev.previousElementSibling) {  // –ï—Å–ª–∏ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –µ—Å—Ç—å –µ—â—ë –∫—Ç–æ-—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–ª–∞–∑–∏–∫), —Å–º–æ—Ç—Ä–∏–º –µ—â—ë –Ω–∞ —à–∞–≥ –ª–µ–≤–µ–µ
            const prev2 = prev.previousElementSibling;  // –ë–µ—Ä—ë–º –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Å–µ–¥–∞ —Å–ª–µ–≤–∞
            if (prev2 && prev2.classList && prev2.classList.contains("gap-correct-icon")) {  // –ï—Å–ª–∏ –æ–Ω ‚Äî –Ω–∞—à–∞ –≥–∞–ª–æ—á–∫–∞
                prev2.remove();  // –£–¥–∞–ª—è–µ–º –≥–∞–ª–æ—á–∫—É
            }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Å–µ–¥–∞
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è
    }      // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ removeGapCorrectIcon
    
    function ensureGapWrongIcon(input) {  // –î–æ–±–∞–≤–ª—è–µ—Ç –∏–∫–æ–Ω–∫—É –∫—Ä–µ—Å—Ç–∏–∫–∞ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è, –µ—Å–ª–∏ –µ—ë –µ—â—ë –Ω–µ—Ç
        if (!input) return;  // –ï—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ, –≤—ã—Ö–æ–¥–∏–º

        const prev = input.previousElementSibling;  // –ë–µ—Ä—ë–º –±–ª–∏–∂–∞–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞
        let hasWrong = prev && prev.classList && prev.classList.contains("gap-wrong-icon");  // –°–º–æ—Ç—Ä–∏–º, –Ω–µ —Å—Ç–æ–∏—Ç –ª–∏ —Ç–∞–º —É–∂–µ –Ω–∞—à –∫—Ä–µ—Å—Ç–∏–∫

        const prev2 = prev && prev.previousElementSibling;  // –ë–µ—Ä—ë–º –µ—â—ë –æ–¥–Ω–æ–≥–æ —Å–æ—Å–µ–¥–∞ —Å–ª–µ–≤–∞ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–µ—Ä–µ–¥ –ø–æ–ª–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∫–æ–Ω–æ–∫)
        if (!hasWrong && prev2 && prev2.classList && prev2.classList.contains("gap-wrong-icon")) {  // –ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π —Å–ª–µ–≤–∞ ‚Äî —ç—Ç–æ –Ω–∞—à –∫—Ä–µ—Å—Ç–∏–∫
            hasWrong = true;  // –°—á–∏—Ç–∞–µ–º, —á—Ç–æ –∫—Ä–µ—Å—Ç–∏–∫ —É–∂–µ –µ—Å—Ç—å
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Å–µ–¥–∞

        if (hasWrong) return;  // –ï—Å–ª–∏ –∫—Ä–µ—Å—Ç–∏–∫ —É–∂–µ –µ—Å—Ç—å —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º, –Ω–æ–≤—ã–π –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º

        const icon = document.createElement("span");  // –°–æ–∑–¥–∞—ë–º span –¥–ª—è –∏–∫–æ–Ω–∫–∏ –∫—Ä–µ—Å—Ç–∏–∫–∞
        icon.className = "material-symbols-outlined gap-wrong-icon";  // –í–µ—à–∞–µ–º –∫–ª–∞—Å—Å—ã Material Symbols + –Ω–∞—à .gap-wrong-icon
        icon.textContent = "close_small";  // –ò–º—è –∏–∫–æ–Ω–∫–∏ –∫—Ä–µ—Å—Ç–∏–∫–∞ –∏–∑ –Ω–∞–±–æ—Ä–∞ Google Material Symbols

        input.insertAdjacentElement("beforebegin", icon);  // –í—Å—Ç–∞–≤–ª—è–µ–º –∫—Ä–µ—Å—Ç–∏–∫ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞
    }      // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ ensureGapWrongIcon
    
    function removeGapWrongIcon(input) {  // –£–¥–∞–ª—è–µ—Ç –∏–∫–æ–Ω–∫—É –∫—Ä–µ—Å—Ç–∏–∫–∞ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è (–µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å)
        if (!input) return;  // –ï—Å–ª–∏ –ø–æ–ª—è –Ω–µ—Ç, –≤—ã—Ö–æ–¥–∏–º

        let prev = input.previousElementSibling;  // –ë–µ—Ä—ë–º –±–ª–∏–∂–∞–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è
        if (prev && prev.classList && prev.classList.contains("gap-wrong-icon")) {  // –ï—Å–ª–∏ —ç—Ç–æ –Ω–∞—à –∫—Ä–µ—Å—Ç–∏–∫
            prev.remove();  // –£–¥–∞–ª—è–µ–º –∫—Ä–µ—Å—Ç–∏–∫
            return;  // –ò –≤—ã—Ö–æ–¥–∏–º
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å–æ—Å–µ–¥–∞

        if (prev && prev.previousElementSibling) {  // –ï—Å–ª–∏ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è –µ—â—ë —á—Ç–æ-—Ç–æ –µ—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–∞–ª–æ—á–∫–∞)
            const prev2 = prev.previousElementSibling;  // –ë–µ—Ä—ë–º –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Å–µ–¥–∞ —Å–ª–µ–≤–∞
            if (prev2 && prev2.classList && prev2.classList.contains("gap-wrong-icon")) {  // –ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π —Å–ª–µ–≤–∞ ‚Äî –∫—Ä–µ—Å—Ç–∏–∫
                prev2.remove();  // –£–¥–∞–ª—è–µ–º –∫—Ä–µ—Å—Ç–∏–∫
            }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Å–µ–¥–∞
        }  // –ö–æ–Ω–µ—Ü –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
    }      // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ removeGapWrongIcon
    
    function setAnswerRevealed(ans, field, corr) {  // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ –ø–æ–ª—è —Å—Ç—Ä–µ–ª–∫—É –∏ —Å—Ç—Ä–æ–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        if (!ans || !field) return;  // –ï—Å–ª–∏ –Ω–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Ç–≤–µ—Ç–∞ –∏–ª–∏ —Å–∞–º–æ–≥–æ –ø–æ–ª—è, –≤—ã—Ö–æ–¥–∏–º
        const old = ans.querySelector(".answer-revealed");  // –ò—â–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –≤ —ç—Ç–æ–º –æ—Ç–≤–µ—Ç–µ —Å—Ç–∞—Ä–æ–≥–æ –±–ª–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
        if (old) {  // –ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Ç–∞–∫–æ–π –±–ª–æ–∫
            old.remove();  // –£–¥–∞–ª—è–µ–º –µ–≥–æ, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–ª–æ–∫–∞

        if (!corr) return;  // –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –ø—É—Å—Ç–∞—è, –¥–∞–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º

        const normalized = corr.split("/").map(s => s.trim()).join(" / ");  // –†–∞–∑–±–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ "/", –æ–±—Ä–µ–∑–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ —Å–æ–±–∏—Ä–∞–µ–º —á–µ—Ä–µ–∑ " / "
        if (!normalized) return;  // –ï—Å–ª–∏ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç—Ä–æ–∫–∞ –ø—É—Å—Ç–∞—è, –≤—ã—Ö–æ–¥–∏–º

        const span = document.createElement("span");  // –°–æ–∑–¥–∞—ë–º span –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–µ–ª–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        span.className = "answer-revealed";  // –í–µ—à–∞–µ–º –Ω–∞—à –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        span.textContent = " \u2192 " + normalized;  // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª —Å—Ç—Ä–µ–ª–∫–∏ "‚Üí" –∏ –¥–∞–ª–µ–µ —Å—Ç—Ä–æ–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

        field.insertAdjacentElement("afterend", span);  // –í—Å—Ç–∞–≤–ª—è–µ–º –±–ª–æ–∫ —Å—Ä–∞–∑—É –ü–û–°–õ–ï –ø–æ–ª—è –≤–≤–æ–¥–∞ (—Å–ø—Ä–∞–≤–∞ –æ—Ç –∑–∞—á—ë—Ä–∫–Ω—É—Ç–æ–≥–æ –æ—Ç–≤–µ—Ç–∞)
    }      // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ setAnswerRevealed

    function setPlugGapRevealed(ans, gapEl, corr) {    // –ü–æ–∫–∞–∑ "‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç" –¥–ª—è MCQGAP / MCQGAPS:
    // –º—ã –ù–ï –º–µ–Ω—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ plug-gap (—Ç–∞–º –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ–ø—ã—Ç–∫–∞ —É—á–µ–Ω–∏–∫–∞),
    // –∞ –ø—Ä–æ—Å—Ç–æ –¥–æ–ø–∏—Å—ã–≤–∞–µ–º –ø–æ—Å–ª–µ –Ω–µ–≥–æ "‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç".
        if (!gapEl || !corr) return;

        // –ï—Å–ª–∏ —Ä—è–¥–æ–º —Å —ç—Ç–∏–º gap —É–∂–µ –µ—Å—Ç—å –ø–æ–∫–∞–∑–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç ‚Äî —É–±–∏—Ä–∞–µ–º –µ–≥–æ
        const next = gapEl.nextElementSibling;
        if (next && next.classList && next.classList.contains('answer-revealed')) {
            next.remove();
        }

        const span = document.createElement('span');
        span.classList.add('answer', 'answer-revealed');
        span.textContent = ' \\u2192 ' + corr;  // —Å—Ç—Ä–µ–ª–∫–∞ ‚Üí + –ø—Ä–æ–±–µ–ª

        gapEl.insertAdjacentElement('afterend', span);

        // –ü–æ–º–µ—á–∞–µ–º, —á—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ ans —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω –æ—Ç–≤–µ—Ç
        ans.dataset.revealed = '1';
    }
    
    // === –ü–æ–ø–∞–ø —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π GAP ===
    let currentGapAltPopup = null;  // –•—Ä–∞–Ω–∏–º —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–µ–∫—É—â–∏–π –æ—Ç–∫—Ä—ã—Ç—ã–π –ø–æ–ø–∞–ø —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏ (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)

    function closeGapAltPopup() {  // –ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ–ø–∞–ø —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏
        if (currentGapAltPopup && currentGapAltPopup.parentNode) {  // –ï—Å–ª–∏ –ø–æ–ø–∞–ø —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ DOM
            currentGapAltPopup.parentNode.removeChild(currentGapAltPopup);  // –£–¥–∞–ª—è–µ–º –ø–æ–ø–∞–ø –∏–∑ DOM
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –ø–æ–ø–∞–ø–∞
        currentGapAltPopup = null;  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–µ–∫—É—â–∏–π –ø–æ–ø–∞–ø
    }  // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ closeGapAltPopup
    
    function showGapAltPopup(anchor, text) {  // –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ø–∞–ø —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏ –≤–æ–∑–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∏–∫–æ–Ω–∫–∏ (anchor)
        closeGapAltPopup();  // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø–æ–ø–∞–ø, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
        if (!text) return;  // –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç, –ø–æ–ø–∞–ø –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º

        const popup = document.createElement("div");  // –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–ø–∞–ø–∞
        popup.className = "gap-alt-popup";  // –ù–∞–∑–Ω–∞—á–∞–µ–º –∫–ª–∞—Å—Å –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–ø–∞–ø–∞
        popup.textContent = text;  // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–æ–ø–∞–ø —Å—Ç—Ä–æ–∫—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ —Ç–æ—á–Ω–æ —Ç–∞–∫, –∫–∞–∫ –æ–Ω–∞ —É–∫–∞–∑–∞–Ω–∞ –≤ –∫–ª—é—á–µ

        const rect = anchor.getBoundingClientRect();  // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ —Ä–∞–∑–º–µ—Ä—ã –∏–∫–æ–Ω–∫–∏ (–≥–ª–∞–∑–∏–∫–∞) –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        popup.style.position = "fixed";  // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–∫–Ω–∞
        popup.style.left = rect.left + "px";  // –°—Ç–∞–≤–∏–º –ø–æ–ø–∞–ø –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –ø–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é –∏–∫–æ–Ω–∫–∏
        popup.style.top = (rect.bottom + 4) + "px";  // –°—Ç–∞–≤–∏–º –ø–æ–ø–∞–ø —á—É—Ç—å –Ω–∏–∂–µ –∏–∫–æ–Ω–∫–∏ (–Ω–∞ 4 –ø–∏–∫—Å–µ–ª—è)

        document.body.appendChild(popup);  // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ø–∞–ø –≤ <body>
        currentGapAltPopup = popup;  // –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –ø–æ–ø–∞–ø –∫–∞–∫ —Ç–µ–∫—É—â–∏–π –æ—Ç–∫—Ä—ã—Ç—ã–π

        // –õ—é–±–æ–π —Å–ª–µ–¥—É—é—â–∏–π –∫–ª–∏–∫ (–≤–Ω—É—Ç—Ä–∏ –∏–ª–∏ —Å–Ω–∞—Ä—É–∂–∏ –ø–æ–ø–∞–ø–∞) –¥–æ–ª–∂–µ–Ω –µ–≥–æ –∑–∞–∫—Ä—ã—Ç—å
        setTimeout(() => {  // –ò—Å–ø–æ–ª—å–∑—É–µ–º setTimeout, —á—Ç–æ–±—ã –Ω–µ –ø–æ–π–º–∞—Ç—å —Ç–æ—Ç –∂–µ –∫–ª–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫—Ä—ã–ª –ø–æ–ø–∞–ø
            const handler = () => {  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É
                closeGapAltPopup();  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ–ø–∞–ø
            };  // –ö–æ–Ω–µ—Ü –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
            document.addEventListener("click", handler, { once: true });  // –í–µ—à–∞–µ–º –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç
        }, 0);  // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è
    }  // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ showGapAltPopup
    
    function insertAltIconIfNeeded(input, correctAnswer) {  // –î–æ–±–∞–≤–ª—è–µ—Ç –∏–∫–æ–Ω–∫—É "visibility" —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è, –µ—Å–ª–∏ –≤ –∫–ª—é—á–µ –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
        if (!input || !correctAnswer) return;  // –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª—è –∏–ª–∏ –Ω–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º, –≤—ã—Ö–æ–¥–∏–º
        if (!correctAnswer.includes("/")) return;  // –ï—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ –Ω–µ—Ç "/", –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ—Ç ‚Äî –≥–ª–∞–∑–∏–∫ –Ω–µ –Ω—É–∂–µ–Ω

        const prev = input.previousElementSibling;  // –ë–µ—Ä—ë–º –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å–æ—Å–µ–¥–∞ —Å–ª–µ–≤–∞ –æ—Ç –ø–æ–ª—è
        let hasAlt = prev && prev.classList && prev.classList.contains("alt-icon");  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω —É–∂–µ –∏–∫–æ–Ω–∫–æ–π "alt-icon"

        const prev2 = prev && prev.previousElementSibling;  // –ë–µ—Ä—ë–º –µ—â—ë –æ–¥–Ω–æ–≥–æ —Å–æ—Å–µ–¥–∞ —Å–ª–µ–≤–∞ (–Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –∏–∫–æ–Ω–æ–∫ –ø–æ–º–µ–Ω—è–ª—Å—è)
        if (!hasAlt && prev2 && prev2.classList && prev2.classList.contains("alt-icon")) {  // –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π –Ω–µ alt-icon, –Ω–æ –≤—Ç–æ—Ä–æ–π ‚Äî alt-icon
            hasAlt = true;  // –°—á–∏—Ç–∞–µ–º, —á—Ç–æ –∏–∫–æ–Ω–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        }  // –ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ—Å–µ–¥–∞

        if (hasAlt) return;  // –ï—Å–ª–∏ –∏–∫–æ–Ω–∫–∞ alt —É–∂–µ –µ—Å—Ç—å (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–≤—É—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ª–µ–≤–∞), –Ω–æ–≤—É—é –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º

        const icon = document.createElement("span");  // –°–æ–∑–¥–∞—ë–º —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –∏–∫–æ–Ω–∫–∏ –≥–ª–∞–∑–∏–∫–∞
        icon.textContent = "visibility";  // –ò–º—è –∏–∫–æ–Ω–∫–∏ (–≥–ª–∞–∑–∏–∫) –∏–∑ –Ω–∞–±–æ—Ä–∞ Material Symbols
        icon.className = "material-symbols-outlined alt-icon";  // –ù–∞–∑–Ω–∞—á–∞–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏–∫–æ–Ω–∫–∏

        icon.addEventListener("click", (ev) => {  // –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ –∏–∫–æ–Ω–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–ø–∞–ø —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏
            ev.stopPropagation();  // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–ø–ª—ã—Ç–∏–µ, —á—Ç–æ–±—ã —ç—Ç–æ—Ç –∂–µ –∫–ª–∏–∫ –Ω–µ –∑–∞–∫—Ä—ã–ª –ø–æ–ø–∞–ø —Å—Ä–∞–∑—É –∂–µ
            showGapAltPopup(icon, correctAnswer);  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ –∫–∞–∫ –æ–Ω–∞ –µ—Å—Ç—å –≤ –∫–ª—é—á–µ
        });  // –ö–æ–Ω–µ—Ü –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–∞ –ø–æ –∏–∫–æ–Ω–∫–µ

        input.insertAdjacentElement("beforebegin", icon);  // –í—Å—Ç–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≥–ª–∞–∑–∏–∫–∞ –ü–ï–†–ï–î –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ (—Å–ª–µ–≤–∞, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≥–∞–ª–æ—á–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å)
    }  // –ö–æ–Ω–µ—Ü —Ñ—É–Ω–∫—Ü–∏–∏ insertAltIconIfNeeded

//#endregion
// ======================================================================

//#region SCORE MANAGER & PAGE PROGRESS
const ScoreManager = {
    recalcBlock(blockEl){ 
        const res = scoreById(blockEl) || {unitsTotal:0,correctUnits:0,wrongUnits:0,unansweredUnits:0};
        const p = parseFloat(blockEl.dataset.points||"1")||1;
        const unitsTotal = res.unitsTotal;
        const pointsMax = unitsTotal * p;
        const pointsCorrect = res.correctUnits * p;
        const pointsWrong = res.wrongUnits * p;
        const pointsUnanswered = res.unansweredUnits * p;
        const percent = unitsTotal>0 ? Math.round(100*res.correctUnits/unitsTotal) : 0;

        // –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
        ScoreManager.renderBlockProgress(blockEl, percent);
        ScoreManager.renderBlockScale(blockEl, unitsTotal);

        return { pointsMax, pointsCorrect, pointsWrong, pointsUnanswered };
    },
    // –¢–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–∞–º–∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
    renderBlockPoints(blockEl, X, Y, Z){ },
    renderBlockProgress(blockEl, percent){ 
        const sep = blockEl.querySelector(".exercise-separator");
        if (!sep) return;

        const bar = sep.querySelector(".exercise-progress-bar");
        const fill = sep.querySelector(".exercise-progress-fill");
        const icon = sep.querySelector(".exercise-progress-icon");
        if (!bar || !fill || !icon) return;

        // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç
        const p = Math.max(0, Math.min(100, Number(percent) || 0));

        // –î–≤–∏–≥–∞–µ–º –∑–∞–ª–∏–≤–∫—É –∏ –∏–∫–æ–Ω–∫—É (X-–æ—Å—å ‚Äî —á–µ—Ä–µ–∑ transition –≤ CSS)
        fill.style.width = p + "%";
        icon.style.left = p + "%";
        icon.setAttribute("aria-label", p + "% correct in this exercise");

        // –í—ã–±–∏—Ä–∞–µ–º —Å–º–∞–π–ª–∏–∫ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º
        let face = "üòü";
        if (p >= 90) {
            face = "üòÅ";      // 90‚Äì100%
        } else if (p >= 75) {
            face = "üôÇ";      // 75‚Äì89%
        } else if (p >= 50) {
            face = "üòê";      // 50‚Äì74%
        } else if (p >= 25) {
            face = "üòï";      // 25‚Äì49%
        } else if (p > 0) {
            face = "üòü";      // 1‚Äì24%
        } else {
            face = "üòâ";      // 0% choose: üôÇ üòä üòè üòé üòâ üòá 
        }
        icon.textContent = face;

        // –õ—ë–≥–∫–∏–π bounce –≤ –∫–æ–Ω—Ü–µ –ø—É—Ç–∏:
        // —Å–Ω–∏–º–∞–µ–º –∫–ª–∞—Å—Å, —Ñ–æ—Ä—Å–∏—Ä—É–µ–º reflow –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å–Ω–æ–≤–∞
        icon.classList.remove("icon-bounce");
        void icon.offsetWidth;
        icon.classList.add("icon-bounce");
    },
    renderBlockScale(blockEl, unitsTotal){ 
        const sep = blockEl.querySelector(".exercise-separator");
        if (!sep) return;

        const track = sep.querySelector(".exercise-progress-track");
        if (!track) return;

        const scale = track.querySelector(".exercise-progress-scale");
        if (!scale) return;

        const n = Number(unitsTotal) || 0;
        if (n <= 0) {
            scale.innerHTML = "";
            scale.removeAttribute("data-max-units");
            return;
        }

        // –ù–µ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ–º —à–∫–∞–ª—É, –µ—Å–ª–∏ —É–∂–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∂–µ N
        const prev = Number(scale.dataset.maxUnits || "0");
        if (prev === n && scale.childElementCount > 0) return;

        scale.innerHTML = "";
        scale.dataset.maxUnits = String(n);

        const frag = document.createDocumentFragment();
        const totalSteps = n + 1; // –æ—Ç 0 –¥–æ n –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ

        // –®–∞–≥ –ø–æ–¥–ø–∏—Å–µ–π:
        //  - –¥–æ 15 —é–Ω–∏—Ç–æ–≤ ‚Äî –∫–∞–∂–¥—ã–π
        //  - 16..30       ‚Äî –∫–∞–∂–¥—ã–π 2-–π
        //  - >30          ‚Äî –∫–∞–∂–¥—ã–π 5-–π
        let labelStep = 1;
        if (n > 30) {
            labelStep = 5;
        } else if (n > 15) {
            labelStep = 2;
        }

        for (let i = 0; i < totalSteps; i++) {
            const step = document.createElement("div");
            step.className = "scale-step";

            const tick = document.createElement("span");
            tick.className = "scale-tick";
            // –ë–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏: –Ω–∞—á–∞–ª–æ, –∫–æ–Ω–µ—Ü, –∏ –∫–∞–∂–¥—ã–µ 5 ‚Äî –µ—Å–ª–∏ —é–Ω–∏—Ç–æ–≤ –º–Ω–æ–≥–æ
            if (i === 0 || i === n || (n >= 5 && i % 5 === 0)) {
                tick.classList.add("scale-tick-major");
            }

            const label = document.createElement("span");
            label.className = "scale-label";

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥–ø–∏—Å–∏ –ø–æ –ø—Ä–∞–≤–∏–ª—É:
            //  - –∫–∞–∂–¥–∞—è labelStep-—è
            //  - –∏ –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π n, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —à–∞–≥
            if (i === 0 || i === n || (i % labelStep === 0)) {
                label.textContent = String(i);
            } else {
                label.textContent = "";
            }

            step.appendChild(tick);
            step.appendChild(label);
            frag.appendChild(step);
        }

        scale.appendChild(frag);
    },
    recalcAllBlocks(){ 
        const blocks = Array.from(document.querySelectorAll("[data-points]"));
        const totals = { sumMax:0, sumCorrect:0, sumWrong:0, sumUnanswered:0 };
        blocks.forEach(b=>{ 
            const t = ScoreManager.recalcBlock(b);
            if(!t) return;
            totals.sumMax += t.pointsMax;
            totals.sumCorrect += t.pointsCorrect;
            totals.sumWrong += t.pointsWrong;
            totals.sumUnanswered += t.pointsUnanswered;
        });
        ScoreManager.renderPageTotals(totals);
        return totals;
    },
    renderPageTotals(t){ 
        ensurePageProgress();
        const wrap = document.getElementById("page-progress");
        if (!wrap) return;

        const mainVal  = wrap.querySelector(".page-progress-main-value");
        const correctEl = wrap.querySelector(".page-progress-correct");
        const wrongEl   = wrap.querySelector(".page-progress-wrong");
        const emptyEl   = wrap.querySelector(".page-progress-empty");

        const max = t.sumMax;
        let a = 0, b = 0, c = 100, answered = 0;

        if (max > 0) {
            a = Math.round(100 * t.sumCorrect / max);    // –≤–µ—Ä–Ω—ã–µ
            b = Math.round(100 * t.sumWrong   / max);    // –Ω–µ–≤–µ—Ä–Ω—ã–µ
            c = Math.max(0, 100 - a - b);                // –µ—â—ë –ø—É—Å—Ç—ã–µ
            answered = Math.min(100, a + b);             // –≤—Å–µ–≥–æ –æ—Ç–≤–µ—á–µ–Ω–æ
        }

        if (mainVal)  mainVal.textContent  = answered + "%";
        if (correctEl) correctEl.textContent = a + "%";
        if (wrongEl)   wrongEl.textContent   = b + "%";
        if (emptyEl)   emptyEl.textContent   = c + "%";

        // –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –Ω–∞–≤–µ–¥–µ–Ω–∏—é
        const title = "–ù–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ: –æ—Ç–≤–µ—á–µ–Ω–æ " + answered +
                        "%, –≤–µ—Ä–Ω–æ " + a + "%, –Ω–µ–≤–µ—Ä–Ω–æ " + b + "%";
        if (wrap) {
            wrap.title = title;
            wrap.setAttribute("aria-label", title);
        }
    },
    markChecked(blockEl){ blockEl.dataset.checked = "true"; },
};

function ensurePageProgress(){
    if (document.getElementById("page-progress")) return;
    const wrap = document.createElement("div");
    wrap.id = "page-progress";
    wrap.className = "page-progress";
    wrap.innerHTML = `
    <div class="page-progress-inner">
        <div class="page-progress-main-glow"></div>
        <button class="page-progress-orb orb-correct" type="button" aria-label="Correct answers">
            <span class="material-symbols-outlined">check_circle</span>
            <span class="page-progress-correct">0%</span>
        </button>
        <button class="page-progress-orb orb-wrong" type="button" aria-label="Wrong answers">
            <span class="material-symbols-outlined">cancel</span>
            <span class="page-progress-wrong">0%</span>
        </button>
        <button class="page-progress-orb orb-empty" type="button" aria-label="Unanswered">
            <span class="material-symbols-outlined">circle</span>
            <span class="page-progress-empty">100%</span>
        </button>
        <button class="page-progress-main" type="button">
            <span class="page-progress-main-value">0%</span>
        </button>
    </div>`;
    document.body.appendChild(wrap);

    const mainBtn = wrap.querySelector(".page-progress-main");
    if (mainBtn) {
        mainBtn.addEventListener("click", function(ev) {
            ev.preventDefault();
            wrap.classList.toggle("is-open");
        });
    }
    document.addEventListener("click", function(ev) {
        const inner = wrap.querySelector(".page-progress-inner");
        if (!inner) return;

        // –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –Ω–µ –ø–æ –∫–ª–∞—Å—Ç–µ—Ä—É –∏ –Ω–µ –ø–æ –µ–≥–æ –¥–µ—Ç—è–º ‚Äî –∑–∞–∫—Ä—ã–≤–∞–µ–º –æ—Ä–±–∏—Ç—ã
        if (!inner.contains(ev.target)) {
            wrap.classList.remove("is-open");
        }
    });
}

function score_attachWrappers(){
    const wrap = (name, setChecked) => {
        const fn = window[name];
        if (typeof fn === "function") {
            window[name] = function(...args) {
                const ret = fn.apply(this, args);
                try {
                    const blockId = args[0];
                    const el = (typeof blockId === "string")
                        ? document.getElementById(blockId)
                        : null;
                    if (el) {
                        if (setChecked) el.dataset.checked = "true";
                        // –ü–µ—Ä–µ—Å—á—ë—Ç –±–∞–ª–ª–æ–≤
                        ScoreManager.recalcBlock(el);
                        ScoreManager.recalcAllBlocks();
                    }
                } catch (_e) {}
                return ret;
            };
        }
    };

    wrap("countAnswers",  true);
    wrap("checkAnswers",  true);
    wrap("revealAnswers", false);
    wrap("countById",     true);
    wrap("checkById",     true);
}

//#endregion
// ======================================================================

//#region LOCKING & BUTTONS CONTROL
function lockExercise(blockId) {
    const container = document.getElementById(blockId);
    if (!container) return;

    // –ø–æ–º–µ—Ç–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    container.dataset.locked = "true";
    container.classList.add("locked-exercise");

    // 1) –ü–æ–ª—è –≤–≤–æ–¥–∞
    container.querySelectorAll('input, textarea, select').forEach(el => {
        el.disabled = true;
        el.readOnly = true;
        el.tabIndex = -1;
        el.setAttribute('aria-disabled','true');
    });

    // 2) ContentEditable
    container.querySelectorAll('[contenteditable="true"]').forEach(el => {
        el.setAttribute('contenteditable','false');
    });

    // 3) Drag & Drop
    container.querySelectorAll('[draggable="true"], .draggable').forEach(el => {
        try { el.draggable = false; } catch {}
    });

    // 4) –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (MCQ-family/–ø—É–ª—ã/—Å–ª–æ—Ç—ã –∏ —Ç.–ø.)
    const interactiveSelectors = [
        '.click-option', '.option', '.mcq-option', '.mcq-card',
        '.mcqinline', '.click-word',
        '.matchimg-phrase', '.unassign',
        '.pool-element',
        '[role="button"]', 'button'
    ];
    container.querySelectorAll(interactiveSelectors.join(',')).forEach(el => {
        // ‚ùó –Ω–µ –æ—Ç–∫–ª—é—á–∞–µ–º –∞—É–¥–∏–æ-–∏–∫–æ–Ω–∫–∏
        if (el.classList && el.classList.contains('aud-icon')) return;
        el.onclick = null; el.onpointerdown = null; el.onmousedown = null; el.onmouseup = null;
        el.ontouchstart = null; el.ontouchend = null; el.onkeydown = null; el.onkeyup = null;
        el.style.pointerEvents = 'none';
        el.tabIndex = -1;
        el.setAttribute('aria-disabled','true');
        el.classList.add('is-disabled');
    });

    // 5) –ü—Ä—è—á–µ–º –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    const countBtn = container.querySelector('.count-btn');
    const checkBtn = container.querySelector('.check-btn');
    const revealBtn  = container.querySelector('.reveal-btn');
    if (countBtn) countBtn.style.display = 'none';
    if (checkBtn) checkBtn.style.display = 'none';
    if (revealBtn)  revealBtn.style.display  = 'none';
}

//#endregion
// ======================================================================




// ======================================================================
// ==================== MULTIMEDIA
// ======================================================================

//#region AUDIO SYSTEM
    // Audio _resetAllButtons
(function() {
    function _resetAllButtons() {
        document.querySelectorAll('[data-audio-id], [aria-controls], .aud-icon').forEach(btn => {
            btn.classList.remove('playing','is-playing');
            btn.setAttribute('aria-pressed','false');

            const iconSpan = btn.querySelector('.material-symbols-outlined');
            const playName = btn.getAttribute('data-play-icon') || 'play_circle';

            if (iconSpan) {
                iconSpan.textContent = playName;
                btn.setAttribute('aria-label','Play audio');
            } else if (btn.childElementCount === 0) {
                const playTxt = btn.getAttribute('data-play-text') || 'play_circle';
                btn.textContent = playTxt;
                btn.classList.add('material-symbols-outlined');
            }
        });
    }
    function _buttonsFor(a) {
        if (!a || !a.id) return [];
        return Array.from(
            document.querySelectorAll(
                `[data-audio-id="${a.id}"], [aria-controls="${a.id}"], .aud-icon[data-target="${a.id}"]`
            )
        );
    }
    function _setButtonsPlaying(a) {
        _buttonsFor(a).forEach(btn => {
            btn.classList.add('playing','is-playing');
            btn.setAttribute('aria-pressed','true');

            const iconSpan = btn.querySelector('.material-symbols-outlined');
            const pauseName = btn.getAttribute('data-pause-icon') || 'pause_circle';

            if (iconSpan) {
                iconSpan.textContent = pauseName;
                btn.setAttribute('aria-label','Pause audio');
            } else if (btn.childElementCount === 0) {
                const pauseTxt = btn.getAttribute('data-pause-text') || 'pause_circle';
                btn.textContent = pauseTxt;
                btn.classList.add('material-symbols-outlined');
            }
        });
    }
    function _hardStop(a) {
        try { a.pause(); } catch(e) {}
        try { a.currentTime = 0; } catch(e) {}
    }

    // –ì–õ–û–ë–ê–õ–¨–ù–´–ï —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è onplay/onpause/onended –Ω–∞ <audio>
    window.__au_onplay = function(current) {
        // —Å—Ç–æ–ø –∏ –æ–±–Ω—É–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
        document.querySelectorAll('audio').forEach(a => { if (a !== current) _hardStop(a); });
        // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫
        _resetAllButtons();
        _setButtonsPlaying(current);
        // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∏–∂–Ω–µ–≥–æ –±–∞—Ä–∞
        if (window.__gapAudioBar && window.__gapAudioBar.setCurrent) {
            window.__gapAudioBar.setCurrent(current);
        }
    };
    window.__au_onpause = function(current) {
        // –ø–∞—É–∑–∞ ‚Üí –≤–µ—Ä–Ω—É—Ç—å –∏–∫–æ–Ω–∫–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "play"
        _buttonsFor(current).forEach(btn => {
            btn.classList.remove('playing','is-playing');
            btn.setAttribute('aria-pressed','false');

            const iconSpan = btn.querySelector('.material-symbols-outlined');
            const playName = btn.getAttribute('data-play-icon') || 'play_circle';

            if (iconSpan) {
                iconSpan.textContent = playName;
                btn.setAttribute('aria-label','Play audio');
            } else if (btn.childElementCount === 0) {
                const playTxt = btn.getAttribute('data-play-text') || 'play_circle';
                btn.textContent = playTxt;
                btn.classList.add('material-symbols-outlined');
            }
        });
        // —É–≤–µ–¥–æ–º–ª—è–µ–º –Ω–∏–∂–Ω–∏–π –±–∞—Ä
        if (window.__gapAudioBar && window.__gapAudioBar.onPause) {
            window.__gapAudioBar.onPause(current);
        }
    };
    window.__au_onended = function(current) {
        // –∫–æ–Ω–µ—Ü —Ç—Ä–µ–∫–∞ ‚Üí –≤–µ—Ä–Ω—É—Ç—å –∏–∫–æ–Ω–∫–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "play"
        _buttonsFor(current).forEach(btn => {
            btn.classList.remove('playing','is-playing');
            btn.setAttribute('aria-pressed','false');

            const iconSpan = btn.querySelector('.material-symbols-outlined');
            const playName = btn.getAttribute('data-play-icon') || 'play_circle';

            if (iconSpan) {
                iconSpan.textContent = playName;
                btn.setAttribute('aria-label','Play audio');
            } else if (btn.childElementCount === 0) {
                const playTxt = btn.getAttribute('data-play-text') || 'play_circle';
                btn.textContent = playTxt;
                btn.classList.add('material-symbols-outlined');
            }
        });
        // –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç—Ä–µ–∫–∞ –Ω–∏–∂–Ω–∏–π –±–∞—Ä –≤–µ–¥—ë–º —Å–µ–±—è —Ç–∞–∫ –∂–µ, –∫–∞–∫ –ø—Ä–∏ –ø–∞—É–∑–µ
        if (window.__gapAudioBar && window.__gapAudioBar.onPause) {
            window.__gapAudioBar.onPause(current);
        }
    };
})();
    
    // Audio icon: play/pause (–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç)
    document.addEventListener('click', function(e) {
    const btn = e.target.closest('.aud-icon');
    if (!btn) return;
    const id = btn.getAttribute('data-target');
    const el = id ? document.getElementById(id) : null;
    if (!el) return;

    if (el.paused) {
        // —Å—Ç–æ–ø –∏ –æ–±–Ω—É–ª–µ–Ω–∏–µ –í–°–ï–• –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∞—É–¥–∏–æ
        document.querySelectorAll('audio').forEach(a => {
        if (a !== el) {
            try { a.pause(); } catch(e) {}
            try { a.currentTime = 0; } catch(e) {}
        }
        });
        // –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫
        if (window.__au_onplay) { __au_onplay(el); }
        // –∑–∞–ø—É—Å–∫ —Ç–µ–∫—É—â–µ–≥–æ
        el.play();
    } else {
        // –ø–æ–ª–Ω—ã–π —Å—Ç–æ–ø —Ç–µ–∫—É—â–µ–≥–æ
        try { el.pause(); } catch(e) {}
        try { el.currentTime = 0; } catch(e) {}
        if (window.__au_onpause) { __au_onpause(el); }
    }
    });
    
    // GLOBAL AUDIO BAR ‚Äì –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∞—É–¥–∏–æ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –Ω–∏–∂–Ω—é—é –ø–∞–Ω–µ–ª—å
    document.addEventListener('DOMContentLoaded', function() {
    const bar = document.getElementById('audio-global-player');
    if (!bar) {
        window.__gapAudioBar = null;
        return;
    }

    const playBtn  = bar.querySelector('.audio-global-player-playbtn');
    const loopBtn  = bar.querySelector('.audio-global-player-loopbtn');
    const closeBtn = bar.querySelector('.audio-global-player-closebtn');
    const iconEl = playBtn ? playBtn.querySelector('.material-symbols-outlined') : null;
    const curEl = bar.querySelector('.audio-global-player-current');
    const totalEl = bar.querySelector('.audio-global-player-total');
    const waveformCanvas = bar.querySelector('.audio-global-player-waveform-canvas');
    const waveformCtx = waveformCanvas ? waveformCanvas.getContext('2d') : null;

    var waveformCache = {};
    var audioCtx = null;
    var currentAudio = null;
    var currentPeaks = null;
    var currentPlayedRatio = 0;
    var loopEnabled = false;

    function syncLoopUI() {
    if (!loopBtn) return;
    loopBtn.classList.toggle('is-active', !!loopEnabled);
    loopBtn.setAttribute('aria-pressed', loopEnabled ? 'true' : 'false');
    }

    function applyLoopToCurrent() {
    if (!currentAudio) return;
    try { currentAudio.loop = !!loopEnabled; } catch(e) {}
    }


    function formatTime(sec) {
        if (!isFinite(sec)) return '0:00';
        sec = Math.max(sec, 0);
        var m = Math.floor(sec / 60);
        var s = Math.floor(sec % 60);
        return m + ':' + (s < 10 ? '0' + s : s);
    }

    function bind(a) {
        a.addEventListener('timeupdate', function() {
            if (a !== currentAudio) return;
            var t = a.currentTime || 0;
            var d = a.duration || 0;
            if (curEl) curEl.textContent = formatTime(t);

            if (d > 0) {
                var ratio = t / d;
                if (ratio < 0) ratio = 0;
                if (ratio > 1) ratio = 1;
                currentPlayedRatio = ratio;
            } else {
                currentPlayedRatio = 0;
            }

            if (waveformCanvas && currentPeaks) {
                drawWaveformFromPeaks(currentPeaks, currentPlayedRatio);
            }
        });

        a.addEventListener('loadedmetadata', function() {
            if (a !== currentAudio) return;
            if (isFinite(a.duration) && totalEl) {
                totalEl.textContent = formatTime(a.duration);
            }
        });

        a.addEventListener('ended', function() {
            if (a !== currentAudio) return;
            if (iconEl) iconEl.textContent = 'play_circle';
            currentPlayedRatio = 0;
            if (waveformCanvas && currentPeaks) {
                drawWaveformFromPeaks(currentPeaks, currentPlayedRatio);
            }
        });
    }

    function ensureAudioContext() {
      if (audioCtx) return audioCtx;
      var AC = window.AudioContext || window.webkitAudioContext;
      if (!AC) return null;
      audioCtx = new AC();
      return audioCtx;
    }

    function clearWaveform() {
      currentPeaks = null;
      if (!waveformCanvas || !waveformCtx) return;
      var rect = waveformCanvas.getBoundingClientRect();
      var w = rect.width || waveformCanvas.clientWidth || 0;
      var h = rect.height || waveformCanvas.clientHeight || 0;
      if (w <= 0 || h <= 0) return;
      var dpr = window.devicePixelRatio || 1;
      waveformCanvas.width = w * dpr;
      waveformCanvas.height = h * dpr;
      waveformCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
      waveformCtx.clearRect(0, 0, w, h);
    }

    function computePeaks(channelData, peakCount) {
      var len = channelData.length;
      if (!len || peakCount <= 0) return [];
      if (peakCount > len) peakCount = len;

      var samplesPerPeak = len / peakCount;
      var peaks = new Array(peakCount);
      var max = 0;

      for (var i = 0; i < peakCount; i++) {
        var start = Math.floor(i * samplesPerPeak);
        var end = Math.floor((i + 1) * samplesPerPeak);
        if (end <= start) end = start + 1;
        if (end > len) end = len;

        var sum = 0;
        for (var j = start; j < end; j++) {
          sum += Math.abs(channelData[j] || 0);
        }
        var v = sum / (end - start);
        peaks[i] = v;
        if (v > max) max = v;
      }

      if (max > 0) {
        for (var k = 0; k < peaks.length; k++) {
          peaks[k] = peaks[k] / max;
        }
      } else {
        for (var k2 = 0; k2 < peaks.length; k2++) {
          peaks[k2] = 0;
        }
      }
      return peaks;
    }

    // —Ä–∏—Å—É–µ–º waveform —Ç–∞–∫, —á—Ç–æ–±—ã "–ø—Ä–æ–π–¥–µ–Ω–Ω–∞—è" —á–∞—Å—Ç—å –±—ã–ª–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º –≥–ª–æ—É
    function drawWaveformFromPeaks(peaks, playedRatio) {
      if (!waveformCanvas || !waveformCtx || !peaks || !peaks.length) {
        clearWaveform();
        return;
      }
      var rect = waveformCanvas.getBoundingClientRect();
      var w = rect.width || waveformCanvas.clientWidth || 0;
      var h = rect.height || waveformCanvas.clientHeight || 0;
      if (w <= 0 || h <= 0) return;

      var dpr = window.devicePixelRatio || 1;
      waveformCanvas.width = w * dpr;
      waveformCanvas.height = h * dpr;
      waveformCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
      waveformCtx.clearRect(0, 0, w, h);

      var barCount = peaks.length;
      var barWidth = w / barCount;
      var gap = Math.max(barWidth * 0.3, 0.5);
      var effectiveBarWidth = Math.max(barWidth - gap, 0.5);
      var centerY = h / 2;
      var maxBarHeight = h * 0.9;

      // –±–∞–∑–æ–≤—ã–µ —Å–µ—Ä—ã–µ –ø–∏–∫–∏
      waveformCtx.fillStyle = 'rgba(148, 163, 184, 0.9)';

      for (var i = 0; i < barCount; i++) {
        var v = peaks[i] || 0;
        var bh = Math.max(v * maxBarHeight, 1);
        var x = i * barWidth + gap / 2;
        var y = centerY - bh / 2;
        waveformCtx.fillRect(x, y, effectiveBarWidth, bh);
      }

      if (typeof playedRatio !== 'number') {
        playedRatio = 0;
      }
      if (playedRatio < 0) playedRatio = 0;
      if (playedRatio > 1) playedRatio = 1;

      if (playedRatio > 0) {
        // –≥—Ä–∞–¥–∏–µ–Ω—Ç ¬´–≥–ª–æ—É¬ª, –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ –≤ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–µ
        var grad = waveformCtx.createLinearGradient(0, 0, w, 0);
        grad.addColorStop(0, '#7e0fff');
        grad.addColorStop(1, '#0fffc1');

        waveformCtx.save();
        waveformCtx.globalCompositeOperation = 'source-atop';
        waveformCtx.fillStyle = grad;
        waveformCtx.fillRect(0, 0, w * playedRatio, h);
        waveformCtx.restore();
      }
    }

    function buildWaveformForAudio(a) {
      if (!waveformCanvas || !waveformCtx) return;
      var ctx = ensureAudioContext();
      if (!ctx) {
        clearWaveform();
        return;
      }

      var src = a.currentSrc || a.src;
      if (!src) {
        clearWaveform();
        return;
      }

      if (waveformCache[src] && waveformCache[src].peaks) {
        currentPeaks = waveformCache[src].peaks;
        var ratioCached = (a === currentAudio) ? currentPlayedRatio : 0;
        drawWaveformFromPeaks(currentPeaks, ratioCached);
        return;
      }

      if (waveformCache[src] && waveformCache[src].pending) {
        return;
      }

      waveformCache[src] = { pending: true, peaks: null };

      fetch(src).then(function(resp) {
        return resp.arrayBuffer();
      }).then(function(arrayBuffer) {
        var ctx2 = ensureAudioContext();
        if (!ctx2) throw new Error('No AudioContext');
        return ctx2.decodeAudioData(arrayBuffer);
      }).then(function(audioBuffer) {
        var channelData = audioBuffer.getChannelData(0);
        var desiredBars = 160;
        var peaks = computePeaks(channelData, desiredBars);
        waveformCache[src] = { pending: false, peaks: peaks };
        if (a === currentAudio) {
          currentPeaks = peaks;
          drawWaveformFromPeaks(peaks, currentPlayedRatio);
        }
      }).catch(function(err) {
        waveformCache[src] = { pending: false, peaks: null };
        clearWaveform();
      });
    }

    // –∫–ª–∏–∫ –ø–æ waveform ‚Üí –ø–µ—Ä–µ–º–æ—Ç–∫–∞
    if (waveformCanvas) {
      waveformCanvas.addEventListener('click', function(e) {
        if (!currentAudio || !currentAudio.duration) return;
        const rect = waveformCanvas.getBoundingClientRect();
        let ratio = (e.clientX - rect.left) / rect.width;
        if (!isFinite(ratio)) return;
        if (ratio < 0) ratio = 0;
        if (ratio > 1) ratio = 1;
        currentAudio.currentTime = ratio * currentAudio.duration;
      });
    }

    var allAudios = document.querySelectorAll('audio');
    for (var i = 0; i < allAudios.length; i++) {
        bind(allAudios[i]);
    }

    window.__gapAudioBar = {
        setCurrent: function(a) {
            currentAudio = a;
            applyLoopToCurrent();
            syncLoopUI();
            currentPlayedRatio = (a && a.duration) ? ((a.currentTime || 0) / a.duration) : 0;
            bar.classList.add('audio-global-player-active');
            if (isFinite(a.duration) && totalEl) {
                totalEl.textContent = formatTime(a.duration);
            }
            if (iconEl) iconEl.textContent = 'pause_circle';
            if (waveformCanvas) {
              buildWaveformForAudio(a);
            }
        },
        onPause: function(a) {
            if (a !== currentAudio) return;
            if (iconEl) iconEl.textContent = 'play_circle';
        }
    };

    if (playBtn) {
        playBtn.addEventListener('click', function() {
            if (!currentAudio) return;
            if (currentAudio.paused) {
                currentAudio.play();
            } else {
                currentAudio.pause();
            }
        });
    }

    if (loopBtn) {
    loopBtn.addEventListener('click', function() {
        loopEnabled = !loopEnabled;
        applyLoopToCurrent();
        syncLoopUI();
    });
    }

    function closeAudioBar() {
    if (currentAudio) {
        try { currentAudio.pause(); } catch(e) {}
        try { currentAudio.currentTime = 0; } catch(e) {}
        if (window.__au_onpause) { __au_onpause(currentAudio); }
    }

    currentAudio = null;
    currentPeaks = null;
    currentPlayedRatio = 0;

    if (iconEl) iconEl.textContent = 'play_circle';
    if (curEl) curEl.textContent = '0:00';
    if (totalEl) totalEl.textContent = '0:00';
    clearWaveform();

    bar.classList.remove('audio-global-player-active');
    }

    if (closeBtn) {
    closeBtn.addEventListener('click', closeAudioBar);
    }

    // Space = play/pause, —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–ª–µ–µ—Ä –æ—Ç–∫—Ä—ã—Ç
    document.addEventListener('keydown', function(ev) {
    const isSpace = (ev.code === 'Space' || ev.key === ' ');
    if (!isSpace) return;

    // —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–∞–Ω–µ–ª—å –∞–∫—Ç–∏–≤–Ω–∞
    if (!bar.classList.contains('audio-global-player-active')) return;

    // –Ω–µ –º–µ—à–∞–µ–º –≤–≤–æ–¥—É —Ç–µ–∫—Å—Ç–∞
    const t = ev.target;
    const tag = (t && t.tagName) ? t.tagName.toLowerCase() : '';
    if (tag === 'input' || tag === 'textarea' || tag === 'select' || (t && t.isContentEditable)) return;

    ev.preventDefault();

    if (!currentAudio) return;
    if (currentAudio.paused) currentAudio.play();
    else currentAudio.pause();
    });


    });

//#endregion
// ======================================================================

//#region SPEECH RECOGNITION
let SPEECH_RECOGNITION = null;
let SPEECH_RECO_ACTIVE_INPUT = null;
let SPEECH_RECO_ACTIVE_BTN = null;

function initSpeechRecognition() {
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SR) {
        console.warn('SpeechRecognition API is not available in this browser.');
        return null;
    }
    const recog = new SR();
    recog.lang = SPEECH_RECO_LANG || document.documentElement.lang || 'en-US';
    recog.continuous = false;
    recog.interimResults = false;

    recog.onresult = function (event) {
        console.log('Speech onresult:', event);
        const res0 = event.results && event.results[0] && event.results[0][0];
        const transcript = res0 && res0.transcript ? String(res0.transcript).trim() : '';
        if (SPEECH_RECO_ACTIVE_INPUT) {
        // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–∂–µ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É ‚Äî –≤–∞–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ —Å–æ–±—ã—Ç–∏–µ –≤–æ–æ–±—â–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
        SPEECH_RECO_ACTIVE_INPUT.value = transcript;
        try {
            if (typeof autosizeInputs === "function") {
            autosizeInputs();
            }
        } catch (e) {}
        SPEECH_RECO_ACTIVE_INPUT.classList.remove('speech-waiting');
        }
    };

    function resetSpeechUi() {
        if (SPEECH_RECO_ACTIVE_INPUT) {
        SPEECH_RECO_ACTIVE_INPUT.classList.remove('speech-waiting');
        // —Å–∞–º—É —Å—Å—ã–ª–∫—É –Ω–∞ input –æ—á–∏—â–∞–µ–º –≤ onend/onerror
        }
        if (SPEECH_RECO_ACTIVE_BTN) {
        SPEECH_RECO_ACTIVE_BTN.classList.remove('speech-recording');
        const icon = SPEECH_RECO_ACTIVE_BTN.querySelector('.material-symbols-outlined');
        if (icon) {
            icon.textContent = 'mic';
        }
        // —Å–∞–º—É —Å—Å—ã–ª–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—á–∏—â–∞–µ–º –≤ onend/onerror
        }
    }

    recog.onend = function () {
        console.log('Speech onend');
        resetSpeechUi();
        SPEECH_RECO_ACTIVE_INPUT = null;
        SPEECH_RECO_ACTIVE_BTN = null;
    };
    recog.onerror = function (event) {
        console.error('Speech onerror:', event && event.error ? event.error : event);
        resetSpeechUi();
        SPEECH_RECO_ACTIVE_INPUT = null;
        SPEECH_RECO_ACTIVE_BTN = null;
    };

    SPEECH_RECOGNITION = recog;
    return recog;
}

function toggleSpeechForInput(micBtn) {
    if (!SPEECH_RECOGNITION) {
        const created = initSpeechRecognition();
        if (!created) {
        return;
        }
    }
    const recog = SPEECH_RECOGNITION;

    if (SPEECH_RECO_ACTIVE_BTN === micBtn) {
        // –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∫–ª–∏–∫ –ø–æ —Ç–æ–º—É –∂–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
        console.log('Manual stop on the same mic button');
        try {
        recog.stop();
        } catch (e) {
        console.error('Error calling recog.stop() on manual stop:', e);
        }

        // –°—Ä–∞–∑—É –ø—Ä–∏–≤–æ–¥–∏–º UI –≤ –ø–∞—Å—Å–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ,
        // –Ω–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ input/btn –ù–ï –æ–±–Ω—É–ª—è–µ–º ‚Äî —ç—Ç–æ —Å–¥–µ–ª–∞–µ—Ç onend/onerror
        const wrapper = micBtn.closest('.speech-input-wrapper');
        if (wrapper) {
        const input = wrapper.querySelector('input.gap');
        if (input) {
            input.classList.remove('speech-waiting');
        }
        }
        micBtn.classList.remove('speech-recording');
        const icon = micBtn.querySelector('.material-symbols-outlined');
        if (icon) {
        icon.textContent = 'mic';
        }

        return;
    }

    // –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∏ —ç—Ç–æ –¥—Ä—É–≥–∞—è ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏–º –µ—ë —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ
    if (SPEECH_RECO_ACTIVE_BTN && SPEECH_RECO_ACTIVE_BTN !== micBtn) {
        console.log('Stopping previous recognition for another mic button');
        try {
        recog.stop();
        } catch (e) {
        console.error('Error calling recog.stop() for previous button:', e);
        }
    }

    const wrapper = micBtn.closest('.speech-input-wrapper');
    if (!wrapper) return;
    const input = wrapper.querySelector('input.gap');
    if (!input) return;

    SPEECH_RECO_ACTIVE_INPUT = input;
    SPEECH_RECO_ACTIVE_BTN = micBtn;

    input.classList.add('speech-waiting');
    micBtn.classList.add('speech-recording');
    const icon = micBtn.querySelector('.material-symbols-outlined');
    if (icon) {
        icon.textContent = 'stop_circle';
    }

    try {
        recog.lang = SPEECH_RECO_LANG || recog.lang;
    } catch (e) {
        console.error('Error setting recog.lang:', e);
    }

    try {
        console.log('Starting recognition for lang =', recog.lang);
        recog.start();
    } catch (e) {
        console.error('Error starting recognition:', e);
    }
}

document.addEventListener('click', function (evt) {
    const micBtn = evt.target.closest('.speech-mic-btn');
    if (!micBtn) return;
    evt.preventDefault();
    toggleSpeechForInput(micBtn);
});

//#endregion
// ======================================================================





// ======================================================================
// ==================== STICKY POOL (SCROLL)
// ======================================================================
//#region STICKY POOL (SCROLL)
function initStickyPools() {
    const pools = Array.from(document.querySelectorAll('.pool'));
    if (!pools.length) return;

    const items = [];

    pools.forEach(pool => {
        // –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ –ø—É–ª—ã –≤–Ω—É—Ç—Ä–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
        const block = pool.closest('[data-points]');
        if (!block) return;

        // –∫–æ–Ω–µ—Ü –¥–∏–∞–ø–∞–∑–æ–Ω–∞ "–ª–∏–ø–∫–æ—Å—Ç–∏" ‚Äî –∫–æ–≥–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∏–∂–Ω—è—è —Å—Ç—Ä–æ–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏
        const endEl =
            block.querySelector('.exercise-footer-row') ||
            block.querySelector('.exercise-footer') ||
            block.querySelector('.check-btn') ||
            null;

        // –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        if (pool.closest('.pool-sticky-wrap')) return;

        const host = pool.parentElement;
        if (!host) return;

        // 1) —è–∫–æ—Ä—å-—Å—Ç–∞—Ä—Ç (–º–æ–º–µ–Ω—Ç "–∫–æ—Å–Ω—É–ª—Å—è –≤–µ—Ä—Ö–∞ –æ–∫–Ω–∞")
        const sentinel = document.createElement('div');
        sentinel.className = 'pool-sticky-sentinel';

        // 2) –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å–∫–∞—á–∫–∞ —Ä–∞–∑–º–µ—Ç–∫–∏ –ø—Ä–∏ fixed
        const placeholder = document.createElement('div');
        placeholder.className = 'pool-sticky-placeholder';

        // 3) –æ–±—ë—Ä—Ç–∫–∞, –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å
        const wrap = document.createElement('div');
        wrap.className = 'pool-sticky-wrap';

        // –≤—Å—Ç–∞–≤–ª—è–µ–º –≤ DOM –≤ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ, –≥–¥–µ –±—ã–ª –ø—É–ª
        host.insertBefore(sentinel, pool);
        host.insertBefore(placeholder, pool);
        host.insertBefore(wrap, pool);
        wrap.appendChild(pool); // –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Å–∞–º –ø—É–ª –≤–Ω—É—Ç—Ä—å wrap

        items.push({ block, endEl, sentinel, placeholder, wrap, wasStopped: false });
    });

    if (!items.length) return;

    function updateScrollableFlag(it) {
        if (!it.wrap.classList.contains('is-pinned')) {
            it.wrap.classList.remove('pool-scrollable');
            return;
        }

        const vh = window.innerHeight || document.documentElement.clientHeight;
        const limitPx = vh * 0.40; // 40% —ç–∫—Ä–∞–Ω–∞

        // –ø–æ–ª–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—É–ª–∞
        const contentH = it.wrap.scrollHeight;

        const shouldScroll = contentH > (limitPx + 2);
        it.wrap.classList.toggle('pool-scrollable', shouldScroll);

        // —á—Ç–æ–±—ã –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª —Ä–µ–∞–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–µ pinned-–ø—É–ª–∞
        requestAnimationFrame(() => {
            const h = it.wrap.getBoundingClientRect().height;
            it.placeholder.style.height = h + 'px';
        });
    }

    function pin(it) {
        // –µ—Å–ª–∏ —É–∂–µ –∑–∞–∫—Ä–µ–ø–ª—ë–Ω ‚Äî —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏–º —à–∏—Ä–∏–Ω—É/–ª–µ–≤—ã–π –∫—Ä–∞–π
        if (it.wrap.classList.contains('is-pinned')) {
            const r = it.placeholder.getBoundingClientRect();
            it.wrap.style.left = r.left + 'px';
            it.wrap.style.width = r.width + 'px';
            
            // ‚úÖ –Ω–∞ resize/–∏–∑–º–µ–Ω–µ–Ω–∏–µ vh –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—ã—Å–æ—Ç—É pinned-–ø—É–ª–∞
            const h = it.wrap.getBoundingClientRect().height;
            it.placeholder.style.height = h + 'px';

            updateScrollableFlag(it);

            return;
        }

        // –∏–∑–º–µ—Ä—è–µ–º –î–û –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è
        const rect = it.wrap.getBoundingClientRect();

        // —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤—ã—Å–æ—Ç—É, —á—Ç–æ–±—ã –ø–æ—Ç–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ "–ø—Ä—ã–≥–Ω—É–ª"
        it.placeholder.style.height = rect.height + 'px';

        it.wrap.classList.add('is-pinned');
        // –º—è–≥–∫–æ "–≤—ä–µ—Ö–∞—Ç—å" —Å–≤–µ—Ä—Ö—É —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ stop –ø–æ –∫–Ω–æ–ø–∫–∞–º
        if (it.wasStopped) {
            it.wasStopped = false;
            it.wrap.style.transform = 'translateY(-100%)';
            requestAnimationFrame(() => {
                it.wrap.style.transform = 'translateY(0)';
            });
        } else {
            it.wrap.style.transform = 'translateY(0)';
        }

        it.wrap.style.left = rect.left + 'px';
        it.wrap.style.width = rect.width + 'px';
        it.wrap.style.top = '0px';
        // ‚úÖ –ø–æ—Å–ª–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è (–∏ max-height) —É—Ç–æ—á–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É
        requestAnimationFrame(() => {
            const h = it.wrap.getBoundingClientRect().height;
            it.placeholder.style.height = h + 'px';

            updateScrollableFlag(it);
        });

    }

    function unpin(it) {
        if (!it.wrap.classList.contains('is-pinned')) return;

        it.wrap.classList.remove('is-pinned');
        it.wrap.style.left = '';
        it.wrap.style.width = '';
        it.wrap.style.top = '';
        it.placeholder.style.height = '0px';
        it.wrap.style.transform = '';
        it.wrap.classList.remove('pool-scrollable');
    }

    let ticking = false;

    function updateAll() {
        ticking = false;
        const vh = window.innerHeight || document.documentElement.clientHeight;

        items.forEach(it => {
            // —Å—Ç–∞—Ä—Ç: —è–∫–æ—Ä—å –¥–æ—à—ë–ª –¥–æ –≤–µ—Ä—Ö–∞ –æ–∫–Ω–∞
            const startPassed = it.sentinel.getBoundingClientRect().top <= 0;

            // —Å—Ç–æ–ø-–ª–∏–Ω–∏—è: 15% —ç–∫—Ä–∞–Ω–∞ –æ—Ç –Ω–∏–∑–∞
            const stopLine = vh * 0.55;

            let endBelowStopLine = true;
            if (it.endEl) {
                const endTop = it.endEl.getBoundingClientRect().top;
                endBelowStopLine = endTop > stopLine;
            }

            const shouldPin = startPassed && endBelowStopLine;

            if (!endBelowStopLine) {
                if (it.wrap.classList.contains('is-pinned')) it.wasStopped = true;
            }

            if (shouldPin) pin(it);
            else unpin(it);
        });
    }

    function requestUpdate() {
        if (ticking) return;
        ticking = true;
        requestAnimationFrame(updateAll);
    }

    window.addEventListener('scroll', requestUpdate, { passive: true });
    window.addEventListener('resize', requestUpdate);

    // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω
    requestUpdate();
    setTimeout(requestUpdate, 50);
}
//#endregion
// ======================================================================





// ======================================================================
// ==================== ETC
// ======================================================================

//#region MISC
    function free_save(){ /* no-op for now */ }

//#endregion
// ======================================================================

//#region ENTRY POINT
    document.addEventListener("DOMContentLoaded", ()=>{ 
        ensurePageProgress();  // –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

        // 1) –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º–∏
        document.querySelectorAll("[data-points]").forEach(el=>{ 
            if (!el.dataset.checked) el.dataset.checked = "false";  // –µ—Å–ª–∏ —è–≤–Ω–æ –Ω–µ –æ—Ç–º–µ—á–µ–Ω–æ, —Å—á–∏—Ç–∞–µ–º –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–º
        });

        // 2) –°–æ–±–∏—Ä–∞–µ–º KEYS_MAP/BLOCK_CFG –∏ .ans-—é–Ω–∏—Ç—ã
        bootstrapAnsAndKeys();  // –ø–æ–¥–Ω–∏–º–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∫–ª—é—á–µ–π

        // 3) –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ-—Ä–µ—Å–∞–π–∑ –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ —Å –ø—Ä–æ–ø—É—Å–∫–∞–º–∏
        document.querySelectorAll("[data-points]").forEach(el=>{ 
            try { enableAutoResize(el); } catch (e) {}          // –∞–≤—Ç–æ-—Ä–µ—Å–∞–π–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π (–µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –µ—Å—Ç—å)
            try { autosizeInputs(el); } catch (e) {}            // –∞–≤—Ç–æ–ø–æ–¥–≥–æ–Ω —à–∏—Ä–∏–Ω—ã –∏–Ω–ø—É—Ç–æ–≤ –ø–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
        });

        // 4) –ù–∞–∑–Ω–∞—á–∞–µ–º .answer –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —è–≤–ª—è—é—Ç—Å—è ¬´–º–µ—Å—Ç–æ–º –æ—Ç–≤–µ—Ç–∞¬ª
        document.querySelectorAll('input.gap, textarea.gap, .plug-gap').forEach(el => { // GAP-–ø–æ–ª—è, plug-gap –∏ –æ–ø—Ü–∏–∏ MCQ
            el.classList.add('answer');                                                                // —Ç–µ–ø–µ—Ä—å –Ω–∞ –Ω–∏—Ö –±—É–¥—É—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –æ–±—â–∏–µ —Å—Ç–∏–ª–∏ answer
        });  // –∫–æ–Ω–µ—Ü —à–∞–≥–∞ 4

        try { initStickyPools(); } catch(e) {}

        // 5) –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥—Å—á—ë—Ç–∞ –∏ —Å—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
        setTimeout(()=>{ 
            score_attachWrappers();
            ScoreManager.recalcAllBlocks();
        }, 0);

    }); 

//#endregion
// ======================================================================

</script>

    <div class="audio-global-player" id="audio-global-player">
        <div class="audio-global-player-inner">

            <div class="audio-global-player-controls">
                <button class="audio-global-player-closebtn" type="button"
                        aria-label="Close audio player">
                    <span class="material-symbols-outlined">close_small</span>
                </button>

                <button class="audio-global-player-loopbtn" type="button"
                        aria-label="Loop"
                        aria-pressed="false">
                    <span class="material-symbols-outlined">laps</span>
                </button>

                <button class="audio-global-player-playbtn" type="button"
                        aria-label="Play or pause current audio">
                    <span class="material-symbols-outlined">play_circle</span>
                </button>
            </div>

            <div class="audio-global-player-visual">
                <canvas class="audio-global-player-waveform-canvas" height="32"></canvas>
                <div class="audio-global-player-progress">
                    <div class="audio-global-player-progress-fill"></div>
                </div>
            </div>

            <div class="audio-global-player-times">
                <span class="audio-global-player-current">0:00</span>
                <span>/</span>
                <span class="audio-global-player-total">0:00</span>
            </div>

        </div>
    </div>
    </body></html>